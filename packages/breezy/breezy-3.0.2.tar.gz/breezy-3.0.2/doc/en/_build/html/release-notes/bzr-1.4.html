
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Bazaar Release Notes &#8212; Breezy 3.0.2dev documentation</title>
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="../index.html">Table of Contents (3.0.2dev)</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="bazaar-release-notes">
<h1>Bazaar Release Notes<a class="headerlink" href="#bazaar-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="bzr-1-4">
<h2>bzr 1.4<a class="headerlink" href="#bzr-1-4" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Released</dt>
<dd class="field-odd"><p>2008-04-28</p>
</dd>
</dl>
<p>This release of Bazaar includes handy improvements to the speed of log and
status, new options for several commands, improved documentation, and better
hooks, including initial code for server-side hooks.  A number of bugs have
been fixed, particularly in interoperability between different formats or
different releases of Bazaar over there network.  There’s been substantial
internal work in both the repository and network code to enable new features
and faster performance.</p>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Pushing a branch in “dirstate” format (Branch5) over bzr+ssh would break
if the remote server was &lt; version 1.2.  This was due to a bug in the
RemoteRepository.get_parent_map() fallback code.
(John Arbash Meinel, Andrew Bennetts, #214894)</p></li>
</ul>
</div>
</div>
<div class="section" id="bzr-1-4rc2">
<h2>bzr 1.4rc2<a class="headerlink" href="#bzr-1-4rc2" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Released</dt>
<dd class="field-odd"><p>2008-04-21</p>
</dd>
</dl>
<div class="section" id="id1">
<h3>Bug Fixes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">log</span> <span class="pre">-r</span> <span class="pre">..X</span> <span class="pre">bzr://</span></code> was failing, because it was getting a request
for <code class="docutils literal notranslate"><span class="pre">revision_id=None</span></code> which was not a string.
(John Arbash Meinel, #211661)</p></li>
<li><p>Fixed a bug in handling ghost revisions when logging changes in a
particular file.  (John Arbash Meinel, #209948)</p></li>
<li><p>Fix error about “attempt to add line-delta in non-delta knit”.
(Andrew Bennetts, #205156)</p></li>
<li><p>Fixed performance degradation in fetching from knit repositories to
knits and packs due to parsing the entire revisions.kndx on every graph
walk iteration fixed by using the Repository.get_graph API.  There was
another regression in knit =&gt; knit fetching which re-read the index for
every revision each side had in common.
(Robert Collins, John Arbash Meinel)</p></li>
</ul>
</div>
</div>
<div class="section" id="bzr-1-4rc1">
<h2>bzr 1.4rc1<a class="headerlink" href="#bzr-1-4rc1" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Released</dt>
<dd class="field-odd"><p>2008-04-11</p>
</dd>
</dl>
<div class="section" id="changes">
<h3>Changes<a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>bzr main script cannot be imported (Benjamin Peterson)</p></li>
<li><p>On GNU/Linux bzr additionally looks for plugins in arch-independent site
directory. (Toshio Kuratomi)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">set_rh</span></code> branch hook is now deprecated. Please migrate
any plugins using this hook to use an alternative, e.g.
<code class="docutils literal notranslate"><span class="pre">post_change_branch_tip</span></code>. (Ian Clatworthy)</p></li>
<li><p>When a plugin cannot be loaded as the file path is not a valid
python module name bzr will now strip a <code class="docutils literal notranslate"><span class="pre">bzr_</span></code> prefix from the
front of the suggested name, as many plugins (e.g. bzr-svn)
want to be installed without this prefix. It is a common mistake
to have a folder named “bzr-svn” for that plugin, especially
as this is what bzr branch lp:bzr-svn will give you. (James Westby,
Andrew Cowie)</p></li>
<li><p>UniqueIntegerBugTracker now appends bug-ids instead of joining
them to the base URL. Plugins that register bug trackers may
need a trailing / added to the base URL if one is not already there.
(James Wesby, Andrew Cowie)</p></li>
</ul>
</div>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added start_commit hook for mutable trees. (Jelmer Vernooij, #186422)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">status</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">--no-pending</span></code> to show the status without
listing pending merges, which speeds up the command a lot on large
histories.  (James Westby, #202830)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">post_change_branch_tip</span></code> hook that is called after the
branch tip is moved but while the branch is still write-locked.
See the User Reference for signature details.
(Ian Clatworthy, James Henstridge)</p></li>
<li><p>Reconfigure can convert a branch to be standalone or to use a shared
repository.  (Aaron Bentley)</p></li>
</ul>
</div>
<div class="section" id="improvements">
<h3>Improvements<a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The smart protocol now has support for setting branches’ revision info
directly.  This should make operations like push slightly faster, and is a
step towards server-side hooks.  The new request method name is
<code class="docutils literal notranslate"><span class="pre">Branch.set_last_revision_info</span></code>.  (Andrew Bennetts)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">commit</span> <span class="pre">--fixes</span></code> now recognises “gnome” as a tag by default.
(James Westby, Andrew Cowie)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">switch</span></code> will attempt to find branches to switch to relative to the
current branch. E.g. <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">switch</span> <span class="pre">branchname</span></code> will look for
<code class="docutils literal notranslate"><span class="pre">current_branch/../branchname</span></code>. (Robert Collins, Jelmer Vernooij,
Wouter van Heyst)</p></li>
<li><p>Diff is now more specific about execute-bit changes it describes
(Chad Miller)</p></li>
<li><p>Fetching data over HTTP is a bit faster when urllib is used.  This is done
by forcing it to recv 64k at a time when reading lines in HTTP headers,
rather than just 1 byte at a time.  (Andrew Bennetts)</p></li>
<li><p>Log –short and –line are much faster when -r is not specified.
(Aaron Bentley)</p></li>
<li><p>Merge is faster.  We no longer check a file’s existence unnecessarily
when merging the execute bit.  (Aaron Bentley)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">status</span></code> on an explicit list of files no longer shows pending
merges, making it much faster on large trees. (John Arbash Meinel)</p></li>
<li><p>The launchpad directory service now warns the user if they have not set
their launchpad login and are trying to resolve a URL using it, just
in case they want to do a write operation with it.  (James Westby)</p></li>
<li><p>The smart protocol client is slightly faster, because it now only queries
the server for the protocol version once per connection.  Also, the HTTP
transport will now automatically probe for and use a smart server if
one is present.  You can use the new <code class="docutils literal notranslate"><span class="pre">nosmart+</span></code> transport decorator
to get the old behaviour.  (Andrew Bennetts)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">version</span></code> command takes a <code class="docutils literal notranslate"><span class="pre">--short</span></code> option to print just the
version number, for easier use in scripts.  (Martin Pool)</p></li>
<li><p>Various operations with revision specs and commands that calculate
revnos and revision ids are faster.  (John A. Meinel, Aaron Bentley)</p></li>
</ul>
</div>
<div class="section" id="bugfixes">
<h3>Bugfixes<a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">root_client_path</span></code> parameter to SmartWSGIApp and
SmartServerRequest.  This makes it possible to publish filesystem
locations that don’t exactly match URL paths. SmartServerRequest
subclasses should use the new <code class="docutils literal notranslate"><span class="pre">translate_client_path</span></code> and
<code class="docutils literal notranslate"><span class="pre">transport_from_client_path</span></code> methods when dealing with paths received
from a client to take this into account.  (Andrew Bennetts, #124089)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">mv</span> <span class="pre">a</span> <span class="pre">b</span></code> can be now used also to rename previously renamed
directories, not only files. (Lukáš Lalinský, #107967)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">uncommit</span> <span class="pre">--local</span></code> can now remove revisions from the local
branch to be symmetric with <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">commit</span> <span class="pre">--local</span></code>.
(John Arbash Meinel, #93412)</p></li>
<li><p>Don’t ask for a password if there is no real terminal.
(Alexander Belchenko, #69851)</p></li>
<li><p>Fix a bug causing a ValueError crash in <code class="docutils literal notranslate"><span class="pre">parse_line_delta_iter</span></code> when
fetching revisions from a knit to pack repository or vice versa using
bzr:// (including over HTTP or SSH).
(#208418, Andrew Bennetts, Martin Pool, Robert Collins)</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">_get_line</span></code> in <code class="docutils literal notranslate"><span class="pre">bzrlib.smart.medium</span></code>, which was buggy.  Also
fixed <code class="docutils literal notranslate"><span class="pre">_get_bytes</span></code> in the same module to use the push back buffer.
These bugs had no known impact in normal use, but were problematic for
developers working on the code, and were likely to cause real bugs sooner
or later.  (Andrew Bennetts)</p></li>
<li><p>Implement handling of basename parameter for DefaultMail.  (James Westby)</p></li>
<li><p>Incompatibility with Paramiko versions newer than 1.7.2 was fixed.
(Andrew Bennetts, #213425)</p></li>
<li><p>Launchpad locations (lp: URLs) can be pulled.  (Aaron Bentley, #181945)</p></li>
<li><p>Merges that add files to deleted root directories complete.  They
do create conflicts.  (Aaron Bentley, #210092)</p></li>
<li><p>vsftp’s return <code class="docutils literal notranslate"><span class="pre">550</span> <span class="pre">RNFR</span> <span class="pre">command</span> <span class="pre">failed.</span></code> supported.
(Marcus Trautwig, #129786)</p></li>
</ul>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Improved documentation on send/merge relationship. (Peter Schuller)</p></li>
<li><p>Minor fixes to the User Guide. (Matthew Fuller)</p></li>
<li><p>Reduced the evangelism in the User Guide. (Ian Clatworthy)</p></li>
<li><p>Added Integrating with Bazaar document for developers (Martin Albisetti)</p></li>
</ul>
</div>
<div class="section" id="api-breaks">
<h3>API Breaks<a class="headerlink" href="#api-breaks" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Attempting to pull data from a ghost aware repository (e.g. knits) into a
non-ghost aware repository such as weaves will now fail if there are
ghosts.  (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KnitVersionedFile</span></code> no longer accepts an <code class="docutils literal notranslate"><span class="pre">access_mode</span></code> parameter, and
now requires the <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">access_method</span></code> parameters to be
supplied. A compatible shim has been kept in the new function
<code class="docutils literal notranslate"><span class="pre">knit.make_file_knit</span></code>. (Robert Collins)</p></li>
<li><p>Log formatters must now provide log_revision instead of show and
show_merge_revno methods. The latter had been deprecated since the 0.17
release. (James Westby)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LoopbackSFTP</span></code> is now called <code class="docutils literal notranslate"><span class="pre">SocketAsChannelAdapter</span></code>.
(Andrew Bennetts)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">osutils.backup_file</span></code> is removed. (Alexander Belchenko)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Repository.get_revision_graph</span></code> is deprecated, with no replacement
method. The method was size(history) and not desirable. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">revision.revision_graph</span></code> is deprecated, with no replacement function.
The function was size(history) and not desirable. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Transport.get_shared_medium</span></code> is deprecated.  Use
<code class="docutils literal notranslate"><span class="pre">Transport.get_smart_medium</span></code> instead.  (Andrew Bennetts)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile</span></code> factories now accept a get_scope parameter rather
than using a call to <code class="docutils literal notranslate"><span class="pre">transaction_finished</span></code>, allowing the removal of
the fixed list of versioned files per repository. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.annotate_iter</span></code> is deprecated. While in principle this
allowed lower memory use, all users of annotations wanted full file
annotations, and there is no storage format suitable for incremental
line-by-line annotation. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.clone_text</span></code> is deprecated. This performance optimisation
is no longer used - reading the content of a file that is undergoing a
file level merge to identical state on two branches is rare enough, and
not expensive enough to special case. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.clear_cache</span></code> and <code class="docutils literal notranslate"><span class="pre">enable_cache</span></code> are deprecated.
These methods added significant complexity to the <code class="docutils literal notranslate"><span class="pre">VersionedFile</span></code>
implementation, but were only used for optimising fetches from knits -
which can be done from outside the knit layer, or via a caching
decorator. As knits are not the default format, the complexity is no
longer worth paying. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.create_empty</span></code> is removed. This method presupposed a
sensible mapping to a transport for individual files, but pack backed
versioned files have no such mapping. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.get_graph</span></code> is deprecated, with no replacement method.
The method was size(history) and not desirable. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.get_graph_with_ghosts</span></code> is deprecated, with no
replacement method.  The method was size(history) and not desirable.
(Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.get_parents</span></code> is deprecated, please use
<code class="docutils literal notranslate"><span class="pre">VersionedFile.get_parent_map</span></code>. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.get_sha1</span></code> is deprecated, please use
<code class="docutils literal notranslate"><span class="pre">VersionedFile.get_sha1s</span></code>. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.has_ghost</span></code> is now deprecated, as it is both expensive
and unused outside of a single test. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile.iter_parents</span></code> is now deprecated in favour of
<code class="docutils literal notranslate"><span class="pre">get_parent_map</span></code> which can be used to instantiate a Graph on a
VersionedFile. (Robert Collins)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFileStore</span></code> no longer uses the transaction parameter given
to most methods; amongst other things this means that the
get_weave_or_empty method no longer guarantees errors on a missing weave
in a readonly transaction, and no longer caches versioned file instances
which reduces memory pressure (but requires more careful management by
callers to preserve performance). (Robert Collins)</p></li>
</ul>
</div>
<div class="section" id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>New -Dselftest_debug flag disables clearing of the debug flags during
tests.  This is useful if you want to use e.g. -Dhpss to help debug a
failing test.  Be aware that using this feature is likely to cause
spurious test failures if used with the full suite. (Andrew Bennetts)</p></li>
<li><p>selftest –load-list now uses a new more agressive test loader that will
avoid loading unneeded modules and building their tests. Plugins can use
this new loader by defining a load_tests function instead of a test_suite
function. (a forthcoming patch will provide many examples on how to
implement this).
(Vincent Ladeuil)</p></li>
<li><p>selftest –load-list now does some sanity checks regarding duplicate test
IDs and tests present in the list but not found in the actual test suite.
(Vincent Ladeuil)</p></li>
<li><p>Slightly more concise format for the selftest progress bar, so there’s
more space to show the test name.  (Martin Pool)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2500</span><span class="o">/</span><span class="mi">10884</span><span class="p">,</span> <span class="mi">1</span><span class="n">fail</span><span class="p">,</span> <span class="mi">3</span><span class="n">miss</span> <span class="ow">in</span> <span class="mi">1</span><span class="n">m29s</span><span class="p">]</span> <span class="n">test_revisionnamespaces</span><span class="o">.</span><span class="n">TestRev</span>
</pre></div>
</div>
</li>
<li><p>The test suite takes much less memory to run, and is a bit faster.  This
is done by clearing most attributes of TestCases after running them, if
they succeeded.  (Andrew Bennetts)</p></li>
</ul>
</div>
<div class="section" id="internals">
<h3>Internals<a class="headerlink" href="#internals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">_build_client_protocol</span></code> to <code class="docutils literal notranslate"><span class="pre">_SmartClient</span></code>.  (Andrew Bennetts)</p></li>
<li><p>Added basic infrastructure for automatic plugin suggestion.
(Martin Albisetti)</p></li>
<li><p>If a <code class="docutils literal notranslate"><span class="pre">LockableFiles</span></code> object is not explicitly unlocked (for example
because of a missing <code class="docutils literal notranslate"><span class="pre">try/finally</span></code> block, it will give a warning but
not automatically unlock itself.  (Previously they did.)  This
sometimes caused knock-on errors if for example the network connection
had already failed, and should not be relied upon by code.
(Martin Pool, #109520)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">dist</span></code> target to build a release tarball, and also
<code class="docutils literal notranslate"><span class="pre">check-dist-tarball</span></code> and <code class="docutils literal notranslate"><span class="pre">dist-upload-escudero</span></code>.  (Martin Pool)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">read_response_tuple</span></code> method of <code class="docutils literal notranslate"><span class="pre">SmartClientRequestProtocol*</span></code>
classes will now raise <code class="docutils literal notranslate"><span class="pre">UnknownSmartMethod</span></code> when appropriate, so that
callers don’t need to try distinguish unknown request errors from other
errors.  (Andrew Bennetts)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_make_working_trees</span></code> is now implemented provided on all repository
implementations (Aaron Bentley)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFile</span></code> now has a new method <code class="docutils literal notranslate"><span class="pre">get_parent_map</span></code> which, like
<code class="docutils literal notranslate"><span class="pre">Graph.get_parent_map</span></code> returns a dict of key:parents. (Robert Collins)</p></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../whats-new/whats-new-in-3.0.html">What’s New in Breezy 3.0?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">Breezy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/index.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Breezy Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-guide/index.html">Breezy Upgrade Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-reference/index.html">Breezy User Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">Breezy System Administrator’s Guide</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="../_sources/release-notes/bzr-1.4.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2011 Canonical Ltd, 2017-2018 Breezy Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>