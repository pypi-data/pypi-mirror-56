
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>What’s New in Bazaar 2.4 (Oronsay) &#8212; Breezy 3.0.2dev documentation</title>
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="../index.html">Table of Contents (3.0.2dev)</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-bazaar-2-4-oronsay">
<h1>What’s New in Bazaar 2.4 (Oronsay)<a class="headerlink" href="#what-s-new-in-bazaar-2-4-oronsay" title="Permalink to this headline">¶</a></h1>
<p>Bazaar 2.4 has been released on the 8th of August 2011 and marks the start
of a new long-term-stable series. From here, we will only make bugfix
releases on the 2.4 series (2.4.1, etc, and support it until February 2013),
while 2.5 will become our new development series.</p>
<p>This document accumulates a high level summary of what’s changed.  See the
<a class="reference internal" href="../release-notes/index.html"><span class="doc">Breezy Release Notes</span></a> for a full list.</p>
<p>Users are encouraged to upgrade from the other stable series.  This
document outlines the improvements in Bazaar 2.4 vs Bazaar 2.3. As well as
summarizing improvements made to the core product, it highlights
enhancements within the broader Bazaar world of potential interest to
those upgrading.</p>
<p>Bazaar 2.4.0 is fully compatible both locally and on the network with 2.0,
2.1, 2.2 and 2.3, and can read and write repositories generated by all
previous versions.</p>
<p>Bazaar 2.4.1 includes all the fixes in the un-released 2.0.7, 2.1.5, 2.2.6
and 2.3.5 versions that weren’t included in 2.4.0 and fixes some bugs on its
own.</p>
<p>Bazaar 2.4.2 includes all the fixes in the un-released 2.0.7, 2.1.5, 2.2.6
and 2.3.5 versions that weren’t included in 2.4.1 and fixes some bugs on its
own.</p>
<div class="section" id="dropping-python2-4-and-python2-5-support">
<h2>Dropping Python2.4 and Python2.5 support<a class="headerlink" href="#dropping-python2-4-and-python2-5-support" title="Permalink to this headline">¶</a></h2>
<p>Bazaar 2.4.0 is the first version of bzr to drop support for python
versions before 2.6. The 2.3 series will still be maintained in bugfix
mode for people who need older versions of python. You can also use
Launchpad to nominate fixes for 2.3. We can’t fix everything, but that can
help guide us to what people are running into. Upgrading to python2.6
allows us to clean up the syntax in our files, and makes it easier to work
on python3 compatibility.</p>
</div>
<div class="section" id="external-merge-tools">
<h2>External merge tools<a class="headerlink" href="#external-merge-tools" title="Permalink to this headline">¶</a></h2>
<p>External merge tool configuration has been added to <code class="docutils literal notranslate"><span class="pre">bzr</span></code> core. The name
and commandline of one or more external merge tools can be defined in
bazaar.conf. See the help topic <code class="docutils literal notranslate"><span class="pre">configuration</span></code> for more details.</p>
</div>
<div class="section" id="tagged-revisions-are-copied">
<h2>Tagged revisions are copied<a class="headerlink" href="#tagged-revisions-are-copied" title="Permalink to this headline">¶</a></h2>
<p>When tags are copied from a branch, the associated revisions are now copied
too if the config entry <code class="docutils literal notranslate"><span class="pre">branch.fetch_tags</span></code> is set to True.  Operations
like branching, merging or pulling will still always copy new tags visible
in <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">tags</span></code>. When the config is set, it will now also copy the
revisions and their ancestry.  This way tagged revisions will always be
present, so that operations like <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">log</span> <span class="pre">-r</span> <span class="pre">tag:foo</span></code> will always work.</p>
</div>
<div class="section" id="deprecated-command-synonyms">
<h2>Deprecated command synonyms<a class="headerlink" href="#deprecated-command-synonyms" title="Permalink to this headline">¶</a></h2>
<p>Two built-in synonyms for <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">branch</span></code> have been deprecated: <code class="docutils literal notranslate"><span class="pre">clone</span></code> and
<code class="docutils literal notranslate"><span class="pre">get</span></code>.</p>
</div>
<div class="section" id="command-options">
<h2>Command options<a class="headerlink" href="#command-options" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">log</span></code> and <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">missing</span></code> commands now accept <code class="docutils literal notranslate"><span class="pre">-S</span></code> as a
shorthand for <code class="docutils literal notranslate"><span class="pre">--short</span></code>.</p></li>
</ul>
</div>
<div class="section" id="configuration-files">
<h2>Configuration files<a class="headerlink" href="#configuration-files" title="Permalink to this headline">¶</a></h2>
<p>Option values can now refer to other options in the same configuration file
by enclosing them in curly brackets (<code class="docutils literal notranslate"><span class="pre">{option}</span></code>). This is an opt-in
feature controlled by the <code class="docutils literal notranslate"><span class="pre">bzr.config.expand</span></code> option that should be
declared in <code class="docutils literal notranslate"><span class="pre">bazaar.conf</span></code> and no other file.</p>
</div>
<div class="section" id="changelog-merge-plugin">
<h2>Changelog merge plugin<a class="headerlink" href="#changelog-merge-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">changelog_merge</span></code> plugin has been added.  It provides a merge hook
to automate merging of changes to <code class="docutils literal notranslate"><span class="pre">ChangeLog</span></code> files in GNU’s change log
format.  Refer to <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">help</span> <span class="pre">changelog_merge</span></code> for documentation on how to
enable it and what it can do.</p>
</div>
<div class="section" id="faster-operations-on-large-trees">
<h2>Faster operations on Large Trees<a class="headerlink" href="#faster-operations-on-large-trees" title="Permalink to this headline">¶</a></h2>
<p>Many bzr commands used to run into pathological behavior on large trees
(&gt;10k files), reading the inventory data in random order causing cache
thrashing (the fix was backported to bzr-2.3.2). We also updated several
code paths that were updating the WT state using an O(tree) operation to
one that was an O(changes) operation.  A possibly incomplete list is as
follows for running commands on a 70k file tree:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bzr</span><span class="o">-</span><span class="mf">2.3</span><span class="o">.</span><span class="mi">1</span> <span class="n">bzr</span><span class="o">-</span><span class="mf">2.3</span><span class="o">.</span><span class="mi">2</span> <span class="n">bzr</span><span class="o">-</span><span class="mf">2.4</span>  <span class="n">action</span>
<span class="mi">3</span><span class="n">m39s</span>         <span class="mi">1</span><span class="n">m08s</span>   <span class="mi">1</span><span class="n">m03s</span>  <span class="n">bzr</span> <span class="n">co</span> <span class="o">--</span><span class="n">lightweight</span>
  <span class="mi">38</span><span class="n">s</span>            <span class="mi">8</span><span class="n">s</span>      <span class="mi">2</span><span class="n">s</span>  <span class="n">bzr</span> <span class="n">revert</span> <span class="p">(</span><span class="ow">in</span> <span class="n">a</span> <span class="n">clean</span> <span class="n">tree</span><span class="p">)</span>
<span class="mi">4</span><span class="n">m47s</span>         <span class="mi">3</span><span class="n">m56s</span>     <span class="mi">15</span><span class="n">s</span>  <span class="n">bzr</span> <span class="n">merge</span>
<span class="mi">4</span><span class="n">m45s</span>           <span class="mi">20</span><span class="n">s</span>      <span class="mi">3</span><span class="n">s</span>  <span class="n">bzr</span> <span class="n">pull</span>
<span class="mi">4</span><span class="n">m58s</span>         <span class="mi">3</span><span class="n">m00s</span>      <span class="mi">2</span><span class="n">s</span>  <span class="n">bzr</span> <span class="n">up</span>
<span class="mi">9</span><span class="n">m33s</span>           <span class="mi">21</span><span class="n">s</span>     <span class="mi">19</span><span class="n">s</span>  <span class="n">bzr</span> <span class="n">uncommit</span> <span class="p">(</span><span class="n">including</span> <span class="n">a</span> <span class="n">merge</span><span class="p">)</span>
<span class="mi">4</span><span class="n">m44s</span>           <span class="mi">17</span><span class="n">s</span>      <span class="mi">2</span><span class="n">s</span>  <span class="n">bzr</span> <span class="n">uncommit</span> <span class="p">(</span><span class="n">simple</span> <span class="n">commit</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a smaller table of times for the Launchpad tree (~8k items):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bzr</span><span class="o">-</span><span class="mf">2.3</span><span class="o">.</span><span class="mi">1</span>   <span class="n">bzr</span><span class="o">-</span><span class="mf">2.4</span>     <span class="n">action</span>
<span class="mf">5.3</span><span class="n">s</span>        <span class="mf">5.2</span><span class="n">s</span>        <span class="n">bzr</span> <span class="n">co</span> <span class="o">--</span><span class="n">lightweight</span>
<span class="mf">0.9</span><span class="n">s</span>        <span class="mf">0.3</span><span class="n">s</span>        <span class="n">bzr</span> <span class="n">revert</span>
<span class="mf">1.4</span><span class="n">s</span>        <span class="mf">0.4</span><span class="n">s</span>        <span class="n">bzr</span> <span class="n">pull</span>
<span class="mf">3.9</span><span class="n">s</span>        <span class="mf">3.7</span><span class="n">s</span>        <span class="n">bzr</span> <span class="n">uncommit</span> <span class="p">(</span><span class="k">with</span> <span class="n">merge</span><span class="p">)</span>
<span class="mf">0.9</span><span class="n">s</span>        <span class="mf">0.3</span><span class="n">s</span>        <span class="n">bzr</span> <span class="n">uncommit</span> <span class="p">(</span><span class="n">without</span> <span class="n">merge</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="faster-stacked-branches">
<h2>Faster stacked branches<a class="headerlink" href="#faster-stacked-branches" title="Permalink to this headline">¶</a></h2>
<p>Creating a stacked branch from a smart server with <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">branch</span>
<span class="pre">--stacked</span></code> is a bit faster now.  For small branches it does 20% fewer
network roundtrips.  Other operations where a local branch is stacked on a
branch hosted on a smart server will also benefit.</p>
</div>
<div class="section" id="more-export-control">
<h2>More export control<a class="headerlink" href="#more-export-control" title="Permalink to this headline">¶</a></h2>
<p>When exporting a tree, you may now use get_export_generator() to
do an operation after each file is exported.</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">selftest</span> <span class="pre">--exclude</span></code> option can now be specified multiple times and
the tests that match any of the specified patterns will be excluded. Only
the last specified pattern was previously taken into account.</p>
</div>
<div class="section" id="digital-signature-verification">
<h2>Digital Signature Verification<a class="headerlink" href="#digital-signature-verification" title="Permalink to this headline">¶</a></h2>
<p>A new command <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">verify-signatures</span></code> has been added to check that commits
are correctly signed with trusted keys by GPG.  This requires python-gpgme to
be installed.  <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">log</span></code> has gained a <code class="docutils literal notranslate"><span class="pre">--signatures</span></code> option to list the
validity of signatures for each commit.  New config options <code class="docutils literal notranslate"><span class="pre">acceptable_keys</span></code>
and <code class="docutils literal notranslate"><span class="pre">validate_signatures_in_log</span></code> can be set to control options to these
commands.</p>
</div>
<div class="section" id="further-information">
<h2>Further information<a class="headerlink" href="#further-information" title="Permalink to this headline">¶</a></h2>
<p>For more detailed information on the changes made, see the the
<a class="reference internal" href="../release-notes/index.html"><span class="doc">Breezy Release Notes</span></a> for:</p>
<ul class="simple">
<li><p>the interim bzr <a class="reference external" href="https://launchpad.net/bzr/2.4">milestones</a></p></li>
<li><p>the plugins you use.</p></li>
</ul>
<p>For a summary of changes made in earlier releases, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="whats-new-in-2.1.html"><span class="doc">What’s New in Bazaar 2.1?</span></a></p></li>
<li><p><a class="reference internal" href="whats-new-in-2.2.html"><span class="doc">What’s New in Bazaar 2.2?</span></a></p></li>
<li><p><a class="reference internal" href="whats-new-in-2.3.html"><span class="doc">What’s New in Bazaar 2.3?</span></a></p></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="whats-new-in-3.0.html">What’s New in Breezy 3.0?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">Breezy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/index.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/index.html">Breezy Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-guide/index.html">Breezy Upgrade Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-reference/index.html">Breezy User Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">Breezy System Administrator’s Guide</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="../_sources/whats-new/whats-new-in-2.4.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2011 Canonical Ltd, 2017-2018 Breezy Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>