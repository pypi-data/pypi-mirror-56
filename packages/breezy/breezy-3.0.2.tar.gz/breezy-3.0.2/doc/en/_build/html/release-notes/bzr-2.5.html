
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Bazaar Release Notes &#8212; Breezy 3.0.2dev documentation</title>
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="../index.html">Table of Contents (3.0.2dev)</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="bazaar-release-notes">
<h1>Bazaar Release Notes<a class="headerlink" href="#bazaar-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="bzr-2-5-2">
<h2>bzr 2.5.2<a class="headerlink" href="#bzr-2-5-2" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">2.5.2</dt>
<dd class="field-odd"><p>NOT RELEASED YET</p>
</dd>
</dl>
<div class="section" id="external-compatibility-breaks">
<h3>External Compatibility Breaks<a class="headerlink" href="#external-compatibility-breaks" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="new-features">
<h3>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="improvements">
<h3>Improvements<a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">config</span></code> properly handles aliases and references in the
<code class="docutils literal notranslate"><span class="pre">--directory</span></code> parameter (Vincent Ladeuil, Wouter van Heyst, #947049)</p></li>
<li><p>Empty arguments in EDITOR are now properly preserved.
(Ross Lagerwall, #1089792)</p></li>
<li><p>Fix a traceback when trying to checkout a tree that also has an entry
with file-id <cite>TREE_ROOT</cite> somewhere other than at the root directory.
(John Arbash Meinel, #830947)</p></li>
<li><p>Lightweight checkouts of remote repositories had a bug with how they
extracted texts from the repository. (Just an ordering constraint on how
they consumed the stream.) (John Arbash Meinel, #1046284)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">osutils.send_all</span></code> now detects if we get a series of zero bytes sent,
and fails with a ECONNRESET. It seems if paramiko gets disconnected, it
will get into a state where it returns 0 bytes sent, but doesn’t raise
an error. This change allows us to get a couple hiccups of no content
sent, but if it is consistent, we will consider it to be a failure.
(John Arbash Meinel, #1047309)</p></li>
<li><p>Revert use of –no-tty when gpg signing commits. (Jelmer Vernooij, #1014570)</p></li>
<li><p>Some filesystems give <code class="docutils literal notranslate"><span class="pre">EOPNOTSUPP</span></code> when trying to call <code class="docutils literal notranslate"><span class="pre">fdatasync</span></code>.
This shouldn’t be treated as a fatal error.
(John Arbash Meinel, #1075108)</p></li>
<li><p>Some small bug fixes wrt lightweight checkouts and remote repositories.
A test permutation was added that runs all working tree tests against a
lightweight checkout. (John Arbash Meinel, #1046697)</p></li>
</ul>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="api-changes">
<h3>API Changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="internals">
<h3>Internals<a class="headerlink" href="#internals" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="bzr-2-5-1">
<h2>bzr 2.5.1<a class="headerlink" href="#bzr-2-5-1" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">2.5.1</dt>
<dd class="field-odd"><p>2012-05-22</p>
</dd>
</dl>
<p>This is a bugfix release. Most of the bugs dealt with https and colocated
branches glitches. Upgrading is recommended for all users of earlier 2.5
releases.</p>
<div class="section" id="id1">
<h3>External Compatibility Breaks<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id2">
<h3>New Features<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id3">
<h3>Improvements<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">rmbranch</span></code> now supports removing colocated branches.
(Jelmer Vernooij, #920653)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">rmbranch</span></code> no longer removes active branches unless <code class="docutils literal notranslate"><span class="pre">--force</span></code>
is specified. (Jelmer Vernooij, #922953)</p></li>
</ul>
</div>
<div class="section" id="id4">
<h3>Bug Fixes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Connecting with HTTPS via HTTP now correctly uses the host name of the
destination rather than the proxy when checking certificates.
(Martin Packman, #944696)</p></li>
<li><p>Fixed merge tool availability checking and invocation to search the
Windows App Path registry in addition to the PATH. (Gordon Tyler, #939605)</p></li>
<li><p>Fixed problem with getting errors about failing to open /dev/tty when using
Bazaar Explorer to sign commits. (Mark Grandi, #847388)</p></li>
<li><p>Fix UnicodeEncodeError when translated progress task messages contain
non-ascii text. (Martin Packman, #966934)</p></li>
<li><p>Make sure configuration options can provide their own help topic.
(Jelmer Vernooij, #941672)</p></li>
</ul>
</div>
<div class="section" id="id5">
<h3>Documentation<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The alpha-quality texinfo sphinx builder has been deprecated. Sphinx &gt;=
1.1.2 now provides a better one. Most of the documentation can now be
generated to the texinfo format with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">texinfo-sphinx</span></code>. This will
generate both the <code class="docutils literal notranslate"><span class="pre">.texi</span></code> files and the <code class="docutils literal notranslate"><span class="pre">.info</span></code> ones.
(Vincent Ladeuil, #940164)</p></li>
</ul>
</div>
<div class="section" id="id6">
<h3>API Changes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id7">
<h3>Testing<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add support for pyftpdlib &gt;= 0.7.0 and drop support for previous pyftpdlib
versions. (Vincent Ladeuil, #956027)</p></li>
<li><p>Run smoketest for setup.py isolated in a tempdir. (Martin Packman, #140874)</p></li>
</ul>
</div>
</div>
<div class="section" id="bzr-2-5-0">
<h2>bzr 2.5.0<a class="headerlink" href="#bzr-2-5-0" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Codename</dt>
<dd class="field-odd"><p>Phillip</p>
</dd>
<dt class="field-even">2.5.0</dt>
<dd class="field-even"><p>2012-02-24</p>
</dd>
</dl>
<p>This release marks the start of a new long-term-stable series. From here, we
will only make bugfix releases on the 2.5 series (2.5.1, etc, and support it
until April 2017), while 2.6 will become our new development series.</p>
<p>This is a bugfix and polish release over the 2.4 series, with a large number
of bugs fixed (~170 for the 2.5 series alone). The 2.5 series provides a
faster smart protocol implementation for many operations, basic support for
colocated branches. We have started translating bzr with the 2.5 series:
<a class="reference external" href="https://translations.launchpad.net/bzr">https://translations.launchpad.net/bzr</a>, more than 20 languages have already
been registered but these are the early days, contributions welcome.</p>
<p>Only a few bugfixes have been included since 2.5b6 so all known fixed bugs
are included here.</p>
<p>Users are encouraged to upgrade from the other stable series.</p>
<div class="section" id="id8">
<h3>External Compatibility Breaks<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id9">
<h3>New Features<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id10">
<h3>Improvements<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The names of colocated branches are used as branch nicks if no nick is
specified. (Aaron Bentley)</p></li>
</ul>
</div>
<div class="section" id="id11">
<h3>Bug Fixes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Show locks in <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">info</span></code> on control directories without a
repository. (Jelmer Vernooij, #936767)</p></li>
<li><p>Disable ssl certificate verification on osx and windows until a native
access to the the root certificates is provided there.
(Vincent Ladeuil, #929179)</p></li>
</ul>
</div>
<div class="section" id="id12">
<h3>Testing<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Stop depending on the particular CPython ordering of dictionary keys
when testing the result of BzrDir.get_branches.
(Wouter van Heyst)</p></li>
</ul>
</div>
</div>
<div class="section" id="bzr-2-5b6">
<h2>bzr 2.5b6<a class="headerlink" href="#bzr-2-5b6" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">2.5b6</dt>
<dd class="field-odd"><p>2012-02-02</p>
</dd>
</dl>
<p>This is the sixth (and last (really)) beta of the 2.5 series, leading to a
2.5.0 release in March 2012. Beta releases are suitable for everyday use
but may cause some incompatibilities with plugins.</p>
<p>This introduces the support for colocated branches into the ‘2a’ format in a
backward compatible way, fix more glitches in the colocated UI, verify https
certificates for the urllib https client implementation, fix some more
unicode issues and more.</p>
<p>All bugs fixed in previous series known at the time of this release are
included.</p>
<div class="section" id="id13">
<h3>External Compatibility Breaks<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id14">
<h3>New Features<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Support for colocated branches is now available in the default
format (“2a”). (Jelmer Vernooij)</p></li>
</ul>
</div>
<div class="section" id="id15">
<h3>Improvements<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">switch</span> <span class="pre">-b</span></code> in a standalone tree will now create a colocated branch.
(Jelmer Vernooij, #918197)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">info</span></code> now reports when there are present (but unused) colocated
branches. (Jelmer Vernooij, #891646)</p></li>
<li><p>Checkouts can now be into target directories that already have
a control directory (but no branch or working tree).
(Jelmer Vernooij, #913980)</p></li>
<li><p>Colocated branches can now have names including forward slashes, to
allow for namespaces. (Jelmer Vernooij, #907980)</p></li>
<li><p>New HPSS call for <code class="docutils literal notranslate"><span class="pre">BzrDir.get_branches</span></code>. (Jelmer Vernooij, #894460)</p></li>
<li><p>Checkouts of colocated branches are now always lightweight.
(Jelmer Vernooij, #918828)</p></li>
</ul>
</div>
<div class="section" id="id16">
<h3>Bug Fixes<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">branch</span></code> now fetches revisions when branching into an empty
control directory. (Jelmer Vernooij, #905594)</p></li>
<li><p>A sane default is provided for <code class="docutils literal notranslate"><span class="pre">ssl.ca_certs</span></code> which should points to the
Certificate Authority bundle for supported platforms.
(Vincent Ladeuil, #920455)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">branch</span></code> generates correct target branch locations again if not
specified. (Jelmer Vernooij, #919218)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">send</span></code> works on treeless branches again.
(Jelmer Vernooij, #921591)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">version</span></code> no longer throws a UnicodeDecodeError if the .bzr.log path
contains non-ascii characters. (Martin Packman, #312841)</p></li>
<li><p>Support scripts that don’t call bzrlib.initialize() but still call run_bzr().
(Vincent Ladeuil, #917733)</p></li>
<li><p>Test for equality instead of object identity where ROOT_PARENT is concerned.
(Wouter van Heyst, #881142)</p></li>
<li><p>urllib-based HTTPS client connections now verify the server certificate
validity as well as the hostname.
(Jelmer Vernooij, Vincent Ladeuil, #651161)</p></li>
</ul>
</div>
<div class="section" id="id17">
<h3>API Changes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config.config_dir</span></code> and related functions now always return paths as
unicode. (Martin Packman, #825826)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ControlDir</span></code> now has a new method <code class="docutils literal notranslate"><span class="pre">set_branch_reference</span></code> which can
be used for setting branch references. (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ControlDir.destroy_branch</span></code> now raises <code class="docutils literal notranslate"><span class="pre">NotBranchError</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">NoSuchFile</span></code> if the branch didn’t exist. (Jelmer Vernooij, #921693)</p></li>
</ul>
</div>
<div class="section" id="id18">
<h3>Internals<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A new matcher <code class="docutils literal notranslate"><span class="pre">RevisionHistoryMatches</span></code> has been added. (Jelmer Vernooij)</p></li>
<li><p>Add new module <code class="docutils literal notranslate"><span class="pre">bzrlib.url_policy_open</span></code>. (Jelmer Vernooij, #850843)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MutableTree</span></code> has two new hooks <code class="docutils literal notranslate"><span class="pre">pre_transform</span></code> and
<code class="docutils literal notranslate"><span class="pre">post_transform</span></code> that are called for tree transform operations.
(Jelmer Vernooij, #912084)</p></li>
</ul>
</div>
<div class="section" id="id19">
<h3>Testing<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Be more careful about closing open files for pypy interoperability.
(Wouter van Heyst)</p></li>
</ul>
</div>
</div>
<div class="section" id="bzr-2-5b5">
<h2>bzr 2.5b5<a class="headerlink" href="#bzr-2-5b5" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">2.5b5</dt>
<dd class="field-odd"><p>2012-01-12</p>
</dd>
</dl>
<p>This is the fifth (and last) beta of the 2.5 series, leading to a 2.5.0
release in February 2012. Beta releases are suitable for everyday use but
may cause some incompatibilities with plugins.</p>
<p>This release includes many improvements in the smart server, UI polish for
the colocated branches, enhancements to the config framework and more
internal uses, bug fixes related to unicode and locale support and more.</p>
<p>All bug fixed in previous series known at the time of this release are
included.</p>
<div class="section" id="id20">
<h3>External Compatibility Breaks<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The ‘.bzr/branch/email’ file is no longer read to determine the users’
identity. Instead, the ‘email’ setting in ‘.bzr/branch/branch.conf’
should be used. (Jelmer Vernooij, #903894)</p></li>
</ul>
</div>
<div class="section" id="id21">
<h3>New Features<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>“bzr mkdir” now includes -p (–parents) option for recursively adding
parent directories.
(Jared Hance, Jelmer Vernooij, #253529)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.Option</span></code> can now declare <code class="docutils literal notranslate"><span class="pre">override_from_env</span></code>, a list of
environment variables which, when set, that takes precedence over values
defined in configuration files. (Vincent Ladeuil, #907279)</p></li>
</ul>
</div>
<div class="section" id="id22">
<h3>Improvements<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>New HPSS call for <code class="docutils literal notranslate"><span class="pre">Repository.reconcile</span></code>. (Jelmer Vernooij, #894455)</p></li>
<li><p>Merge now has two new hooks <code class="docutils literal notranslate"><span class="pre">pre_merge</span></code> and <code class="docutils literal notranslate"><span class="pre">post_merge</span></code>
that are called before and after a merge and can make
additional modifications to the trees involved.
(Jelmer Vernooij, #906877)</p></li>
<li><p>Override the value returned by <code class="docutils literal notranslate"><span class="pre">sys.getfilesystemencoding()</span></code> for the bzr
script to utf-8 when it would otherwise be ascii on a posix system. This
will mean bzr works with non-ascii files when no locale or an incorrect
locale is set. (Martin Packman, #794353)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">branches</span></code> now indicates the active colocated branch.
(Jelmer Vernooij, #891667)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">push</span></code> now suggests using :parent if there is a parent location
set. (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">send</span></code> now only opens a single connection, rather than two,
to the target branch.  (Jelmer Vernooij)</p></li>
</ul>
</div>
<div class="section" id="id23">
<h3>Bug Fixes<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Allow configuration option default value to be a python callable at
registration. (Vincent Ladeuil, #832064)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">config</span></code> will now display the section <code class="docutils literal notranslate"><span class="pre">[DEFAULT]</span></code> used in
<code class="docutils literal notranslate"><span class="pre">bazaar.conf</span></code>. (Vincent Ladeuil, #907268)</p></li>
<li><p>Configuration stores can now provides a specific quoting mechanism. This
is required to workaround <code class="docutils literal notranslate"><span class="pre">configobj</span></code> conflating quoting and list values
automatic conversion. (Vincent Ladeuil, #906897)</p></li>
<li><p>Create obsolete_packs directory when repacking if it does not
exist. (Jonathan Riddell, Jelmer Vernooij, #314314)</p></li>
<li><p>Fallback to the slower <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">log</span></code> implementation when displaying a range
of revisions whose ancestry is not obviously on the same developement
line. (Vincent Ladeuil, #904744)</p></li>
<li><p>Make lazy imports resilient when resolved concurrently from multiple
threads. Now the stand-in object will behave as a proxy for the real object
after the initial access, rather than throwing. Assigning the object to
multiple names should still be avoided. (Martin von Gagern, #396819)</p></li>
<li><p>Not setting <code class="docutils literal notranslate"><span class="pre">gpg_signing_key</span></code> or setting it to <code class="docutils literal notranslate"><span class="pre">default</span></code> will use the
user email (obtained from the <code class="docutils literal notranslate"><span class="pre">email</span></code> configuration option or its
default value). (Vincent Ladeuil, Jelmer Vernooij, #904550)</p></li>
<li><p>Prevent spurious InconsistentDelta error when committing a move of a
non-ascii directory with contents. (Rory Yorke, #185211)</p></li>
<li><p>Properly ignore ‘n’ in an option reference since this cannot be part of a
config option identifier. (Vincent Ladeuil, #902125)</p></li>
<li><p>Make sure that the bzr probers are always registered when
bzrlib.workingtree is imported. (Jelmer Vernooij, #905218)</p></li>
<li><p>Report mistake trying to move a removed file with a non-ascii name without
UnicodeEncodeError being raised. (Martin Packman, #898541)</p></li>
<li><p>Safely unquote configuration values in weird edge cases (a section seen as
a dictionary which is not a supported use case for the configuration
stacks). (Vincent Ladeuil, #908050)</p></li>
<li><p>Stop altering <code class="docutils literal notranslate"><span class="pre">sys.platform</span></code> on OSX when initialising the locale.
(Martin Packman, #570495)</p></li>
<li><p>Uncommit no longer removes tags if they are part of the working
trees pending merges. (Jelmer Vernooij, #905462)</p></li>
</ul>
</div>
<div class="section" id="id24">
<h3>API Changes<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Config.signature_needed</span></code>, <code class="docutils literal notranslate"><span class="pre">Config.signing_policy</span></code>,
<code class="docutils literal notranslate"><span class="pre">Config.gpg_signing_key</span></code>, <code class="docutils literal notranslate"><span class="pre">Config.gpg_signing_command</span></code>,
<code class="docutils literal notranslate"><span class="pre">Config.checking_policy</span></code> and <code class="docutils literal notranslate"><span class="pre">Config.post_commit</span></code> are now deprecated.
(Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Repository.get_commit_builder</span></code> now takes a <code class="docutils literal notranslate"><span class="pre">config_stack</span></code>
rather than a <code class="docutils literal notranslate"><span class="pre">config</span></code> argument. (Jelmer Vernooij)</p></li>
<li><p>Scripts using bzrlib should now ensure setlocale is called on posix
platforms if they need a non-ascii user encoding. (Martin Packman)</p></li>
<li><p>Send formats now accept a new optional argument <code class="docutils literal notranslate"><span class="pre">submit_branch</span></code>,
which can be None or a Branch object for the submit branch location.
(Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VersionedFileRepository.add_revision</span></code> no longer takes a <code class="docutils literal notranslate"><span class="pre">config</span></code>
argument. (Jelmer Vernooij)</p></li>
</ul>
</div>
<div class="section" id="id25">
<h3>Internals<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add HPSS call for <code class="docutils literal notranslate"><span class="pre">Branch.get_checkout_format</span></code>. (Jelmer Vernooij, #894459)</p></li>
<li><p>Add HPSS call for <code class="docutils literal notranslate"><span class="pre">Repository.pack</span></code>. (Jelmer Vernooij, #894461)</p></li>
<li><p>Add HPSS calls for <code class="docutils literal notranslate"><span class="pre">Repository.iter_files_bytes</span></code>, speeding up
several commands including <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">export</span></code> and <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">co</span> <span class="pre">--lightweight</span></code>.
(Jelmer Vernooij, #608640)</p></li>
<li><p>All bzr control directories, branch formats, repository formats and
working tree formats now support feature flags, which are
serialized in their respective format files. See
<code class="docutils literal notranslate"><span class="pre">doc/developers/feature-flags.txt</span></code> for details.
(Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzrlib.urlutils</span></code> now includes <code class="docutils literal notranslate"><span class="pre">quote</span></code> and <code class="docutils literal notranslate"><span class="pre">unquote</span></code> functions,
rather than importing them from <code class="docutils literal notranslate"><span class="pre">urllib</span></code>. This prevents loading
of the <code class="docutils literal notranslate"><span class="pre">socket</span></code>, <code class="docutils literal notranslate"><span class="pre">ssl</span></code> and <code class="docutils literal notranslate"><span class="pre">urllib</span></code> modules for
local bzr operations. (Jelmer Vernooij)</p></li>
<li><p>Configuration options can be SI units by using <code class="docutils literal notranslate"><span class="pre">int_SI_from_unicode</span></code> as
their <code class="docutils literal notranslate"><span class="pre">convert_from_unicode</span></code> helper. (Vincent Ladeuil)</p></li>
<li><p>Configuration stacks can now use <code class="docutils literal notranslate"><span class="pre">StartingPathMatcher</span></code> to select the
sections matching a location while respecting the order chosen by the user
in the configuration file: from generic sections to specific
sections. (Vincent Ladeuil, #832046).</p></li>
<li><p>Configuration stores can now save incremental changes by using
<code class="docutils literal notranslate"><span class="pre">save_changes()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">save()</span></code>. This reduces the number or
required input/outputs and allows stores to be shared between
stacks. (Vincent Ladeuil)</p></li>
<li><p>ControlDir now has a get_branches method that returns a dictionary
whose keys are the names of the branches and whose values are the
branches themselves. The active branch uses the key None.
(Neil Martinsen-Burrell)</p></li>
<li><p>Helper <code class="docutils literal notranslate"><span class="pre">osutils.path_from_environ</span></code> added for extracting a unicode path
from an environment variable. (Martin Packman, #832028)</p></li>
<li><p>Helper <code class="docutils literal notranslate"><span class="pre">win32utils.get_environ_unicode</span></code> added for avoiding encoding
problems with <code class="docutils literal notranslate"><span class="pre">os.environ.get</span></code> use. (Martin Packman, #262874)</p></li>
<li><p>Lazy imports can now only be absolute. (Jelmer Vernooij)</p></li>
<li><p>Merge3Mergers now have an optional <code class="docutils literal notranslate"><span class="pre">other_branch</span></code> argument
which contains the branch from which the <code class="docutils literal notranslate"><span class="pre">other_tree</span></code>
was obtained, if any. (Jelmer Vernooij)</p></li>
<li><p>MutableTree now has a hook <code class="docutils literal notranslate"><span class="pre">post_build_tree</span></code> which is called after
a new mutable tree has been created. (Jelmer Vernooij, #912765)</p></li>
<li><p>New HPSS call <code class="docutils literal notranslate"><span class="pre">BzrDir.checkout_metadir</span></code>. (Jelmer Vernooij, #894459)</p></li>
<li><p>New HPSS call <code class="docutils literal notranslate"><span class="pre">VersionedFileRepository.get_inventories</span></code>,
speeding up various commands including <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">export</span></code>,
<code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">checkout</span></code> and <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">cat</span></code>. (Jelmer Vernooij, #608640)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ConfigCommandLineStore</span></code> is now supported by <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">config</span></code> and is
seen as single no-name section of configuration options. (Vincent Ladeuil)</p></li>
</ul>
</div>
<div class="section" id="id26">
<h3>Testing<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>New matcher <code class="docutils literal notranslate"><span class="pre">ContainsNoVfsCalls</span></code> which filters a list of HPSS
calls for VFS requests. (Jelmer Vernooij)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">MemoryStack</span></code> class allows for diskless tests and locally injected
configuration stacks.  Lower level tests for predefined set of options can
be written without setting up configuration files. (Vincent Ladeuil)</p></li>
</ul>
</div>
</div>
<div class="section" id="bzr-2-5b4">
<h2>bzr 2.5b4<a class="headerlink" href="#bzr-2-5b4" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">2.5b4</dt>
<dd class="field-odd"><p>2011-12-08</p>
</dd>
</dl>
<p>This is the fourth beta of the 2.5 series, leading to a 2.5.0 release in
February 2012. Beta releases are suitable for everyday use but may cause
some incompatibilities with plugins.</p>
<p>This release includes many improvements in the smart server, UI polish for
the colocated branches, optimizations for revision specifiers to avoid
history sized operations, enhancements to the config framework, bug fixes
related to unicode paths and more.</p>
<p>All bug fixed in previous series known at the time of this release are
included.</p>
<div class="section" id="id27">
<h3>External Compatibility Breaks<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id28">
<h3>New Features<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Provides a <code class="docutils literal notranslate"><span class="pre">po_merge</span></code> plugin to automatically merge <code class="docutils literal notranslate"><span class="pre">.po</span></code> files with
<code class="docutils literal notranslate"><span class="pre">msgmerge</span></code>. See <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">help</span> <span class="pre">po_merge</span></code> for details.
(Vincent Ladeuil, #884270)</p></li>
</ul>
</div>
<div class="section" id="id29">
<h3>Improvements<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">branch</span> <span class="pre">--stacked</span></code> now only makes a single connection to the remote
server rather than three. (Jelmer Vernooij, #444293)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">export</span> <span class="pre">--uncommitted</span></code> will export the uncommitted tree.
(Jelmer Vernooij, #555613)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">rmbranch</span></code> can now remove colocated branches.
(Jelmer Vernooij, #831464)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">status</span></code> no longer shows shelves if files are specified.
(Francis Devereux)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">switch</span></code> now accepts colocated branch names to switch to.
(Jelmer Vernooij, #826814)</p></li>
<li><p>Plugins can now register additional “location aliases”.
(Jelmer Vernooij)</p></li>
<li><p>Revision specifiers will now only browse as much history as they
need to, rather than grabbing the whole history unnecessarily in some
cases. (Jelmer Vernooij)</p></li>
<li><p>When using <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">switch</span></code> to switch to a sibling of the current
branch, the relative branch name should no longer be url-encoded.
(Jelmer Vernooij)</p></li>
</ul>
</div>
<div class="section" id="id30">
<h3>Bug Fixes<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A new section local option <code class="docutils literal notranslate"><span class="pre">basename</span></code> is available to help support some
<code class="docutils literal notranslate"><span class="pre">bzr-pipeline</span></code> workflows and more generally help mapping local paths to
remote ones. See <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">help</span> <span class="pre">configuration</span></code> for more details.
(Vincent Ladeuil, #843211)</p></li>
<li><p>Add HPSS call for looking up revision numbers from revision ids on
remote repositories. (Jelmer Vernooij, #640253)</p></li>
<li><p>Add HPSS call for retrieving file contents from remote repositories.
Should improve performance for lightweight checkouts and exports of
from remote repositories.  (Jelmer Vernooij, #368717, #762330, #608640)</p></li>
<li><p>Allow lazy compiled patterns from <code class="docutils literal notranslate"><span class="pre">bzrlib.lazy_regex</span></code> to be
pickled. (Jelmer Vernooij, #893149)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">info</span></code> no longer shows empty output if only a control
directory is present. (Jelmer Vernooij, #159098)</p></li>
<li><p>Cope with missing revision ids being specified to
<code class="docutils literal notranslate"><span class="pre">Repository.gather_stats</span></code> HPSS call. (Jelmer Vernooij, #411290)</p></li>
<li><p>Fix test failures on windows related to locations.conf handling.
(Vincent Ladeuil, #892992)</p></li>
<li><p>Fixed parsing of the timestamp given to <code class="docutils literal notranslate"><span class="pre">commit</span> <span class="pre">--commit-time</span></code>. Now
prohibits several invalid strings, reads the correct number of seconds,
and gives a better error message if the time zone offset is not given.
(Matt Giuca, #892657)</p></li>
<li><p>Give meaningful file/line references when reporting deprecation warnings
for _CompatabilityThunkFeature based test features.
(Vincent Ladeuil, #897718)</p></li>
<li><p>Make reporting of mistakes involving unversioned files with non-ascii
filenames work again without ‘Unprintable exception’ being shown.
(Martin Packman, #898408)</p></li>
<li><p>Provide names for lazily registered hooks.
(Neil Martinsen-Burrell, #894609)</p></li>
<li><p>Raise BadIndexKey exception in btree_index when a key is too large, fixing
an infinite recursion issue. (Shannon Weyrick, #720853)</p></li>
<li><p>Resolve regression from colocated branch path handling, by ensuring that
unreserved characters are unquoted in URLs. (Martin Packman, #842223)</p></li>
<li><p>Split segments from URLs for colocated branches without assuming the
combined form is valid. (Martin Packman, #842233)</p></li>
<li><p>Support looking up revision numbers by revision id in empty branches.
(Jelmer Vernooij, #535031)</p></li>
<li><p>Support verifying signatures on remote repositories.
(Jelmer Vernooij, #889694)</p></li>
<li><p>Teach the bzr client how to reconnect if we get <code class="docutils literal notranslate"><span class="pre">ConnectionReset</span></code>
while making an RPC request. This doesn’t handle all possible network
disconnects, but it should at least handle when the server is asked to
shutdown gracefully. (John Arbash Meinel, #819604)</p></li>
<li><p>When a remote format is unknown, bzr will now print a single-line error
message rather than a backtrace. (Jelmer Vernooij, #687226)</p></li>
</ul>
</div>
<div class="section" id="id31">
<h3>API Changes<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BzrDir.open_branch</span></code> and <code class="docutils literal notranslate"><span class="pre">BranchFormat.open</span></code> now take an optional
<code class="docutils literal notranslate"><span class="pre">possible_transports</span></code> argument. (Jelmer Vernooij)</p></li>
<li><p>New method <code class="docutils literal notranslate"><span class="pre">Transport.set_segment_parameter</span></code>.  (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Repository.verify_revision</span></code> has been renamed to
<code class="docutils literal notranslate"><span class="pre">Repository.verify_revision_signature</span></code>. (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RevisionSpec.wants_revision_history</span></code> now defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code> and
is deprecated. The <code class="docutils literal notranslate"><span class="pre">revs</span></code> argument of
<code class="docutils literal notranslate"><span class="pre">RevisionInfo.from_revision_id</span></code> is now deprecated. (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tree.get_file_by_path</span></code> is now deprecated. Use <code class="docutils literal notranslate"><span class="pre">Tree.get_file</span></code> instead.
(Jelmer Vernooij, #666897)</p></li>
<li><p>Some global options for use with commands have been removed, construct
an <code class="docutils literal notranslate"><span class="pre">Option</span></code> with the name instead. (Martin Packman)</p></li>
<li><p>The unused exception <code class="docutils literal notranslate"><span class="pre">HistoryMissing</span></code> has been removed.
(Jelmer Vernooij)</p></li>
</ul>
</div>
<div class="section" id="id32">
<h3>Internals<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add HPSS call for <code class="docutils literal notranslate"><span class="pre">Repository.pack</span></code>. (Jelmer Vernooij, #894461)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">config</span></code> uses the new configuration implementation.
(Vincent Ladeuil)</p></li>
<li><p>Custom HPSS error handlers can now be installed in the smart server client
using the <code class="docutils literal notranslate"><span class="pre">error_translators</span></code> and <code class="docutils literal notranslate"><span class="pre">no_context_error_translators</span></code>
registries. (Jelmer Vernooij)</p></li>
<li><p>New HPSS calls <code class="docutils literal notranslate"><span class="pre">Repository.has_signature_for_revision_id</span></code>,
<code class="docutils literal notranslate"><span class="pre">Repository.make_working_trees</span></code>, <code class="docutils literal notranslate"><span class="pre">BzrDir.destroy_repository</span></code>,
<code class="docutils literal notranslate"><span class="pre">BzrDir.has_workingtree</span></code>, <code class="docutils literal notranslate"><span class="pre">Repository.get_physical_lock_status</span></code>,
<code class="docutils literal notranslate"><span class="pre">Branch.get_physical_lock_status</span></code>,
<code class="docutils literal notranslate"><span class="pre">Branch.put_config_file</span></code>, <code class="docutils literal notranslate"><span class="pre">Branch.break_lock</span></code>,
<code class="docutils literal notranslate"><span class="pre">BzrDir.destroy_branch</span></code>, <code class="docutils literal notranslate"><span class="pre">Repository.break_lock</span></code>,
<code class="docutils literal notranslate"><span class="pre">VersionedFileRepository.get_serializer_format</span></code>,
<code class="docutils literal notranslate"><span class="pre">Repository.all_revision_ids</span></code>, <code class="docutils literal notranslate"><span class="pre">Repository.start_write_group</span></code>,
<code class="docutils literal notranslate"><span class="pre">Repository.commit_write_group</span></code>, <code class="docutils literal notranslate"><span class="pre">Repository.abort_write_group</span></code>
<code class="docutils literal notranslate"><span class="pre">Repository.check_write_group</span></code>, <code class="docutils literal notranslate"><span class="pre">Repository.iter_revisions</span></code>,
<code class="docutils literal notranslate"><span class="pre">Repository.add_signature_revision_text</span></code> and
<code class="docutils literal notranslate"><span class="pre">Repository.get_revision_signature_text</span></code>.
(Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RemoteBranch.get_config_stack</span></code> and <code class="docutils literal notranslate"><span class="pre">RemoteBzrDir.get_config_stack</span></code>
will now use HPSS calls where possible. (Jelmer Vernooij)</p></li>
<li><p>The registry of merge types has been moved to <code class="docutils literal notranslate"><span class="pre">merge</span></code> from <code class="docutils literal notranslate"><span class="pre">option</span></code> but
<code class="docutils literal notranslate"><span class="pre">merge.get_merge_type_registry</span></code> remains as an accessor. (Martin Packman)</p></li>
</ul>
</div>
<div class="section" id="id33">
<h3>Testing<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Avoid failures in test_transform when OS error messages are localised.
(Martin Packman, #891582)</p></li>
<li><p>Tests are now subject to a time limit: by default 300s, and 120s when
run from ‘make check’, controlled by the <cite>selftest.timeout</cite>
configuration option.  This is currently not supported on Windows.
(Martin Pool)</p></li>
</ul>
</div>
</div>
<div class="section" id="bzr-2-5b3">
<h2>bzr 2.5b3<a class="headerlink" href="#bzr-2-5b3" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">2.5b3</dt>
<dd class="field-odd"><p>2011-11-10</p>
</dd>
</dl>
<p>This is the third beta of the 2.5 series, leading to a 2.5.0 release in
February 2012. Beta releases are suitable for everyday use but may cause
some incompatibilities with plugins.</p>
<p>This release includes log options for <code class="docutils literal notranslate"><span class="pre">push</span></code> and <code class="docutils literal notranslate"><span class="pre">pull</span></code>, more UI polish
for colocated branches, a better and more coherent implementation for UI
dialogs, enhancements to the config framework and more.</p>
<p>This release includes all bug fixed in previous series known at the time of
this release.</p>
<div class="section" id="id34">
<h3>External Compatibility Breaks<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<p>None</p>
</div>
<div class="section" id="id35">
<h3>New Features<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">log_format</span></code> configuration can be used with <code class="docutils literal notranslate"><span class="pre">-Olog_format=line</span></code> to
change the format <code class="docutils literal notranslate"><span class="pre">push</span></code> and <code class="docutils literal notranslate"><span class="pre">pull</span></code> use to display the
revisions. I.e.: <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">pull</span> <span class="pre">-v</span> <span class="pre">-Olog_format=short</span></code> will use the <code class="docutils literal notranslate"><span class="pre">short</span></code>
format instead of the default <code class="docutils literal notranslate"><span class="pre">long</span></code> one. (Vincent Ladeuil, #861472)</p></li>
<li><p>The new config scheme allows an alternative syntax for the ‘appenpath’
policy relying on option expansion and defining a new ‘relpath’ option
local to a section. Instead of using ‘&lt;option&gt;:policy=appendpath’, the
option value can de defined as ‘option=xxxx/{relpath}’.
(Vincent Ladeuil, #832013)</p></li>
</ul>
</div>
<div class="section" id="id36">
<h3>Improvements<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">info</span> <span class="pre">-v</span></code> now shows the number of colocated branches
for control directories that support them.
(Jelmer Vernooij, #863285)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">version-info</span></code> now takes a <code class="docutils literal notranslate"><span class="pre">--revision</span></code> argument.
(Jelmer Vernooij, #238705)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">revno</span></code> now takes a <code class="docutils literal notranslate"><span class="pre">--revision</span></code> argument.
(Jelmer Vernooij, #870649)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">serve</span></code> now can serve from URLs rather than just from the
file system. I.e.: <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">serve</span> <span class="pre">-d</span> <span class="pre">lp:bzr</span></code> or
<code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">serve</span> <span class="pre">-d</span> <span class="pre">file:///data/bzr</span></code> (Jelmer Vernooij)</p></li>
<li><p>all input prompts are now char-based when possible, and can be forced to
line-based mode by setting the <code class="docutils literal notranslate"><span class="pre">BZR_TEXTUI_INPUT</span></code> environment variable
to ‘line-based’. This replace the previous shelf UI only patch using
<code class="docutils literal notranslate"><span class="pre">INSIDE_EMACS</span></code>. (Benoît Pierre)</p></li>
</ul>
</div>
<div class="section" id="id37">
<h3>Bug Fixes<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">info</span></code> now shows the master branch location too for
treeless local branches. (Jelmer Vernooij, #258355)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">mkdir</span> <span class="pre">--quiet</span></code> now does not print a line for every created
directory. (Martin von Gagern, #869915)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">mv</span></code> does not crash when attempting to move the root of a
branch. (Jonathan Riddell, #809728)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">shelve</span></code> now use <code class="docutils literal notranslate"><span class="pre">UIFactory.choose</span></code> for input handling, making
it usable when creating a custom <code class="docutils literal notranslate"><span class="pre">UIFactory</span></code> implementation. (Benoît
Pierre)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">clean-tree</span></code> now use <code class="docutils literal notranslate"><span class="pre">UIFactory.get_boolean</span></code> for confirmation
prompt, making it usable when using a custom <code class="docutils literal notranslate"><span class="pre">UIFactory</span></code>
implementation. (Benoît Pierre)</p></li>
<li><p>If sending a crash through Apport fails report the Apport failure to
bzr.log rather than stderr. (Jonathan Riddell, #766735)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">upgrade</span></code> no longer treats ‘already up-to-date’ exceptions as
errors. (Benoît Pierre, #716560).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">version-info</span></code> no longer populates the clean state for custom
templates unless {clean} is explicitly asked for.
(Lawrence Mitchell, #882541)</p></li>
<li><p>Fix finding the CPU count when using Python &gt;= 2.6 on BSD-based systems.
(Jelmer Vernooij, #887151)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WorkingTree.clone()</span></code> now supports its <code class="docutils literal notranslate"><span class="pre">revision_id</span></code> being set
to the null revision. (Jelmer Vernooij, #876423)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WorkingTree.pull</span></code> can now pull <code class="docutils literal notranslate"><span class="pre">NULL_REVISION</span></code>.
(Jelmer Vernooij, #887556)</p></li>
</ul>
</div>
<div class="section" id="id38">
<h3>API Changes<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Branch.revision_history</span></code> is now deprecated. (Jelmer Vernooij, #799519)</p></li>
<li><p>Methods <code class="docutils literal notranslate"><span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">items</span></code> of <code class="docutils literal notranslate"><span class="pre">LRUCache</span></code> and <code class="docutils literal notranslate"><span class="pre">LRUSizeCache</span></code> are
deprecated. Use normal dict-style access instead. (Martin Packman)</p></li>
<li><p>New flag <code class="docutils literal notranslate"><span class="pre">RepositoryFormat.supports_unreferenced_revisions</span></code> which
indicates whether revisions can be present in a repository without
being referenced from e.g. a branch history at the same time.
(Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UIFactory.choose</span></code> has been added: prompt the user for a list of
choices. (Benoît Pierre)</p></li>
</ul>
</div>
<div class="section" id="id39">
<h3>Internals<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ControlDirFormat</span></code> now has a new method <code class="docutils literal notranslate"><span class="pre">supports_transport</span></code>
which format implementations can use whether or not they can access
a control dir over a particular transport. (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BranchBuilder.build_commit</span></code> now take <code class="docutils literal notranslate"><span class="pre">parent_ids</span></code> and
<code class="docutils literal notranslate"><span class="pre">allow_leftmost_as_ghost</span></code> arguments.  (Jelmer Vernooij)</p></li>
</ul>
</div>
<div class="section" id="id40">
<h3>Testing<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Ensure TestCase instances are deallocated immediately after running where
possible. This greatly reduces the peak resource needs of a full test suite
run. The new <code class="docutils literal notranslate"><span class="pre">-Euncollected_cases</span></code> selftest flag will add failures if any
case which persists pasts its expected lifetime. (Martin Packman, #613247)</p></li>
<li><p>Report exceptions from child processes during fork instead of swallowing the
error and reporting that everything went okay. (Martin Packman, #804130)</p></li>
</ul>
</div>
</div>
<div class="section" id="bzr-2-5b2">
<h2>bzr 2.5b2<a class="headerlink" href="#bzr-2-5b2" title="Permalink to this headline">¶</a></h2>
<p>This is the second beta of the 2.5 series, leading to a 2.5.0 release in
February 2012. Beta releases are suitable for everyday use but may cause some
incompatibilities with plugins.</p>
<p>This release includes more filtering options for <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">log</span></code>, idle
connections handling for <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">serve</span></code>, a <code class="docutils literal notranslate"><span class="pre">development-colo</span></code> experimental
format to flesh out the colocated branches UI, better support for foreign
formats, enhancements to the config framework and more.</p>
<p>This release includes all bug fixed in previous series known at the time of
this release.</p>
<dl class="field-list simple">
<dt class="field-odd">2.5b2</dt>
<dd class="field-odd"><p>2011-10-06</p>
</dd>
</dl>
<div class="section" id="id41">
<h3>External Compatibility Breaks<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<p>None</p>
</div>
<div class="section" id="id42">
<h3>New Features<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A new <code class="docutils literal notranslate"><span class="pre">-O</span></code> standard option (common to all commands) have been added. It
provides a value for a config option in the <code class="docutils literal notranslate"><span class="pre">-Oname=value</span></code> form that
takes precedence over all definitions found in config files.  It can be
used multiple times to override different options.
(Vincent Ladeuil, #491196)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">log</span></code> now has an option called <code class="docutils literal notranslate"><span class="pre">--omit-merges</span></code> to omit
those commits that merged branches, i.e. those having more than one
parent.
In order to avoid confusion, the previous command line option
<code class="docutils literal notranslate"><span class="pre">--include-merges</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">--include-merged</span></code>.
The old name of the command line option will still be accepted.
The name change also affects <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">missing</span></code>.
(Martin von Gagern)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">serve</span></code> will now disconnect clients if they have not issued an RPC
request after 5minutes. On POSIX platforms, this will also happen for
<code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">serve</span> <span class="pre">--inet</span></code>. This can be overridden with the configuration
variable <code class="docutils literal notranslate"><span class="pre">serve.client_timeout</span></code> or in the command line parameter
<code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">serve</span> <span class="pre">--client-timeout=X</span></code>. Further, it is possible to request
<code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">serve</span> <span class="pre">[--inet]</span></code> to shutdown gracefully by sending SIGHUP. It will
finish the current request, and then close the connection.
(John Arbash Meinel, #824797, #795025)</p></li>
<li><p>The new experimental format <code class="docutils literal notranslate"><span class="pre">development-colo</span></code> supports colocated
branches. This format will eventually be merged back into the <code class="docutils literal notranslate"><span class="pre">2a</span></code>
format when it has stabilized and there is adequate UI support for
colocated branches.
(Jelmer Vernooij, #831481)</p></li>
</ul>
</div>
<div class="section" id="id43">
<h3>Improvements<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug where <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">tags</span> <span class="pre">-r</span> <span class="pre">x..y</span></code> loaded the branch history once for
every revision in the range; it’s now much faster. (Vincent Ladeuil, #857335)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">info</span> <span class="pre">-v</span></code> can now be run against branches that don’t support
<code class="docutils literal notranslate"><span class="pre">last_revision_info</span></code>, in which case the branch information will simply
not be displayed. (Jelmer Vernooij)</p></li>
</ul>
</div>
<div class="section" id="id44">
<h3>Bug Fixes<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">shelve</span></code> can now be used in emacs shells as the input handling is
turned into a line-based one when <code class="docutils literal notranslate"><span class="pre">INSIDE_EMACS</span></code> is set (which is the
case for all recent emacs versions). (Vincent Ladeuil, #856261)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">tags</span></code> can now be used against remote repositories that do
not provide access to the revision graph. (Jelmer Vernooij, #858942)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">update</span> <span class="pre">PATH</span></code> will stop if you seem to be asking it to update
anything less than a whole tree, because that’s not supported by <code class="docutils literal notranslate"><span class="pre">bzr</span></code>’s
concept that the whole tree has a single basis revision.  Previously, it
would go ahead and update the whole tree, which was surprising.
(Martin Pool, #557886)</p></li>
<li><p>Don’t crash if <code class="docutils literal notranslate"><span class="pre">bzrlib.initialize()</span></code> has not been called while accessing
configs.  (Vincent Ladeuil, #863401)</p></li>
<li><p>Redirects between http and https no longer discard path information
in some cases. (Jelmer Vernooij, #853765)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--overwrite</span></code> argument to <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">push</span></code> and <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">pull</span></code> no longer
reports all tags as changed. (Jelmer Vernooij, #845396)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WorkingTree.get_file_mtime</span></code> now raises NoSuchId if a file id is
specified that is unknown. (Jelmer Vernooij, #847435)</p></li>
</ul>
</div>
<div class="section" id="id45">
<h3>API Changes<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Branch.get_revision_delta</span></code> has been deprecated. Use
<code class="docutils literal notranslate"><span class="pre">Repository.get_revision_delta</span></code> instead. (Jelmer Vernooij, #859712)</p></li>
<li><p>Plugins that implement custom protocols for <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">serve</span></code> should now
also take an argument <code class="docutils literal notranslate"><span class="pre">timeout</span></code>. This is used by the the bzr protocol
to close a connection if a client has been idle for more than X seconds.
(Default 5minutes). (John Arbash Meinel)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Repository.fileids_altered_by_revision_ids</span></code> has been moved to
<code class="docutils literal notranslate"><span class="pre">VersionedFileRepository</span></code> and is no longer part of the standard
<code class="docutils literal notranslate"><span class="pre">Repository</span></code> interface. (Jelmer Vernooij)</p></li>
<li><p>The argument <code class="docutils literal notranslate"><span class="pre">include_merges</span></code> to <code class="docutils literal notranslate"><span class="pre">missing.find_unmerged</span></code> has
been renamed to <code class="docutils literal notranslate"><span class="pre">include_merged</span></code>. The old name is still supported
for now but will cause a deprecation warning. (Martin von Gagern)</p></li>
<li><p>The new method <code class="docutils literal notranslate"><span class="pre">ControlDirFormat.is_initializable()</span></code> returns a boolean
indicating whether or not it is possible to use any of the
initialization methods of that format to create a new control dir.
(Jelmer Vernooij)</p></li>
</ul>
</div>
<div class="section" id="id46">
<h3>Internals<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Branch</span></code> objects can now use a config stack with the newly introduced
<code class="docutils literal notranslate"><span class="pre">get_config_stack()</span></code>. Both <code class="docutils literal notranslate"><span class="pre">get_config</span></code> and <code class="docutils literal notranslate"><span class="pre">get_config_stack</span></code> can
be used for the same branch but it’s recommended to stick to one for a
given option.</p></li>
</ul>
</div>
<div class="section" id="id47">
<h3>Testing<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Test scripts can now use <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">shelve</span></code> and provide their input as
complete lines. (Vincent Ladeuil, #856261)</p></li>
<li><p>Really corrupt the pack file without depending on a special length or value.
(Vincent Ladeuil, #807032)</p></li>
</ul>
</div>
</div>
<div class="section" id="bzr-2-5b1">
<h2>bzr 2.5b1<a class="headerlink" href="#bzr-2-5b1" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">2.5b1</dt>
<dd class="field-odd"><p>2011-09-15</p>
</dd>
</dl>
<p>This is the first beta of the 2.5 series, leading up to a 2.5.0
release in February 2012.</p>
<p>This release includes better support for gpg signing, better support for
i18n (mostly command help and error messages), more options to filter <code class="docutils literal notranslate"><span class="pre">bzr</span>
<span class="pre">log</span></code> output, more support for colocated branches (“location,branch=XXX”
syntax), better feedback on updated tags for various commands, faster
branching into an empty repository, enhancements to the config framework and
more.</p>
<p>Beta releases are suitable for everyday use but may cause some
incompatibilities with plugins.  Some plugins may need small updates to work
with 2.5b1.</p>
<div class="section" id="id48">
<h3>External Compatibility Breaks<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<p>None</p>
</div>
<div class="section" id="id49">
<h3>New Features<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>A <code class="docutils literal notranslate"><span class="pre">from_unicode</span></code> parameter can be specified when registering a config
option. This implements boolean, integer and list config options when the
provided <code class="docutils literal notranslate"><span class="pre">bool_from_store</span></code>, <code class="docutils literal notranslate"><span class="pre">int_from_store</span></code> and <code class="docutils literal notranslate"><span class="pre">list_from_store</span></code>
are used for this parameter.  (Vincent Ladeuil)</p></li>
<li><p>Accessing a packaging branch on Launchpad (eg, <code class="docutils literal notranslate"><span class="pre">lp:ubuntu/bzr</span></code>) now
checks to see if the most recent published source package version for
that project is present in the branch tags. This should help developers
trust whether the packaging branch is up-to-date and can be used for new
changes. The level of verbosity is controlled by the config item
<code class="docutils literal notranslate"><span class="pre">launchpad.packaging_verbosity</span></code>. It can be set to one of</p>
<dl class="simple">
<dt>off</dt><dd><p>disable all checks</p>
</dd>
<dt>minimal</dt><dd><p>only display if the branch is out-of-date</p>
</dd>
<dt>short</dt><dd><p>also display single-line up-to-date and missing,</p>
</dd>
<dt>all</dt><dd><p>(default) display multi-line content for all states</p>
</dd>
</dl>
<p>(John Arbash Meinel, #609187, #812928)</p>
</li>
<li><p>Add a config option gpg_signing_key for setting which GPG key should
be used to sign commits. Also default to using the gpg user identity
which matches user_email() as set by whoami.
(Jonathan Riddell, #68501)</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">invalid</span></code> parameter can be specified when registering a config option
to decide what should be done when invalid values are
encountered. ‘warning’ and ‘error’ will respectively emit a warning and
ignore the value or errors out. (Vincent Ladeuil)</p></li>
<li><p>bzr add now skips large files in recursive mode. The default “large”
size is 20MB, and is configurable via the add.maximum_file_size
option. A value of 0 disables skipping. Named items passed to add are
never skipped. (Shannon Weyrick, #54624)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">help</span> <span class="pre">configuration/&lt;option&gt;</span></code> display the help for <code class="docutils literal notranslate"><span class="pre">option</span></code> for
all registered configuration options. (Vincent Ladeuil, #747050)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">log</span> <span class="pre">-m</span></code> now matches message, author, committer and bugs instead
of just matching the message.  <code class="docutils literal notranslate"><span class="pre">--message</span></code> keeps its original meaning,
while <code class="docutils literal notranslate"><span class="pre">--match-message,</span> <span class="pre">--match-author,</span> <span class="pre">--match-committer</span></code> and
<code class="docutils literal notranslate"><span class="pre">--match-bugs</span></code> match each of those fields. (Jacek Sieka)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.Option</span></code> can now declare <code class="docutils literal notranslate"><span class="pre">default_from_env</span></code>, a list of
environment variables to get a default value from. (Vincent Ladeuil)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.NameMatcher</span></code> can be used to implement config stores and stacks
that need to provide specific option values for arbitrary unique IDs (svn
repository UUIDs, etc).  (Vincent Ladeuil, #843638)</p></li>
<li><p>New builtin <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">branches</span></code> command, which lists all colocated branches
in a directory. (Jelmer Vernooij, #826820)</p></li>
<li><p>Relative local paths can now be specified in URL syntax by using the
“file:” prefix.  (Jelmer Vernooij)</p></li>
<li><p>Report commits signed with expired keys in <code class="docutils literal notranslate"><span class="pre">verify-signatures</span></code>.
(Jonathan Riddell, #804254)</p></li>
<li><p>Translations are now enabled for command help, errors and globally
for any message using <code class="docutils literal notranslate"><span class="pre">gettext</span></code> given on output.  (Jonathan Riddell,
INADA Naoki, #83941)</p></li>
</ul>
</div>
<div class="section" id="id50">
<h3>Improvements<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">add</span></code> will now warn about nested subtrees that are skipped.
(Jelmer Vernooij, #187342)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">commit</span> <span class="pre">-m</span> <span class="pre">''</span></code> can now be used to force an empty commit message.
Entering an empty commit message in the message editor still triggers
an error. (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">pull</span></code> will now mention how many tags it has updated.
(Jelmer Vernooij, #164450)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">tag</span></code> no longer errors if a tag already exists but refers to the
same revision, and will mention when a tag has been updated
rather than created. (Jelmer Vernooij, #381203)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">uncommit</span></code> will now remove tags that refer to removed revisions.
The <code class="docutils literal notranslate"><span class="pre">--keep-tags</span></code> option can be used to prevent this behaviour.
(Jelmer Vernooij, #605814)</p></li>
<li><p>Do not run i18n initialisation twice. (Jonathan Riddell)</p></li>
<li><p>Install translation .mo files. (Jonathan Riddell)</p></li>
<li><p>Locations printed by <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">upgrade</span></code> are now formatted before display.
(Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Repository.get_parent_map</span></code> now estimates the size of the returned
content more accurately. This means that we get closer to the desired
64kB/request. For repositories converted from svn, this can be an
improvement of approx 5:1 in round trips to discover the whole history.
(John Arbash Meinel)</p></li>
<li><p>Support a <code class="docutils literal notranslate"><span class="pre">bugtracker</span></code> option which is used by <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">commit</span> <span class="pre">--fixes</span></code>
if no bug tracker was specified on the command line.
(Jelmer Vernooij, #334860)</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">gettext.NullTranslations</span></code> in i18n to allow use of i18n even when
translations are not turned on. (Jonathan Riddell)</p></li>
</ul>
</div>
<div class="section" id="id51">
<h3>Bug Fixes<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">commit</span></code> now correctly reports missing files as “removed”, not
“modified”. (Jelmer Vernooij, #553955)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">reconfigure</span></code> will now allow multiple non-conflicting requests
in a single invocation, e.g. <code class="docutils literal notranslate"><span class="pre">--branch</span></code> and <code class="docutils literal notranslate"><span class="pre">--use-shared</span></code>.
(Martin von Gagern, #842993)</p></li>
<li><p>A call to CHKInventory’s filter-method will not result in a
DuplicateFileId error, if you move a subfolder and change a file in
that subfolder.
(Bastian Bowe, #809901)</p></li>
<li><p>Branching from a stacked branch no longer does a <code class="docutils literal notranslate"><span class="pre">get_parent_map</span></code>
request for each revisions that is in the stacked-on repository while
determining what revisions need to be fetched. This mostly impacts
branching initialy into an empty shared repository when the source is
not the development focus.  (John Arbash Meinel, #388269)</p></li>
<li><p>Decode <code class="docutils literal notranslate"><span class="pre">BZR_HOME</span></code> with fs encoding on posix platforms to avoid unicode
errors.  (Vincent Ladeuil, #822571)</p></li>
<li><p>Fix fallout from URL handling changes in 2.5 that caused an IndexError to be
raised whenever a transport at the drive root was opened on windows.
(Martin [gz], #841322)</p></li>
<li><p>Fixed loading of external merge tools from config to properly decode
command-lines which contain embedded quotes. (Gordon Tyler, #828803)</p></li>
<li><p>Rather than an error being raised, a warning is now printed when the
current user does not have permission to read a configuration file.
(Jelmer Vernooij, #837324)</p></li>
<li><p>The pull command will now always use separate connections for the
case where the destination is a heavyweight checkout of some remote
branch on the same host as the source branch.
(Martin von Gagern, #483661)</p></li>
<li><p>TreeTransformBase.fixup_new_roots no longer forces trees to have a root, so
operations that use it, like merge, can now create trees without a root.
(Aaron Bentley)</p></li>
</ul>
</div>
<div class="section" id="id52">
<h3>Documentation<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Release instructions refreshed. (Vincent Ladeuil)</p></li>
</ul>
</div>
<div class="section" id="id53">
<h3>API Changes<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BranchFormat.initialize</span></code> now takes a <code class="docutils literal notranslate"><span class="pre">append_revisions_only</span></code>
argument. (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Branch._get_checkout_format</span></code> now takes a <code class="docutils literal notranslate"><span class="pre">lightweight</span></code> argument
which indicates if the format should be for a lightweight or a
heavyweight checkout. (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ControlDir.create_branch</span></code> now takes a <code class="docutils literal notranslate"><span class="pre">append_revisions_only</span></code> argument.
(Jelmer Vernooij)</p></li>
<li><p>New class <code class="docutils literal notranslate"><span class="pre">URL</span></code> in <code class="docutils literal notranslate"><span class="pre">bzrlib.utils</span></code> for managing parsed URLs.
(Jelmer Vernooij)</p></li>
<li><p>New method <code class="docutils literal notranslate"><span class="pre">Config.get_user_option_as_int_from_SI</span></code> added for expanding a
value in SI format (i.e. “20MB”, “1GB”) into its integer equivalent.
(Shannon Weyrick)</p></li>
<li><p>New method <code class="docutils literal notranslate"><span class="pre">InterTree.file_content_matches</span></code> which checks that
two files in different trees have the same contents.
(Jelmer Vernooij)</p></li>
<li><p>New method <code class="docutils literal notranslate"><span class="pre">Tree.get_file_verifier</span></code> which allows tree implementations
to return non-sha1 checksums to verify files.
(Jelmer Vernooij, #720831)</p></li>
<li><p>New methods <code class="docutils literal notranslate"><span class="pre">get_transport_from_path</span></code> and <code class="docutils literal notranslate"><span class="pre">get_transport_from_url</span></code>
have been added that only support opening from a path or a URL,
unlike <code class="docutils literal notranslate"><span class="pre">get_transport</span></code>. (Jelmer Vernooij)</p></li>
<li><p>New registry <code class="docutils literal notranslate"><span class="pre">OptionRegistry</span></code> specialized for configuration options.
(Vincent Ladeuil)</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">AtomicFile.closed</span></code> which has been deprecated in bzr 0.10.
(Vincent Ladeuil)</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">commands._builtin_commands</span></code>, <code class="docutils literal notranslate"><span class="pre">commands.shlex_split_unicode</span></code>,
<code class="docutils literal notranslate"><span class="pre">Command._maybe_expand_globs</span></code> and <code class="docutils literal notranslate"><span class="pre">Command.run_direct</span></code> deprecated in
2.10 and 2.2.0. (Vincent Ladeuil)</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">diff.get_trees_and_branches_to_diff</span></code> deprecated in 2.2.0.</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">log.calculate_view_revisions</span></code>, <code class="docutils literal notranslate"><span class="pre">log._filter_revision_range</span></code>,
<code class="docutils literal notranslate"><span class="pre">log.get_view_revisions</span></code> which have been deprecated in bzr 2.1.0. Also
remove <code class="docutils literal notranslate"><span class="pre">log.show_one_log</span></code> which was never properly deprecated but wasn’t
used and is easy to inline if needed. (Vincent Ladeuil)</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">trace.info</span></code>, <code class="docutils literal notranslate"><span class="pre">trace.error</span></code> and <code class="docutils literal notranslate"><span class="pre">trace.show_log_error</span></code>
deprecated in 2.1.0. (Vincent Ladeuil)</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">TransportListRegistry.set_default_transport</span></code>, as the concept of
a default transport is currently unused. (Jelmer Vernooij)</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">UIFactory.warn_cross_format_fetch</span></code> and
<code class="docutils literal notranslate"><span class="pre">UIFactory.warn_experimental_format_fetch</span></code> in favor of
<code class="docutils literal notranslate"><span class="pre">UIFactory.show_user_warning</span></code>. (Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tags</span></code> containers can now declare whether they support versioned
tags and whether tags can refer to ghost tags.
(Jelmer Vernooij)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tags.merge_to</span></code> now returns a dictionary with the updated tags
and a set of conflicts, rather than just conflicts. (Jelmer Vernooij)</p></li>
<li><p>There is a new class <cite>ContentFilterTree</cite> that provides a facade for
content filtering.  The <cite>filtered</cite> parameter to <cite>export</cite> is deprecated
in favor of passing a filtered tree, and the specific exporter plugins
no longer support it.
(Martin Pool)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Transport</span></code> now has a <code class="docutils literal notranslate"><span class="pre">_parsed_url</span></code> attribute instead of
separate <code class="docutils literal notranslate"><span class="pre">_user</span></code>, <code class="docutils literal notranslate"><span class="pre">_password</span></code>, <code class="docutils literal notranslate"><span class="pre">_port</span></code>, <code class="docutils literal notranslate"><span class="pre">_scheme</span></code>, <code class="docutils literal notranslate"><span class="pre">_host</span></code>
and <code class="docutils literal notranslate"><span class="pre">_path</span></code> attributes. Proxies are provided for the moment but
may be removed in the future. (Jelmer Vernooij)</p></li>
</ul>
</div>
<div class="section" id="id54">
<h3>Internals<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A new debug flag <code class="docutils literal notranslate"><span class="pre">hpss_client_no_vfs</span></code> will now cause the HPSS client
to raise a <code class="docutils literal notranslate"><span class="pre">HpssVfsRequestNotAllowed</span></code> exception when a VFS request
is attempted. (Jelmer Vernooij)</p></li>
<li><p>New method <code class="docutils literal notranslate"><span class="pre">ControlDir._get_selected_branch</span></code> which returns the
colocated branch selected using path segment parameters.
(Jelmer Vernooij, #380871)</p></li>
</ul>
</div>
<div class="section" id="id55">
<h3>Testing<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Blackbox tests (including test scripts) can be debugged interactively (see
bzrlib.debug.BzrPdb for details). (Vincent Ladeuil)</p></li>
<li><p><cite>BranchBuilder.build_snapshot</cite> now supports a “flush” action.  This
cleanly and reliably allows tests using <cite>BranchBuilder</cite> to construct
branches that e.g. rename files out of a directory and unversion that
directory in the same revision.  Previously some changes were impossible
due to the order that <cite>build_snapshot</cite> performs its actions.
(Andrew Bennetts)</p></li>
<li><p>Don’t require <code class="docutils literal notranslate"><span class="pre">os.fdatasync</span></code> to be defined on all supported OSes
(BSD-based OSes don’t define it).  (Vincent Ladeuil, #822649)</p></li>
<li><p>Fix compatibility with testtools 0.9.12. (Jelmer Vernooij, #815423)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LockDir</span></code> can now be run when the local hostname is <code class="docutils literal notranslate"><span class="pre">localhost</span></code>.
(Jelmer Vernooij, #825994)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ModuleAvailableFeature</span></code> won’t try to import already imported modules,
allowing it to be used for modules with side-effects.
(Vincent Ladeuil, #712474)</p></li>
<li><p>Output time stamps while running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check</span></code> to get better timings from
pqm.  (Vincent Ladeuil, #837926)</p></li>
<li><p><cite>TestCaseWithMemoryTransport</cite> is faster now: <cite>_check_safety_net</cite> now
just compares the bytes in the dirstate file to its pristine state,
rather than opening the WorkingTree and calling <code class="docutils literal notranslate"><span class="pre">last_revision()</span></code>.
This reduces the overall test suite time by about 10% on my laptop.
(Andrew Bennetts)</p></li>
<li><p>Update <cite>TestCase.knownFailure</cite> to the testtools way of handling expected
failures to resolve Python 2.7 incompatibility. (Martin [gz], #607400)</p></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../whats-new/whats-new-in-3.0.html">What’s New in Breezy 3.0?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">Breezy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/index.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Breezy Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-guide/index.html">Breezy Upgrade Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-reference/index.html">Breezy User Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">Breezy System Administrator’s Guide</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="../_sources/release-notes/bzr-2.5.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2011 Canonical Ltd, 2017-2018 Breezy Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>