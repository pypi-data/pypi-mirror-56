
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>What’s New in Bazaar 2.2? &#8212; Breezy 3.0.2dev documentation</title>
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="../index.html">Table of Contents (3.0.2dev)</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-bazaar-2-2">
<h1>What’s New in Bazaar 2.2?<a class="headerlink" href="#what-s-new-in-bazaar-2-2" title="Permalink to this headline">¶</a></h1>
<p>Bazaar 2.2.0, released on the 6th of August 2010, marks the start of
another long-term-stable series. From here, we will only make bugfix
releases on the 2.2 series (2.2.1, etc), while 2.3 will become our new
development series. The 2.0 and 2.1 series will also continue to get
bugfixes. (Currently 2.0 is planned to be supported for another 6 months.)</p>
<p>The main changes in 2.2 are: <strong>better local and network performance</strong>,
<strong>reduced memory usage</strong>, and several user-interface improvements.</p>
<p>Users are encouraged to upgrade from the other stable series.  This
document outlines the improvements in Bazaar 2.2 vs Bazaar 2.1. As well as
summarizing improvements made to the core product, it highlights
enhancements within the broader Bazaar world of potential interest to
those upgrading.</p>
<p>Bazaar 2.2.0 includes all the fixes from 2.1.2 and 2.0.6.</p>
<p>Over 120 bugs have been fixed in total.  See the
<a class="reference internal" href="../release-notes/index.html"><span class="doc">Breezy Release Notes</span></a> for a full list.</p>
<p>Bazaar 2.2.1 includes all the fixes from 2.1.3 and 2.0.6 (that
weren’t included in 2.2.0).</p>
<p>See the <a class="reference internal" href="../release-notes/index.html"><span class="doc">Breezy Release Notes</span></a> for details.</p>
<p>Bazaar 2.2.2 focused on fixes to improve our Ubuntu release workflow (which
should also help all other distributions).</p>
<p>See the <a class="reference internal" href="../release-notes/index.html"><span class="doc">Breezy Release Notes</span></a> for details.</p>
<p>Bazaar 2.2.3 focused on fixes related to interactions with the launchpad
server and python-2.7 compatibility.</p>
<p>Bazaar 2.2.4 fixed a regression for some interactions with the launchpad
server.</p>
<p>Bazaar 2.2.5 fixed a regression in some rare conflict resolutions and warns
when branching an out-of-date ubuntu packaging branch.</p>
<p>See the <a class="reference internal" href="../release-notes/index.html"><span class="doc">Breezy Release Notes</span></a> for details.</p>
<p>Bazaar 2.2 is fully compatible both locally and on the network with 2.0
and 2.1, and can read and write repositories generated by all previous
versions.</p>
<div class="section" id="behaviour-changes">
<h2>Behaviour changes<a class="headerlink" href="#behaviour-changes" title="Permalink to this headline">¶</a></h2>
<p>There are some compatibility changes in this release.</p>
<ul class="simple">
<li><p>For commandline users we no longer guess user identity for <code class="docutils literal notranslate"><span class="pre">bzr</span>
<span class="pre">commit</span></code>: users must specify their identity using <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">whoami</span></code> (you
don’t need to specify your identity for readonly operations).
This avoids problems where the previous guessed default caused commits
be recorded as coming from, for example <code class="docutils literal notranslate"><span class="pre">&lt;sam&#64;localhost&gt;</span></code>.</p></li>
</ul>
</div>
<div class="section" id="improved-conflict-handling">
<h2>Improved conflict handling<a class="headerlink" href="#improved-conflict-handling" title="Permalink to this headline">¶</a></h2>
<p>Tree-shape conflicts can be resolved by providing <code class="docutils literal notranslate"><span class="pre">--take-this</span></code> and
<code class="docutils literal notranslate"><span class="pre">--take-other</span></code> to the <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">resolve</span></code> command. Just marking the conflict
as resolved is still accessible via the <code class="docutils literal notranslate"><span class="pre">--done</span></code> default action.</p>
</div>
<div class="section" id="local-performance">
<h2>Local performance<a class="headerlink" href="#local-performance" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">init</span></code> does not recursively scan directory contents anymore
leading to faster init for directories with existing content.
(Martin [gz], Parth Malwankar, #501307)</p></li>
<li><p>Less code is loaded at startup, so there’s less overhead on running all
bzr commands.
(Andrew Bennetts, Martin Pool)</p></li>
<li><p>Reduce peak memory by one copy of compressed text.
(John Arbash Meinel, #566940)</p></li>
<li><p>Avoid repeated locking of local objects in <code class="docutils literal notranslate"><span class="pre">diff</span></code>, <code class="docutils literal notranslate"><span class="pre">missing</span></code>, and
<code class="docutils literal notranslate"><span class="pre">pull</span></code>, so those options are faster.
(Andrew Bennetts)</p></li>
</ul>
</div>
<div class="section" id="network-performance">
<h2>Network performance<a class="headerlink" href="#network-performance" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Bazaar now reads data from SSH connections more efficiently on platforms
that provide the <code class="docutils literal notranslate"><span class="pre">socketpair</span></code> function, and when using paramiko.
(Andrew Bennetts, #590637)</p></li>
<li><p>Index lookups in pack repositories search recently hit pack files
first.  In repositories with many pack files this can greatly reduce the
number of files accessed, the number of bytes read, and the number of
read calls.  An incremental pull via plain HTTP takes half the time and
bytes for a moderately large repository.  (Andrew Bennetts)</p></li>
<li><p>Index lookups only re-order the indexes when the hit files aren’t
already first. Reduces the cost of reordering
(John Arbash Meinel, #562429)</p></li>
</ul>
</div>
<div class="section" id="command-improvements">
<h2>Command improvements<a class="headerlink" href="#command-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">remove-branch</span></code> command that can remove a local or remote
branch. (Jelmer Vernooij, #276295)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">export</span></code> now takes an optional argument <code class="docutils literal notranslate"><span class="pre">--per-file-timestamps</span></code>
to set file mtimes to the last timestamp of the last revision in which
they were changed rather than the current time. (Jelmer Vernooij)</p></li>
<li><p>Tag names can now be determined automatically by <code class="docutils literal notranslate"><span class="pre">automatic_tag_name</span></code>
hooks on <code class="docutils literal notranslate"><span class="pre">Branch</span></code> if they are not specified on the command line.
(Jelmer Vernooij)</p></li>
<li><p>Tree-shape conflicts can be resolved by providing <code class="docutils literal notranslate"><span class="pre">--take-this</span></code> and
<code class="docutils literal notranslate"><span class="pre">--take-other</span></code> to the <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">resolve</span></code> command. Just marking the conflict
as resolved is still accessible via the <code class="docutils literal notranslate"><span class="pre">--done</span></code> default action.
(Vincent Ladeuil)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--directory</span></code> option is supported for a number of additional
commands: added, annotate, bind, cat, cat-revision, clean-tree,
conflicts, deleted, export, ignore, ignored, lookup-revision, ls,
merge-directive, missing, modified, nick, re-sign, resolve, shelve,
switch, unbind, unknowns, unshelve, whoami.
(Martin von Gagern, #527878)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">commit</span></code> accepts <code class="docutils literal notranslate"><span class="pre">-p</span></code> (for “patch”) as a shorter name for
<code class="docutils literal notranslate"><span class="pre">--show-diff</span></code>.
(Parth Malwankar, #571467)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">ignore</span></code> now supports a <code class="docutils literal notranslate"><span class="pre">--default-rules</span></code> option that displays
the default ignore rules used by bzr. The flag <code class="docutils literal notranslate"><span class="pre">--old-default-rules</span></code>
is no longer supported by <code class="docutils literal notranslate"><span class="pre">ignore</span></code>.
(Parth Malwankar, #538703)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">pack</span></code> now supports a <code class="docutils literal notranslate"><span class="pre">--clean-obsolete-packs</span></code> option that
can save disk space by deleting obsolete pack files created during the
pack operation.
(Parth Malwankar, #304320)</p></li>
<li><p>New command line option <code class="docutils literal notranslate"><span class="pre">--authors</span></code> to <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">log</span></code> allows users to
select which of the apparent authors and committer should be
included in the log. Defaults depend on format. (Martin von Gagern, #513322)</p></li>
<li><p>The bash_completion plugin from the bzr-bash-completion project has
been merged into the tree. It provides a bash-completion command and
replaces the outdated <code class="docutils literal notranslate"><span class="pre">contrib/bash/bzr</span></code> script with a version
using the plugin. (Martin von Gagern, #560030)</p></li>
<li><p>A new transport based on GIO (the gnome i/o library) provides access to
samba shares, webdav using gio+smb and gio+dav. It is also possible to
use gio for some already existing transport methods as gio+file,
gio+sftp, gio+ftp.
(Mattias Eriksson)</p></li>
</ul>
</div>
<div class="section" id="controlling-plugins">
<h2>Controlling plugins<a class="headerlink" href="#controlling-plugins" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Plugins can be disabled by defining <code class="docutils literal notranslate"><span class="pre">BZR_DISABLE_PLUGINS</span></code> as
a list of plugin names separated by ‘:’ (‘;’ on windows).
(Vincent Ladeuil, #411413)</p></li>
<li><p>Plugins can be loaded from arbitrary locations by defining
<code class="docutils literal notranslate"><span class="pre">BZR_PLUGINS_AT</span></code> as a list of <code class="docutils literal notranslate"><span class="pre">name&#64;path</span></code> separated by ‘:’ (‘;’ on
Microsoft
Windows). This takes precedence over <code class="docutils literal notranslate"><span class="pre">BZR_PLUGIN_PATH</span></code> for the
specified plugins, and is expected to be most useful for plugin
developers.
(Vincent Ladeuil, #82693)</p></li>
</ul>
</div>
<div class="section" id="apport-crash-reporting">
<h2>Apport crash reporting<a class="headerlink" href="#apport-crash-reporting" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>If the Apport crash-reporting tool is available, bzr crashes are now
stored into the <code class="docutils literal notranslate"><span class="pre">/var/crash</span></code> apport spool directory, and the user is
invited to report them to the developers from there, either
automatically or by running <code class="docutils literal notranslate"><span class="pre">apport-bug</span></code>.  No information is sent
without specific permission from the user.  (Martin Pool, #515052)</p></li>
</ul>
</div>
<div class="section" id="improved-launchpad-integration">
<h2>Improved Launchpad integration<a class="headerlink" href="#improved-launchpad-integration" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Merges can be proposed on Launchpad with the new <code class="docutils literal notranslate"><span class="pre">lp-propose-merge</span></code>
command.</p></li>
</ul>
</div>
<div class="section" id="better-documentation">
<h2>Better documentation<a class="headerlink" href="#better-documentation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">help</span> <span class="pre">patterns</span></code> now explains case insensitive patterns and
points to Python regular expression documentation.
(Parth Malwankar, #594386)</p></li>
<li><p>Numerous improvements have been made to the developer documentation.</p></li>
</ul>
</div>
<div class="section" id="changes-to-plugins">
<h2>Changes to plugins<a class="headerlink" href="#changes-to-plugins" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bzr-grep">
<h3>bzr grep<a class="headerlink" href="#bzr-grep" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://launchpad.net/bzr-grep">grep plugin</a>  has developed well
during the bzr 2.2 cycle.  bzr grep can search the versioned files in the
working tree, or in one or a series of revisions, or it can search through
only the changes in a revision range.</p>
</div>
<div class="section" id="qbzr">
<h3>qbzr<a class="headerlink" href="#qbzr" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://launchpad.net/qbzr">qbzr</a>, a cross-platform graphical interface
to Bazaar, gained many features and fixes in its 0.19 release, including:</p>
<ul class="simple">
<li><p>qannotate has new look and feel; with new features: find text and goto
to line.</p></li>
<li><p>Improved performance of qlog, and treewidget-based dialogs (qcommit,
qadd, qrevert etc.)</p></li>
<li><p>qpush, qmerge, etc.: when there are uncommitted changes in the working
tree, user has the option to commit, or revert.</p></li>
<li><p>qcommit: user can update bound branch/checkout if it is not up to date.</p></li>
<li><p>Better support of Mac OS X: dialog windows no more start in background.</p></li>
<li><p>qlog: Context menu actions for tag and revert will now show a branch
menu if more than one branch is open.</p></li>
<li><p>qlog: more context menu actions for update, cherry-pick, and reverse
cherry-pick.</p></li>
<li><p>Language of GUI can be set in DEFAULT section of bazaar.conf
as <code class="docutils literal notranslate"><span class="pre">language</span> <span class="pre">=</span> <span class="pre">code</span></code>. Language codes are the same
as for <code class="docutils literal notranslate"><span class="pre">LANG</span></code> environment variable.
Environment variable <code class="docutils literal notranslate"><span class="pre">LANGUAGE</span></code> still preferred over settings
in bazaar.conf.</p></li>
</ul>
</div>
</div>
<div class="section" id="platform-specific-changes">
<h2>Platform-specific changes<a class="headerlink" href="#platform-specific-changes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="microsoft-windows">
<h3>Microsoft Windows<a class="headerlink" href="#microsoft-windows" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>There’s a new py2exe windows program <code class="docutils literal notranslate"><span class="pre">bzrw.exe</span></code>, which allows for starting a Bazaar GUI with out have a console open in the background.  (Gary van der Merwe, #433781`)</p></li>
<li><p>The all-in-one Windows installer will now be built with docstrings stripped
from the library zip, reducing the size and slightly improving cold startup
time. Bundled plugins are unchanged for the moment, but if adding other new
plugins to an all-in-one installation, ensure they are compiled and
installed with -O1 or help may not work. (Martin [gz])</p></li>
<li><p>Parsing of command lines, for example in <code class="docutils literal notranslate"><span class="pre">diff</span> <span class="pre">--using</span></code>, no longer
treats backslash as an escape character on Windows.   (Gordon Tyler,
#392248)</p></li>
</ul>
</div>
</div>
<div class="section" id="api-changes">
<h2>API changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>BzrError subclasses no longer support the name “message” to be used
as an argument for __init__ or in _fmt format specification as this
breaks in some Python versions. errors.LockError.__init__ argument
is now named “msg” instead of earlier “message”.
(Parth Malwankar, #603461)</p></li>
<li><p>The old <code class="docutils literal notranslate"><span class="pre">bzr</span> <span class="pre">selftest</span> <span class="pre">--benchmark</span></code> option has been removed.
&lt;<a class="reference external" href="https://launchpad.net/bzr-usertest">https://launchpad.net/bzr-usertest</a>&gt; is an actively-maintained
macrobenchmark suite.
(Martin Pool)</p></li>
<li><p>bzrlib library users now need to call <code class="docutils literal notranslate"><span class="pre">__enter__</span></code> and <code class="docutils literal notranslate"><span class="pre">__exit__</span></code> on
the result of <code class="docutils literal notranslate"><span class="pre">bzrlib.initialize</span></code>. This change was made when fixing
the bad habit recent bzr versions have had of leaving progress bars
behind on the screen. That required calling another function before
exiting the program, and it made sense to provide a full context
manager at the same time. (Robert Collins)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">bzr</span></code> front end now requires a <code class="docutils literal notranslate"><span class="pre">bzrlib.ui.ui_factory</span></code> which is a
context manager in the Python 2.5 and above sense. The bzrlib base class
is such a manager, but third party UI factories which do not derive from
<code class="docutils literal notranslate"><span class="pre">bzrlib.ui.UIFactory</span></code> will be incompatible with the command line front
end.</p></li>
<li><p>URLs like <code class="docutils literal notranslate"><span class="pre">foo:bar/baz</span></code> are now always parsed as a URL with scheme “foo”
and path “bar/baz”, even if bzr does not recognize “foo” as a known URL
scheme.  Previously these URLs would be treated as local paths.
(Gordon Tyler)</p></li>
</ul>
</div>
<div class="section" id="further-information">
<h2>Further information<a class="headerlink" href="#further-information" title="Permalink to this headline">¶</a></h2>
<p>For more detailed information on the changes made, see the
the <a class="reference internal" href="../release-notes/index.html"><span class="doc">Breezy Release Notes</span></a> for:</p>
<ul class="simple">
<li><p>the interim bzr <a class="reference external" href="https://launchpad.net/bzr/2.2">milestones</a></p></li>
<li><p>the plugins you use.</p></li>
</ul>
<p>For a summary of changes made in earlier releases, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="whats-new-in-2.1.html"><span class="doc">What’s New in Bazaar 2.1?</span></a></p></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="whats-new-in-3.0.html">What’s New in Breezy 3.0?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">Breezy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/index.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/index.html">Breezy Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-guide/index.html">Breezy Upgrade Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-reference/index.html">Breezy User Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">Breezy System Administrator’s Guide</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="../_sources/whats-new/whats-new-in-2.2.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2011 Canonical Ltd, 2017-2018 Breezy Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>