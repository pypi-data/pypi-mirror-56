(window["webpackJsonprun-callable"]=window["webpackJsonprun-callable"]||[]).push([[0],{210:function(e,t,a){e.exports=a(419)},215:function(e,t,a){},237:function(e,t,a){},419:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(7),o=a.n(r),c=(a(215),a(207)),i=a(67),s=a(68),u=a(70),d=a(69),m=a(71),f=a(149),h=a(56),b=a(54),p=a(59),v=a(421),E=a(428),g=a(427),y=a(57),O=a(8),w=a(429),j=a(431),k=a(433),C=a(432),x=a(426),S=a(208),M=a(430),L=a(425),T=a(422),D=a(434),F=a(13),R=a(423),_=a(424),B=a(58),I=a(93),N=a(41),A=a.n(N),P=a(11),Y=a.n(P);a(236),a(237);function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}function W(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var q=n.a.createElement("title",null,"\u7f16\u7ec4"),G=n.a.createElement("desc",null,"Created with Sketch."),U=n.a.createElement("defs",null,n.a.createElement("path",{d:"M6.48075496,131.95025 L24.9627073,150.431098 C23.6769032,156.417298 23,162.629599 23,169 C23,217.601058 62.398942,257 111,257 C117.370401,257 123.582702,256.323097 129.568902,255.037293 L149.04975,274.519245 C137.316712,278.71484 124.67522,281 111.5,281 C49.9202504,281 1.42108547e-14,231.07975 1.42108547e-14,169.5 C1.42108547e-14,156.32478 2.28516018,143.683288 6.48075496,131.95025 Z M111.5,58 C173.07975,58 223,107.92025 223,169.5 C223,183.225266 220.520053,196.371309 215.983803,208.514485 L196.670284,189.201335 C198.193974,182.714721 199,175.951489 199,169 C199,120.398942 159.601058,81 111,81 C104.048511,81 97.2852792,81.8060255 90.7986652,83.3297162 L72.4855155,65.0161969 C84.628691,60.4799473 97.7747341,58 111.5,58 Z",id:"path-1"}),n.a.createElement("filter",{x:"0.0%",y:"0.0%",width:"100.0%",height:"100.0%",filterUnits:"objectBoundingBox",id:"filter-2"},n.a.createElement("feGaussianBlur",{stdDeviation:0,in:"SourceGraphic"}))),V=n.a.createElement("g",{id:"\\u9875\\u9762-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},n.a.createElement("g",{id:"\\u7F16\\u7EC4",transform:"translate(0.270599, -58.000000)"},n.a.createElement("mask",{id:"mask-3",fill:"white"},n.a.createElement("use",{xlinkHref:"#path-1"})),n.a.createElement("use",{id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#000000",filter:"url(#filter-2)",xlinkHref:"#path-1"}),n.a.createElement("text",{id:"t",fontFamily:"STBaoliSC-Regular, Baoli SC",fontSize:201,fontWeight:"normal",fill:"#000000"},n.a.createElement("tspan",{x:71,y:213},"t")))),z=function(e){var t=e.svgRef,a=e.title,l=W(e,["svgRef","title"]);return n.a.createElement("svg",H({width:"224px",height:"223px",viewBox:"0 0 224 223",ref:t},l),void 0===a?q:n.a.createElement("title",null,a),G,U,V)},X=n.a.forwardRef(function(e,t){return n.a.createElement(z,H({svgRef:t},e))});a.p;function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var $=n.a.createElement("title",null,"Touch Callable"),K=n.a.createElement("desc",null,"Created with Sketch."),Q=n.a.createElement("g",{id:"\\u9875\\u9762-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",fontFamily:"GoMonoForPowerline, Go Mono for Powerline",fontSize:24,fontWeight:"normal"},n.a.createElement("g",{id:"\\u753B\\u677F",transform:"translate(-640.000000, -73.000000)",fill:"#000000"},n.a.createElement("text",{id:"Touch-Callable"},n.a.createElement("tspan",{x:640,y:92},"Touch Callable")))),ee=function(e){var t=e.svgRef,a=e.title,l=Z(e,["svgRef","title"]);return n.a.createElement("svg",J({width:"200px",height:"20px",viewBox:"0 0 200 20",ref:t},l),void 0===a?$:n.a.createElement("title",null,a),K,Q)},te=n.a.forwardRef(function(e,t){return n.a.createElement(ee,J({svgRef:t},e))});a.p;function ae(e){return{type:"updateCallables",callables:e}}function le(e){return{type:"setLocale",locale:e}}function ne(e){return{type:"changeModuleStatus",hasNew:e}}var re={callables:[],locale:B.a,hasNewModule:!1};var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateCallables":return Object.assign({},e,{callables:t.callables});case"setLocale":return Object.assign({},e,{locale:t.locale});case"changeModuleStatus":return Object.assign({},e,{hasNewModule:t.hasNew});default:return e}},ce=v.a.Header,ie=v.a.Content,se=v.a.Footer,ue=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.setCallables;A.a.get("callable").then(function(t){e(t.data)})}},{key:"render",value:function(){return n.a.createElement(E.a,{itemLayout:"horizontal",dataSource:this.props.callables,renderItem:function(e){return n.a.createElement(E.a.Item,null,n.a.createElement(E.a.Item.Meta,{title:n.a.createElement(f.b,{to:"/callable/".concat(e.callable_name)},e.callable_name),description:e.title}))}})}}]),t}(l.Component),de=function(e){return Object(b.a)({setCallables:ae},e)},me=Object(p.b)(function(e){return{callables:e.callables}},de)(ue),fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){var t=Object(c.a)(e.fileList);t.length>=1&&a.setState({disabled:!0}),a.setState({fileList:t}),a.props.onChange(t)},a.onRemove=function(e){return a.setState({disabled:!1}),!0},a.state={fileList:[],disabled:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.disabled,t={onChange:this.handleChange,onRemove:this.onRemove};return n.a.createElement(g.a,Object.assign({},t,{beforeUpload:function(e){return!1},fileList:this.state.fileList}),0===this.state.fileList.length?n.a.createElement(y.a,{disabled:e},n.a.createElement(O.a,{type:"upload"})," Upload"):null)}}]),t}(n.a.Component),he=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){for(var l={},n={},r=0,o=Object.keys(t);r<o.length;r++){var c=t[d=o[r]];Array.isArray(c)&&0!==c.length&&c[0]instanceof Object&&c[0].originFileObj instanceof File?l[d]=t[d][0].originFileObj:n[d]=t[d]}if(0===Object.keys(l).length)A.a.post("callable/".concat(a.props.match.params.name),t).then(function(e){"success"===e.data.status?a.showSuccessModal(e.data.result):a.showErrorModal(e.data.result)});else{var i=new FormData;i.set("json",JSON.stringify(n));for(var s=0,u=Object.keys(l);s<u.length;s++){var d=u[s];i.append(d,l[d])}A()({method:"post",url:"callable/".concat(a.props.match.params.name),data:i,headers:{"Content-Type":"multipart/form-data"}}).then(function(e){"success"===e.data.status?a.showSuccessModal(e.data.result):a.showErrorModal(e.data.result)})}}})},a.setCallable=function(){var e,t=a.props.match.params.name,l=!0,n=!1,r=void 0;try{for(var o,c=a.props.callables[Symbol.iterator]();!(l=(o=c.next()).done);l=!0)if((e=o.value).callable_name===t){a.callable=e;break}}catch(i){n=!0,r=i}finally{try{l||null==c.return||c.return()}finally{if(n)throw r}}},a.normFile=function(e){return Array.isArray(e)?e:e&&e.fileList},a.buildFormItem=function(e,t,l){var r,o=a.props.form.getFieldDecorator,c=e.name;if(["BytesIO","BinaryIO"].includes(e.annotation))return n.a.createElement(w.a.Item,{label:c,key:t},o(c,{valuePropName:"fileList",getValueFromEvent:a.normFile,rules:[{required:e.required,message:"\u8bf7\u4e0a\u4f20\u6587\u4ef6!"}]})(n.a.createElement(fe,null)));switch(e.annotation){case"str":r=n.a.createElement(j.a,{allowClear:!0});break;case"float":r=n.a.createElement(k.a,{allowClear:!0});break;case"int":r=n.a.createElement(k.a,{parser:function(e){return Math.floor(e)},allowClear:!0});break;case"bool":r=n.a.createElement(C.a.Group,{buttonStyle:"solid"},n.a.createElement(C.a.Button,{value:!0},"True"),n.a.createElement(C.a.Button,{value:!1},"False"));break;case"datetime":r=n.a.createElement(x.a,{showTime:!0});break;case"date":r=n.a.createElement(x.a,null);break;case"time":r=n.a.createElement(S.a,null);break;case"Enum":r=n.a.createElement(C.a.Group,{buttonStyle:"solid"},e.enum_values.map(function(e,t,a){return n.a.createElement(C.a.Button,{value:e,key:t},e)}));break;default:r=n.a.createElement(j.a,null)}return n.a.createElement(w.a.Item,{label:c,key:t},o(c,{initialValue:a.buildDefaultValue(e),rules:[{required:e.required,message:"\u8bf7\u8f93\u5165".concat(c,"!")}]})(r))},a.buildDefaultValue=function(e){return"time"===e.annotation&&e.default?Y()(e.default,"HH:mm:ss"):"date"===e.annotation&&e.default?Y()(e.default,'"YYYY-MM-DD"'):"datetime"===e.annotation&&e.default?Y()(e.default,'"YYYY-MM-DDTHH:mm:ss"'):e.default};var l=a.props.callables;return a.state={visible:!1,response:null,callables:l},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.setCallables;A.a.get("callable").then(function(t){e(t.data)})}},{key:"showSuccessModal",value:function(e){M.a.success({title:"\u6267\u884c\u6210\u529f",content:e})}},{key:"showErrorModal",value:function(e){M.a.error({title:"\u6267\u884c\u5931\u8d25",content:e})}},{key:"render",value:function(){var e=this;return this.setCallable(),n.a.createElement(L.a,{style:{border:"1px solid rgb(235, 237, 240)"},onBack:function(){return e.props.history.push("/")},title:"\u529f\u80fd\u5217\u8868"},n.a.createElement(w.a,{layout:"vertical",onSubmit:this.handleSubmit},n.a.createElement(T.a,null,this.callable?this.callable.callable_name:""),n.a.createElement("pre",null,this.callable&&this.callable.doc?this.callable.doc:"\u6ca1\u6709\u6587\u6863"),this.callable&&this.callable.parameters.length?n.a.createElement(T.a,null,"\u53c2\u6570\u586b\u5199"):[],this.callable?this.callable.parameters.map(this.buildFormItem):[],n.a.createElement(w.a.Item,{wrapperCol:{span:24}},n.a.createElement(y.a,{type:"primary",htmlType:"submit",block:!0},"\u8fd0\u884c"))))}}]),t}(n.a.Component),be=w.a.create({name:"callablForm"})(he),pe=Object(p.b)(function(e){return{callables:e.callables}},de)(be),ve=function(e){function t(){var e,a;Object(i.a)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).getLocaleText=function(e){return e===B.a?"English":e===I.a?"\u4e2d\u6587":void 0},a.state={localeText:a.getLocaleText(a.props.locale)},a.onChangeLocale=function(e){var t=a.props,l=t.setLocale,n=t.locale,r=null;n===B.a?r=I.a:n===I.a&&(r=B.a),A.a.post("locale",{locale:r.locale}),l(r),a.setState({localeText:a.getLocaleText(r)}),r===B.a?Y.a.locale("en"):Y.a.locale("zh-cn")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setLocale,a=e.locale;A.a.get("locale").then(function(e){e.data.locale!==a.locale&&("en"===e.data.locale?t(B.a):t(I.a))})}},{key:"render",value:function(){return n.a.createElement(y.a,{onClick:this.onChangeLocale},this.state.localeText)}}]),t}(l.Component),Ee=function(e){return{locale:e.locale}},ge=Object(p.b)(Ee,function(e){return Object(b.a)({setLocale:le},e)})(ve),ye=function(e){function t(){var e,a;Object(i.a)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!1},a.reloadModule=function(e){var t=a.props.updateCallables;a.setState({loading:!0}),A.a.post("reload-module"),A.a.get("callable").then(function(e){t(e.data)}),a.setState({loading:!1}),window.location.reload(!0),D.a.success("\u66f4\u65b0\u6210\u529f",1)},a.queryNewModule=function(){var e=a.props,t=e.hasNewModule,l=e.changeModuleStatus;A.a.get("module-status").then(function(e){e.data.has_new!==t&&(e.data.has_new&&D.a.info("\u6a21\u5757\u6709\u66f4\u65b0\uff01",1),l(e.data.has_new))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"tick",value:function(){this.setState(function(e){return{secondsElapsed:e.secondsElapsed+1}})}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return e.queryNewModule()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return n.a.createElement(y.a,{disabled:!this.props.hasNewModule,loading:this.state.loading,style:{display:"inline-block",marginRight:"20px"},onClick:this.reloadModule},"Reload Module")}}]),t}(l.Component),Oe=Object(p.b)(function(e){return{hasNewModule:e.hasNewModule}},function(e){return Object(b.a)({changeModuleStatus:ne,updateCallables:ae},e)})(ye),we=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.title="Touch-Callable"}},{key:"render",value:function(){var e=this.props.locale;return n.a.createElement(F.a,{locale:e},n.a.createElement(v.a,{className:"layout",key:e?e.locale:"en"},n.a.createElement(ce,{style:{background:"white",boxShadow:"0px 1px 5px #d0cdcd",height:"unset"}},n.a.createElement(R.a,{type:"flex",justify:"center",align:"middle"},n.a.createElement(_.a,{md:8,xs:24},n.a.createElement(X,{style:{verticalAlign:"middle",marginRight:"20px",width:"48px",height:"48px"}}),n.a.createElement(te,{style:{verticalAlign:"middle",width:"150px"}})),n.a.createElement(_.a,{md:8,xs:24}),n.a.createElement(_.a,{md:8,xs:24,style:{textAlign:"right"}},n.a.createElement(Oe,{style:{marginRight:"20px"}}),n.a.createElement(ge,null)))),n.a.createElement(ie,{style:{margin:"10px 10px"}},n.a.createElement(R.a,{span:24},n.a.createElement(_.a,{md:6,xs:24}),n.a.createElement(_.a,{md:12,xs:24},n.a.createElement(f.a,null,n.a.createElement(h.c,null,n.a.createElement(h.a,{exact:!0,path:"/",component:me}),n.a.createElement(h.a,{path:"/callable/:name",component:pe})))),n.a.createElement(_.a,{md:6,xs:24}))),n.a.createElement(se,{style:{textAlign:"center"}},"Touch Callable")))}}]),t}(l.Component),je=Object(p.b)(Ee)(we);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ke=Object(b.b)(oe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({trace:!0,traceLimit:25}));o.a.render(n.a.createElement(p.a,{store:ke},n.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[210,1,2]]]);
//# sourceMappingURL=main.8caa01fa.chunk.js.map