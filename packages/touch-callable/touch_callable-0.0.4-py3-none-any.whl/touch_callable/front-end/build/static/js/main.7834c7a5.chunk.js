(window["webpackJsonprun-callable"]=window["webpackJsonprun-callable"]||[]).push([[0],{179:function(e,a,t){e.exports=t(347)},184:function(e,a,t){},207:function(e,a,t){},347:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),c=t(7),o=t.n(c),r=(t(184),t(71)),u=t(72),s=t(74),i=t(73),b=t(75),m=t(140),d=t(52),h=t(50),p=t(55),f=t(349),E=t(355),v=t(358),y=t(360),w=t(359),O=t(354),g=t(177),j=t(356),k=t(357),M=t(353),C=t(350),S=t(53),_=t(361),D=t(13),T=t(351),N=t(352),L=t(54),x=t(85),I=t(45),Y=t.n(I),F=t(11),B=t.n(F);t(206),t(207);function H(e){return{type:"updateCallables",callables:e}}function V(e){return{type:"setLocale",locale:e}}function q(e){return{type:"changeModuleStatus",hasNew:e}}var X={callables:[],locale:L.a,hasNewModule:!1};var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"updateCallables":return Object.assign({},e,{callables:a.callables});case"setLocale":return Object.assign({},e,{locale:a.locale});case"changeModuleStatus":return Object.assign({},e,{hasNewModule:a.hasNew});default:return e}},R=f.a.Header,U=f.a.Content,W=f.a.Footer,z=function(e){function a(){return Object(r.a)(this,a),Object(s.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.setCallables;Y.a.get("callable").then(function(a){e(a.data)})}},{key:"render",value:function(){return n.a.createElement(E.a,{itemLayout:"horizontal",dataSource:this.props.callables,renderItem:function(e){return n.a.createElement(E.a.Item,null,n.a.createElement(E.a.Item.Meta,{title:n.a.createElement(m.b,{to:"/callable/".concat(e.callable_name)},e.callable_name),description:e.title}))}})}}]),a}(l.Component),G=function(e){return Object(h.a)({setCallables:H},e)},J=Object(p.b)(function(e){return{callables:e.callables}},G)(z),$=function(e){function a(e){var t;Object(r.a)(this,a),(t=Object(s.a)(this,Object(i.a)(a).call(this,e))).handleSubmit=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){e||Y.a.post("callable/".concat(t.props.match.params.name),a).then(function(e){"success"===e.data.status?t.showSuccessModal(e.data.result):t.showErrorModal(e.data.result)})})},t.setCallable=function(){var e,a=t.props.match.params.name,l=!0,n=!1,c=void 0;try{for(var o,r=t.props.callables[Symbol.iterator]();!(l=(o=r.next()).done);l=!0)if((e=o.value).callable_name===a){t.callable=e;break}}catch(u){n=!0,c=u}finally{try{l||null==r.return||r.return()}finally{if(n)throw c}}},t.buildFormItem=function(e,a,l){var c,o=t.props.form.getFieldDecorator,r=e.name;switch(e.annotation){case"str":c=n.a.createElement(v.a,{allowClear:!0});break;case"float":c=n.a.createElement(y.a,{allowClear:!0});break;case"int":c=n.a.createElement(y.a,{parser:function(e){return Math.floor(e)},allowClear:!0});break;case"bool":c=n.a.createElement(w.a.Group,{buttonStyle:"solid"},n.a.createElement(w.a.Button,{value:!0},"True"),n.a.createElement(w.a.Button,{value:!1},"False"));break;case"datetime":c=n.a.createElement(O.a,{showTime:!0});break;case"date":c=n.a.createElement(O.a,null);break;case"time":c=n.a.createElement(g.a,null);break;case"Enum":c=n.a.createElement(w.a.Group,{buttonStyle:"solid"},e.enum_values.map(function(e,a,t){return n.a.createElement(w.a.Button,{value:e,key:a},e)}));break;default:c=n.a.createElement(v.a,null)}return n.a.createElement(j.a.Item,{label:r,key:a},o(r,{initialValue:t.buildDefaultValue(e),rules:[{required:e.required,message:"\u8bf7\u8f93\u5165".concat(r,"!")}]})(c))},t.buildDefaultValue=function(e){return"time"===e.annotation&&e.default?B()(e.default,"HH:mm:ss"):"date"===e.annotation&&e.default?B()(e.default,'"YYYY-MM-DD"'):"datetime"===e.annotation&&e.default?B()(e.default,'"YYYY-MM-DDTHH:mm:ss"'):e.default};var l=t.props.callables;return t.state={visible:!1,response:null,callables:l},t}return Object(b.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.setCallables;Y.a.get("callable").then(function(a){e(a.data)})}},{key:"showSuccessModal",value:function(e){k.a.success({title:"\u6267\u884c\u6210\u529f",content:e})}},{key:"showErrorModal",value:function(e){k.a.error({title:"\u6267\u884c\u5931\u8d25",content:e})}},{key:"render",value:function(){var e=this;return this.setCallable(),n.a.createElement(M.a,{style:{border:"1px solid rgb(235, 237, 240)"},onBack:function(){return e.props.history.push("/")},title:"\u529f\u80fd\u5217\u8868"},n.a.createElement(j.a,{layout:"vertical",onSubmit:this.handleSubmit},n.a.createElement(C.a,null,this.callable?this.callable.callable_name:""),n.a.createElement("pre",null,this.callable&&this.callable.doc?this.callable.doc:"\u6ca1\u6709\u6587\u6863"),this.callable&&this.callable.parameters.length?n.a.createElement(C.a,null,"\u53c2\u6570\u586b\u5199"):[],this.callable?this.callable.parameters.map(this.buildFormItem):[],n.a.createElement(j.a.Item,{wrapperCol:{span:24}},n.a.createElement(S.a,{type:"primary",htmlType:"submit",block:!0},"\u8fd0\u884c"))))}}]),a}(n.a.Component),K=j.a.create({name:"callablForm"})($),P=Object(p.b)(function(e){return{callables:e.callables}},G)(K),Q=function(e){function a(){var e,t;Object(r.a)(this,a);for(var l=arguments.length,n=new Array(l),c=0;c<l;c++)n[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(n)))).getLocaleText=function(e){return e===L.a?"English":e===x.a?"\u4e2d\u6587":void 0},t.state={localeText:t.getLocaleText(t.props.locale)},t.onChangeLocale=function(e){var a=t.props,l=a.setLocale,n=a.locale,c=null;n===L.a?c=x.a:n===x.a&&(c=L.a),Y.a.post("locale",{locale:c.locale}),l(c),t.setState({localeText:t.getLocaleText(c)}),c===L.a?B.a.locale("en"):B.a.locale("zh-cn")},t}return Object(b.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.setLocale,t=e.locale;Y.a.get("locale").then(function(e){e.data.locale!==t.locale&&("en"===e.data.locale?a(L.a):a(x.a))})}},{key:"render",value:function(){return n.a.createElement(S.a,{onClick:this.onChangeLocale},this.state.localeText)}}]),a}(l.Component),Z=function(e){return{locale:e.locale}},ee=Object(p.b)(Z,function(e){return Object(h.a)({setLocale:V},e)})(Q),ae=function(e){function a(){var e,t;Object(r.a)(this,a);for(var l=arguments.length,n=new Array(l),c=0;c<l;c++)n[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(n)))).state={loading:!1},t.reloadModule=function(e){var a=t.props.updateCallables;t.setState({loading:!0}),Y.a.post("reload-module"),Y.a.get("callable").then(function(e){a(e.data)}),t.setState({loading:!1}),_.a.success("\u66f4\u65b0\u6210\u529f",1)},t.queryNewModule=function(){var e=t.props,a=e.hasNewModule,l=e.changeModuleStatus;Y.a.get("module-status").then(function(e){e.data.has_new!==a&&(e.data.has_new&&_.a.info("\u6a21\u5757\u6709\u66f4\u65b0\uff01",1),l(e.data.has_new))})},t}return Object(b.a)(a,e),Object(u.a)(a,[{key:"tick",value:function(){this.setState(function(e){return{secondsElapsed:e.secondsElapsed+1}})}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return e.queryNewModule()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return n.a.createElement(S.a,{disabled:!this.props.hasNewModule,loading:this.state.loading,style:{display:"inline-block"},onClick:this.reloadModule},"Reload Module")}}]),a}(l.Component),te=Object(p.b)(function(e){return{hasNewModule:e.hasNewModule}},function(e){return Object(h.a)({changeModuleStatus:q,updateCallables:H},e)})(ae),le=function(e){function a(){return Object(r.a)(this,a),Object(s.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){document.title="Touch-Callable"}},{key:"render",value:function(){var e=this.props.locale;return n.a.createElement(D.a,{locale:e},n.a.createElement(f.a,{className:"layout",style:{minHeight:"10000px"},key:e?e.locale:"en"},n.a.createElement(R,null,n.a.createElement(T.a,null,n.a.createElement(N.a,{span:8},n.a.createElement("p",{style:{color:"white",display:"inline-block"}},"Touch Callable")),n.a.createElement(N.a,{span:8,push:5},n.a.createElement(te,null)),n.a.createElement(N.a,{span:8},n.a.createElement(ee,null)))),n.a.createElement(U,{style:{margin:"0 auto",width:"700px"}},n.a.createElement(m.a,null,n.a.createElement(d.c,null,n.a.createElement(d.a,{exact:!0,path:"/",component:J}),n.a.createElement(d.a,{path:"/callable/:name",component:P})))),n.a.createElement(W,{style:{textAlign:"center"}},"Touch Callable")))}}]),a}(l.Component),ne=Object(p.b)(Z)(le);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=Object(h.b)(A,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({trace:!0,traceLimit:25}));o.a.render(n.a.createElement(p.a,{store:ce},n.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[179,1,2]]]);
//# sourceMappingURL=main.7834c7a5.chunk.js.map