/*!
 * Copyright 2016 - 2019  Ternaris.
 * SPDX-License-Identifier: AGPL-3.0-only
 */

let define,require;(function(){const a={},b={};define=(b,c,d)=>{a[b]=[c,d]},require=c=>{if(!a[c])throw new Error(`Module "${c}" required, but does not exist.`);if(!b[c]){const[d,e]=a[c];e(...d.map(a=>"exports"===a?b[c]={}:require(a)))}return b[c]}})(),define(0,["exports",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],function(a,b,c,d,e,f,g,h,i,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S){"use strict";function T(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,c=T(c),d=T(d),e=T(e),f=T(f),g=T(g),h=T(h),i=T(i),j=T(j),k=T(k),l=T(l),n=T(n),o=T(o),p=T(p),q=T(q),r=T(r),s=T(s),t=T(t),u=T(u),v=T(v),w=T(w),x=T(x),y=T(y),z=T(z),A=T(A),B=T(B),C=T(C),D=T(D),E=T(E),F=T(F),G=T(G),H=T(H),I=T(I),J=T(J),K=T(K),L=T(L),M=T(M),N=T(N),O=T(O),P=T(P),Q=T(Q),R=T(R),S=T(S);const U=b.M.create({version:"19.11.0+ce"});U.components["application-route"]=c.default,U.components["button-confirm"]=d.default,U.initializers.ce=e.default,U.components["collection-route"]=f.default,U.components["compare-route"]=g.default,U.components["detail-route"]=h.default,U.components["field-datetime"]=i.default,U.components["field-filesize"]=j.default,U.components["field-float"]=k.default,U.components["field-int"]=l.default,U.components["field-string"]=n.default,U.components["field-subset"]=o.default,U.components["field-timedelta"]=p.default,U.components["glycine-geojson"]=q.default,U.components["glycine-surface"]=r.default,U.components["glycine-tyler"]=s.default,U.components["index-route"]=t.default,U.components["input-checkbox"]=u.default,U.components["input-control"]=v.default,U.components["input-textarea"]=w.default,U.components["m-hover"]=x.default,U.components["m-hscroll"]=y.default,U.components["m-select"]=z.default,U.components["m-tag"]=A.default,U.components["notfound-route"]=B.default,U.components["widget-clipboard"]=D.default,U.components["widget-comment"]=E.default,U.components["widget-filter"]=F.default,U.components["widget-gallery"]=G.default,U.components["widget-icon"]=H.default,U.components["widget-image"]=I.default,U.components["widget-keyval"]=J.default,U.components["widget-link"]=K.default,U.components["widget-loader"]=L.default,U.components["widget-map"]=M.default,U.components["widget-modal"]=N.default,U.components["widget-pre"]=O.default,U.components["widget-table"]=P.default,U.components["widget-tag"]=Q.default,U.components["widget-video"]=R.default,U.components["widget-waiting"]=S.default,U.routes=C.default;a.default=U}),define(1,["exports",48,46,45,57],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.M=void 0;class f extends c.O{constructor(){super(),this.id=1,this.components=d.components,this.helpers=b.helpers,this.services={},this.initializers={},this.singletons={},this.rootElement="body",this.actions={id:0},this.loops=[],this.afterRender=[]}documentReady(){const a=document.querySelector(this.rootElement)||document.body;for(let a of Object.values(this.initializers))a.apply(this);return this.router=e.Router.create({__owner__:this,routes:this.routes}),this.rootNode=this.lookup("application-route"),this.rootNode.__doc__=document,this.rootNode.initializeLeaf(),this.rootNode.modelHook(),this.rootNode.leaf.render(a),window.onpopstate=()=>this.router.updateFromLocation(),this.router.updateFromLocation()}lookup(a){if(!this.singletons[a]){let b=this.components[a];this.singletons[a]=b?b.create({__name:a,tagName:a,__owner__:this}):d.RoutableComponent.create({__name:a,__owner__:this,template:"Autogenerated routable component ".concat(a," <div class=\"").concat(a,"\">{{outlet}}</div>")})}return this.singletons[a]}init(){if(~["interactive","complete"].indexOf(document.readyState))setTimeout(()=>this.documentReady(),0);else{const a=document.onreadystatechange;document.onreadystatechange=()=>{a&&a(),~["interactive","complete"].indexOf(document.readyState)&&(document.onreadystatechange=a,this.documentReady())}}}scheduleRunLoop(){this.reqid||(this.reqid=requestAnimationFrame(()=>{this.update()}))}asyncEvent(a){const b=this;return function(c){a.call(this,c),b.scheduleRunLoop()}}addAfterRender(a){this.afterRender.push(a)}update(){this.loops.pop(),this.now=Date.now(),this.reqid=null,this.rootNode.update(),this.afterRender.forEach(a=>a()),this.afterRender=[]}async ajax(a){const b=a.method||"GET",c=Object.assign({},a.headers);let d=a.url;if("GET"===b&&a.data){const b=[];for(let[c,d]of Object.entries(a.data))b.push("".concat(c,"=").concat(encodeURIComponent(d)));d+="?".concat(b.join("&"))}let e;"GET"!==b&&a.data&&(c["Content-Type"]="application/json;charset=UTF-8",e=JSON.stringify(a.data));let f;try{f=await fetch(d,{method:b,headers:c,body:e})}catch(a){throw{status:600,error:"Cannot connect to server"}}if(f.ok)return"arraybuffer"===a.responseType?await f.arrayBuffer():"raw"===a.responseType?f:await f.json();else{let a;try{a=await f.json()}catch(b){a="error not json"}const b={status:f.status,error:a};throw b}}}a.M=f}),define(10,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PGlucHV0LWNvbnRyb2wgY2xhc3M9ImZvcm0tY29udHJvbCB7e2NsYXNzfX0iIHZhbHVlPXt7dmFsdWV9fSBjaGFuZ2VBY3Rpb249e3siZm4iIG1DaGFuZ2VBY3Rpb259fSAvPg=="}mChangeAction(a){isNaN(+a)?this.changeErrorAction("Value must be a number"):this.changeErrorAction(null),this.changeAction(a)}}a.default=c}),define(11,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PGlucHV0LWNvbnRyb2wgY2xhc3M9ImZvcm0tY29udHJvbCB7e2NsYXNzfX0iIHZhbHVlPXt7dmFsdWV9fSBjaGFuZ2VBY3Rpb249e3siZm4iIG1DaGFuZ2VBY3Rpb259fSAvPg=="}mChangeAction(a){isNaN(+a)?this.changeErrorAction("Value must be a number"):this.changeErrorAction(null),this.changeAction(a)}}a.default=c}),define(12,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PGlucHV0LWNvbnRyb2wgY2xhc3M9ImZvcm0tY29udHJvbCB7e2NsYXNzfX0iIHZhbHVlPXt7dmFsdWV9fSBjaGFuZ2VBY3Rpb249e3siZm4iIG1DaGFuZ2VBY3Rpb259fSAvPg=="}mChangeAction(a){this.changeAction(a?a:a)}}a.default=c}),define(13,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.Component{constructor(){super(),this.template="PG0tdGFnIHRhZ3M9e3t2YWx1ZX19IGNsYXNzPXt7Y2xhc3N9fSBzdWdnZXN0aW9ucz17e2NvbnN0cmFpbnRzfX0gc3Vic2V0PXRydWUgYWRkQWN0aW9uPXt7ImZuIiBhZGR9fSByZW1vdmVBY3Rpb249e3siZm4iIHJlbW92ZX19IC8+"}add(a){this.value.push(a),this.changeAction(c.A.create(this.value))}remove(a){this.value.splice(this.value.indexOf(a),1),this.changeAction(c.A.create(this.value))}}a.default=d}),define(14,["exports",45,46],function(a,b,c){"use strict";function d(a){if(""===a)return"";else{const b=e.exec(a);return b?3600*(b[1]||0)+60*(b[2]||0)+1*(b[3]||0):NaN}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const e=/^\s*(?:(\d+)\s*h)?\s*(?:(\d+)\s*m)?\s*(?:(\d+)\s*s?)?\s*$/;class f extends b.Component{constructor(){super(),this.template="PGRpdiBjbGFzcz0icm93Ij4gPGRpdiBjbGFzcz0iY29sLTkiPiA8aW5wdXQtY29udHJvbCBjbGFzcz0iZm9ybS1jb250cm9sIHt7Y2xhc3N9fSIgdmFsdWU9e3t2YWx1ZX19IGNoYW5nZUFjdGlvbj17eyJmbiIgbUNoYW5nZUFjdGlvbn19IC8+IDwvZGl2PiA8ZGl2IGNsYXNzPSJjb2wtMyI+IDxpbnB1dCBjbGFzcz0iZm9ybS1jb250cm9sIHt7Y2xhc3N9fSIgdmFsdWU9e3tzaXplfX0gZGlzYWJsZWQ9dHJ1ZT4gPC9kaXY+IDwvZGl2Pg==",this.size=(0,c.computed)("value",function(){const a=d(this.value);return a?"".concat(a," seconds"):""})}mChangeAction(a){const b=d(a);isNaN(b)?this.changeErrorAction("Value must be a number with optional modifiers (e.g. 1h 30m)"):this.changeErrorAction(null),this.changeAction(a)}}a.default=f}),define(15,["exports",45,46,16],function(a,b,c,d){"use strict";var g=Math.sin,h=Math.cos,j=Math.PI,k=Math.abs;function e(a){const b=a[0],d=new Float32Array(4*a.length),e=new Float32Array(6*a.length),f=new Uint32Array(2*a.length);let g=a[0],h=a[1],[j,m]=l(g,h)||[1,0];d.set([0,0,0,0],0),e.set([1*j,1*m,1,-1*j,-1*m,-1],0),f.set([0,0],0);for(let c=1,i=a.length-1;c<i;c++){g=a[c],h=a[c+1];const[i,n]=l(g,h)||[j,m],o=j*i+m*n,[p,q]=[j+i,m+n];[j,m]=[i,n];const r=(p**2+q**2)**.5,[s,t]=r&&-.8<o?[p/r,q/r]:[i,n];let u,v,w=s*i+t*n;20.99<k(o)?(console.log("cosan fixup"),w=1,[u,v]=[i,n]):[u,v]=[s/w,t/w],d.set([g[0]-b[0],g[1]-b[1],g[0]-b[0],g[1]-b[1]],4*c),e.set([u,v,1,-u,-v,-1],6*c),f.set([c,c],2*c)}g=a[a.length-1],h=a[a.length-2],[j,m]=l(h,g)||[j,m];const o=a.length-1;return d.set([g[0]-b[0],g[1]-b[1],g[0]-b[0],g[1]-b[1]],4*o),e.set([1*j,1*m,1,-1*j,-1*m,-1],6*o),f.set([o,o],2*o),[b,d,e,f]}function f(a,b){const c=a.map(a=>a.map((b,c)=>3===c?b:a[3]*b)),d=Array.from(b,a=>c[a]),e=Float32Array.from(d.reduce((a,b)=>a.concat(b),[]));return e}Object.defineProperty(a,"__esModule",{value:!0}),a.tesselateLineStrip=e,a.default=a.lineFs=a.lineVs=void 0;a.lineVs="I3ZlcnNpb24gMzAwIGVzCiBpbiB2ZWM0IGFfcG9zaXRpb247CiBpbiB2ZWMzIGFfbm9ybWFsOwogaW4gdmVjNCBhX2NvbG9yOwoKIHVuaWZvcm0gbWF0NCB1X21hdHJpeDsKIHVuaWZvcm0gdmVjMiB1X3NjYWxlOwogdW5pZm9ybSB2ZWM0IHVfY29sb3I7Cgogb3V0IHZlYzQgdl9jb2xvcjsKIG91dCBmbG9hdCBwb3M7Cgogdm9pZCBtYWluKCkgewogZ2xfUG9zaXRpb24gPSB2ZWM0KGFfbm9ybWFsLnh5ICogdV9zY2FsZSwgMCwgMCkgKyB1X21hdHJpeCAqIGFfcG9zaXRpb247CiBwb3MgPSBhX25vcm1hbC56OwogaWYgKHVfY29sb3IudyA9PSAwLikgewogdl9jb2xvciA9IGFfY29sb3I7CiB9IGVsc2Ugewogdl9jb2xvciA9IHVfY29sb3I7CiB9CiB9";a.lineFs="I3ZlcnNpb24gMzAwIGVzCiBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCiBpbiBmbG9hdCBwb3M7CiBpbiB2ZWM0IHZfY29sb3I7CiBvdXQgdmVjNCBvdXRDb2xvcjsKCiBmbG9hdCBsaW5zdGVwKGZsb2F0IGVkZ2UwLCBmbG9hdCBlZGdlMSwgZmxvYXQgdmFsdWUpIHsKIGZsb2F0IHQgPSBjbGFtcCgodmFsdWUgLSBlZGdlMCkgLyAoZWRnZTEgLSBlZGdlMCksIDAuLCAxLik7CiByZXR1cm4gdDsKIH0KCiB2b2lkIG1haW4oKSB7CiBmbG9hdCBhcG9zID0gYWJzKHBvcyk7CgogZmxvYXQgZnAgPSAwLjI7CiBhcG9zID0gMS4gLSBsaW5zdGVwKDEuLWZwLCAxLiwgYXBvcyk7Cgogb3V0Q29sb3IgPSB2ZWM0KHZfY29sb3IueHl6ICogYXBvcywgYXBvcyk7CiB9";const l=([a,b],[c,d])=>{if(a===c&&b===d)return null;const e=b-d,f=c-a,g=(e**2+f**2)**.5;return[e/g,f/g]};class m extends b.Component{constructor(){super(),this.template=null,this.layerWorld=(0,c.computed)("timeRange","features",function(){for(let a of this.features)if(a.timecode&&a.orientation){const b=this.timeRange[1];let c=a.num-1;for(;a.timecode[c]>b&&0<c;)c--;const e=a.orientation.origins[c].concat([-.1]),f=a.orientation.rotations[c]/180*j,i=[e[0]+h(f),e[1]+g(f),e[2]],{width:k,height:l}=this.gl.canvas;let m=(0,d.identity)();return m=(0,d.multiply)(m,(0,d.perspective)(j/2,k/l,1,1e6)),m=(0,d.multiply)(m,(0,d.lookAt2)(e,i,[0,0,1])),m=(0,d.multiply)(m,(0,d.scaling)(1,1,100)),m}return null})}didInsertElement(){function a(a,b){let[c,d,h,i]=e(a);const j=g.createVertexArray(),k=g.createBuffer(),l=g.createBuffer();g.bindVertexArray(j),g.bindBuffer(g.ARRAY_BUFFER,k),g.bufferData(g.ARRAY_BUFFER,d,g.STATIC_DRAW),g.enableVertexAttribArray(p.posloc),g.vertexAttribPointer(p.posloc,2,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,l),g.bufferData(g.ARRAY_BUFFER,h,g.STATIC_DRAW),g.enableVertexAttribArray(p.norloc),g.vertexAttribPointer(p.norloc,3,g.FLOAT,!1,0,0);const{colors:m,timestamps:n,width:o}=b;if(m.length){const a=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,a),g.bufferData(g.ARRAY_BUFFER,f(m,i),g.STATIC_DRAW),g.enableVertexAttribArray(p.colloc),g.vertexAttribPointer(p.colloc,4,g.FLOAT,!1,0,0)}const q=n?Array.from(i,a=>n[a]):null,r=d.length/2;return Object.assign({vao:j,num:r,c0:c,width:o,timecode:q,vertexmap:i},p)}function b(a,b){let c,d=a[0].slice(0,-1),e=d[0];const f=new Float32Array(2*d.length);d.forEach((a,b)=>f.set([a[0]-e[0],a[1]-e[1]],2*b));const h=g.createVertexArray(),i=g.createBuffer(),j=g.createBuffer();return g.bindVertexArray(h),g.bindBuffer(g.ARRAY_BUFFER,i),g.bufferData(g.ARRAY_BUFFER,f,g.STATIC_DRAW),g.enableVertexAttribArray(x.posloc),g.vertexAttribPointer(x.posloc,2,g.FLOAT,!1,0,0),b.colors&&(g.bindBuffer(g.ARRAY_BUFFER,j),g.bufferData(g.ARRAY_BUFFER,Uint8Array.from(b.colors.reduce((a,b)=>a.concat([b[0],b[1],b[2],b[3]||255]),[])),g.STATIC_DRAW),g.enableVertexAttribArray(x.colloc),g.vertexAttribPointer(x.colloc,4,g.UNSIGNED_BYTE,!0,0,0)),c=f.length/2,Object.assign({vao:h,num:c,c0:e},x)}function c(a,b){const c=g.createVertexArray(),d=g.createBuffer();g.bindVertexArray(c),g.bindBuffer(g.ARRAY_BUFFER,d),g.bufferData(g.ARRAY_BUFFER,Float32Array.from({length:18},(a,b)=>b),g.STATIC_DRAW),g.enableVertexAttribArray(F.idxloc),g.vertexAttribPointer(F.idxloc,1,g.FLOAT,!1,0,0);return Object.assign({vao:c,num:18,count:16,radius:b,geometry:a},F)}this.add(this);const g=this.gl,h=(0,d.createProgram)(g,"I3ZlcnNpb24gMzAwIGVzCiBpbiB2ZWM0IGFfcG9zaXRpb247CiBpbiB2ZWMzIGFfbm9ybWFsOwogaW4gdmVjNCBhX2NvbG9yOwoKIHVuaWZvcm0gbWF0NCB1X21hdHJpeDsKIHVuaWZvcm0gdmVjMiB1X3NjYWxlOwogdW5pZm9ybSB2ZWM0IHVfY29sb3I7Cgogb3V0IHZlYzQgdl9jb2xvcjsKIG91dCBmbG9hdCBwb3M7Cgogdm9pZCBtYWluKCkgewogZ2xfUG9zaXRpb24gPSB2ZWM0KGFfbm9ybWFsLnh5ICogdV9zY2FsZSwgMCwgMCkgKyB1X21hdHJpeCAqIGFfcG9zaXRpb247CiBwb3MgPSBhX25vcm1hbC56OwogaWYgKHVfY29sb3IudyA9PSAwLikgewogdl9jb2xvciA9IGFfY29sb3I7CiB9IGVsc2Ugewogdl9jb2xvciA9IHVfY29sb3I7CiB9CiB9","I3ZlcnNpb24gMzAwIGVzCiBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCiBpbiBmbG9hdCBwb3M7CiBpbiB2ZWM0IHZfY29sb3I7CiBvdXQgdmVjNCBvdXRDb2xvcjsKCiBmbG9hdCBsaW5zdGVwKGZsb2F0IGVkZ2UwLCBmbG9hdCBlZGdlMSwgZmxvYXQgdmFsdWUpIHsKIGZsb2F0IHQgPSBjbGFtcCgodmFsdWUgLSBlZGdlMCkgLyAoZWRnZTEgLSBlZGdlMCksIDAuLCAxLik7CiByZXR1cm4gdDsKIH0KCiB2b2lkIG1haW4oKSB7CiBmbG9hdCBhcG9zID0gYWJzKHBvcyk7CgogZmxvYXQgZnAgPSAwLjI7CiBhcG9zID0gMS4gLSBsaW5zdGVwKDEuLWZwLCAxLiwgYXBvcyk7Cgogb3V0Q29sb3IgPSB2ZWM0KHZfY29sb3IueHl6ICogYXBvcywgYXBvcyk7CiB9"),i=g.getAttribLocation(h,"a_position"),k=g.getAttribLocation(h,"a_normal"),l=g.getAttribLocation(h,"a_color"),m=g.getUniformLocation(h,"u_matrix"),n=g.getUniformLocation(h,"u_scale"),o=g.getUniformLocation(h,"u_color"),p={program:h,posloc:i,norloc:k,colloc:l,matloc:m,scaloc:n,ucoloc:o,d(a,b,c,d,e){const{program:f,matloc:h,scaloc:i,ucoloc:j,vao:k,num:l,c0:m,ucoval:n,timecode:o,width:p}=this,[q,r]=m,s=(a[0]**2+a[1]**2+a[2]**2+a[3]**2)**.5,t=(a[4]**2+a[5]**2+a[6]**2+a[7]**2)**.5,u=(a[8]**2+a[9]**2+a[10]**2+a[11]**2)**.5;g.useProgram(f),g.bindVertexArray(k),a=a.slice(),a[12]+=s*q,a[13]+=t*r,a[14]+=u*b,g.uniformMatrix4fv(h,!1,a),g.uniform2fv(i,[p/d,p/e]),g.uniform4fv(j,n);let v=l;v&&(g.disable(g.DEPTH_TEST),g.drawArrays(g.TRIANGLE_STRIP,0,v),g.enable(g.DEPTH_TEST))}},q=(0,d.createProgram)(g,"I3ZlcnNpb24gMzAwIGVzCiBpbiB2ZWM0IGFfcG9zaXRpb247CiBpbiB2ZWMzIGFfbm9ybWFsOwogaW4gdmVjNCBhX2NvbG9yOwoKIHVuaWZvcm0gbWF0NCB1X21hdHJpeDsKIHVuaWZvcm0gdmVjMiB1X29yaWdpbjsKIHVuaWZvcm0gdmVjNCB1X2NvbG9yOwoKIG91dCB2ZWMzIHZfbm9ybWFsOwogb3V0IHZlYzQgdl9jb2xvcjsKCiB2b2lkIG1haW4oKSB7CiBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogYV9wb3NpdGlvbjsKIGdsX1BvaW50U2l6ZSA9IDMuOwogdl9ub3JtYWwgPSBhX25vcm1hbDsKIGlmICh1X2NvbG9yLncgPT0gMC4pIHsKIHZfY29sb3IgPSBhX2NvbG9yOwogfSBlbHNlIHsKIHZfY29sb3IgPSB1X2NvbG9yOwogfQogfQ==","I3ZlcnNpb24gMzAwIGVzCiBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCiBpbiB2ZWM0IHZfY29sb3I7CiBpbiB2ZWMzIHZfbm9ybWFsOwogb3V0IHZlYzQgb3V0Q29sb3I7CiB2b2lkIG1haW4oKSB7CiAvKnZlYzMgbm9ybWFsID0gbm9ybWFsaXplKHZfbm9ybWFsKTsKIGZsb2F0IGxpZ2h0ID0gZG90KG5vcm1hbCwgbm9ybWFsaXplKHZlYzMoLTEuLCAtMS4sIDEpKSk7Cgogb3V0Q29sb3IgPSB2X2NvbG9yOwogaWYgKGRvdCh2X25vcm1hbCwgdmVjMygxLiwgMS4sIDEuKSkgIT0gMC4pIHsKIG91dENvbG9yLnJnYiAqPSBsaWdodCArIDAuNzsKIH0qLwogb3V0Q29sb3IgPSB2X2NvbG9yOwogfQ=="),r=g.getAttribLocation(q,"a_position"),s=g.getAttribLocation(q,"a_normal"),t=g.getAttribLocation(q,"a_color"),u=g.getUniformLocation(q,"u_matrix"),v=g.getUniformLocation(q,"u_origin"),w=g.getUniformLocation(q,"u_color"),x={program:q,posloc:r,norloc:s,colloc:t,matloc:u,oriloc:v,ucoloc:w,d(a,b,c,e,f){const{program:h,matloc:i,ucoloc:j,vao:k,num:l,c0:m,ucoval:n,transform:o,timecode:p}=this,[q,r]=m,s=(0,d.multiply)((0,d.multiply)(a,(0,d.translation)(q,r,b)),o);g.useProgram(h),g.bindVertexArray(k),g.uniformMatrix4fv(i,!1,s),g.uniform4fv(j,n);let t=l;t&&(g.depthFunc(g.LEQUAL),g.drawArrays(g.TRIANGLE_STRIP,0,t),g.depthFunc(g.LESS))}},y=(0,d.createProgram)(g,"I3ZlcnNpb24gMzAwIGVzCiBpbiBmbG9hdCBhX2luZGV4OwoKIHVuaWZvcm0gdmVjNCB1X3Bvc2l0aW9uOwogdW5pZm9ybSBmbG9hdCB1X2NvdW50OwogdW5pZm9ybSBtYXQ0IHVfbWF0cml4OwogdW5pZm9ybSB2ZWMyIHVfc2NhbGU7CiB1bmlmb3JtIHZlYzQgdV9jb2xvcjsKCiBvdXQgdmVjNCB2X2NvbG9yOwogb3V0IGZsb2F0IHBvczsKCiB2ZWMyIHJvdChmbG9hdCBhbmdsZSkKIHsKIGZsb2F0IHMgPSBzaW4oYW5nbGUpOwogZmxvYXQgYyA9IGNvcyhhbmdsZSk7CiByZXR1cm4gdmVjMihjLCBzKTsKIH0KCiB2b2lkIG1haW4oKSB7CiBpZiAoYV9pbmRleCA9PSAwLikgewogZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIHVfcG9zaXRpb247CiBwb3MgPSAwLjsKIH0gZWxzZSB7CiBnbF9Qb3NpdGlvbiA9IHZlYzQocm90KChhX2luZGV4IC0gMS4pIC8gdV9jb3VudCkgKiB1X3NjYWxlLCAwLCAwKSArIHVfbWF0cml4ICogdV9wb3NpdGlvbjsKIHBvcyA9IDEuOwogfQogdl9jb2xvciA9IHVfY29sb3I7CiB9","I3ZlcnNpb24gMzAwIGVzCiBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCiBpbiBmbG9hdCBwb3M7CiBpbiB2ZWM0IHZfY29sb3I7CiBvdXQgdmVjNCBvdXRDb2xvcjsKCiBmbG9hdCBsaW5zdGVwKGZsb2F0IGVkZ2UwLCBmbG9hdCBlZGdlMSwgZmxvYXQgdmFsdWUpIHsKIGZsb2F0IHQgPSBjbGFtcCgodmFsdWUgLSBlZGdlMCkgLyAoZWRnZTEgLSBlZGdlMCksIDAuLCAxLik7CiByZXR1cm4gdDsKIH0KCiB2b2lkIG1haW4oKSB7CiBmbG9hdCBhcG9zID0gYWJzKHBvcyk7CgogZmxvYXQgZnAgPSAwLjE7CiBhcG9zID0gMS4gLSBsaW5zdGVwKDEuLWZwLCAxLiwgYXBvcyk7Cgogb3V0Q29sb3IgPSB2ZWM0KHZfY29sb3IueHl6ICogYXBvcywgYXBvcyk7CiB9"),z=g.getAttribLocation(y,"a_index"),A=g.getUniformLocation(y,"u_count"),B=g.getUniformLocation(y,"u_position"),C=g.getUniformLocation(y,"u_matrix"),D=g.getUniformLocation(y,"u_scale"),E=g.getUniformLocation(y,"u_color"),F={program:y,idxloc:z,cntloc:A,posloc:B,matloc:C,scaloc:D,ucoloc:E,d(a,b,c,e,f){const{program:h,cntloc:i,posloc:k,matloc:l,scaloc:m,ucoloc:n,vao:o,num:p,geometry:q,count:r,radius:s,ucoval:t}=this;g.useProgram(h),g.bindVertexArray(o);const u=(0,d.transformVector)(a,[...q.coordinates,0,1]);g.uniform4fv(k,u),g.uniform1f(i,r/(2*j)),a=(0,d.identity)(),g.uniformMatrix4fv(l,!1,a),g.uniform2fv(m,[2*s/e,2*s/f]),g.uniform4fv(n,t),g.disable(g.DEPTH_TEST),g.drawArrays(g.TRIANGLE_FAN,0,p),g.enable(g.DEPTH_TEST)}};this.features=this.model.geojson.features.map(d=>{const{geometry:e,properties:f}=d;let g,{type:h,coordinates:i}=e;if("LineString"===h)g=a(i,f);else if("Polygon"===h)g=b(i,f);else if("Circle"===h)g=c(e,e.radius,f);else if("Point"===h)g=c(e,4,f);else throw new Error("GeoJSON type ".concat(h," not supported yet"));const j=Float32Array.from(f.color.length?f.color:[1,1,1,1]);g.ucoval=f.colors&&f.colors.length?[0,0,0,0]:j.map((a,b)=>3===b?a:j[3]*a);const k=Float32Array.from(f.fillcolor.length?f.fillcolor:j.map((a,b)=>3===b?.8*a:a));g.ufcval=f.fillcolors&&f.fillcolors.length?[0,0,0,0]:k.map((a,b)=>3===b?a:k[3]*a);const{timestamps:l,rotations:m,markervertices:n}=f,o=[g];return o}).reduce((a,b)=>a.concat(b))}willRemoveElement(){this.remove(this)}glRender(){this.model.hidden||this.features.forEach((a,b)=>{a.d(this.world,-.999+this.index/16+b/65536,this.timeRange,this.width,this.height)})}}a.default=m}),define(16,["exports",45,46],function(a,b,c){"use strict";var m=Math.sin,n=Math.cos;function d(){return Array.from({length:16},(a,b)=>1&33825>>b)}function e(a,b,c){return[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]}function f(c,a){const[b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r]=c,[s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H]=a;return[s*b+t*g+u*k+v*o,s*d+t*h+u*l+v*p,s*e+t*i+u*m+v*q,s*f+t*j+u*n+v*r,w*b+x*g+y*k+z*o,w*d+x*h+y*l+z*p,w*e+x*i+y*m+z*q,w*f+x*j+y*n+z*r,A*b+B*g+C*k+D*o,A*d+B*h+C*l+D*p,A*e+B*i+C*m+D*q,A*f+B*j+C*n+D*r,E*b+F*g+G*k+H*o,E*d+F*h+G*l+H*p,E*e+F*i+G*m+H*q,E*f+F*j+G*n+H*r]}function g(c,a){const[b,d,e]=c,[f,g,h]=a;return[d*h-e*g,e*f-b*h,b*g-d*f]}function h(c,a){return[c[0]-a[0],c[1]-a[1],c[2]-a[2]]}function i(a){const[b,c,d]=a;var e=(b**2+c**2+d**2)**.5;return 1e-5<e?[b/e,c/e,d/e]:[0,0,0]}function j(a,b,c){/^#/.test(c)||(c=atob(c));const d=a.createShader(b);a.shaderSource(d,c),a.compileShader(d);const e=a.getShaderParameter(d,a.COMPILE_STATUS);if(!e)throw new Error("Error compiling \"".concat(c,"\" -- \"").concat(a.getShaderInfoLog(d),"\""));return d}function k(a,b,c){const d=a.createProgram();a.attachShader(d,j(a,a.VERTEX_SHADER,b)),a.attachShader(d,j(a,a.FRAGMENT_SHADER,c)),a.linkProgram(d);const e=a.getProgramParameter(d,a.LINK_STATUS);if(!e)throw new Error("Error linking \"".concat(b+c,"\" -- \"").concat(a.getProgramInfoLog(d),"\""));return d}function l(a){const b=a.getOwner(),c=a.gl.canvas;let d=!1,e=!1;const f=b.asyncEvent(b=>{if(!d){const{clientX:c,clientY:d}=b,{x:e,y:f,width:g,height:h}=b.target.getClientRects()[0];a.mousemove(c-e-g/2,d-f-h/2)}});c.addEventListener("mousemove",f);const g=b.asyncEvent(f=>{if(0!==f.button)return;d=!0,e=!1;let g=f.clientX,h=f.clientY;const i=b.asyncEvent(b=>{const c=b.clientX-g,d=b.clientY-h;g=b.clientX,h=b.clientY,e=!0,a.panAndZoom(c,-d,0)}),j=b.asyncEvent(b=>{if(c.removeEventListener("mousemove",i),document.removeEventListener("mouseup",j),d=!1,!e){const{clientX:c,clientY:d}=b,{x:e,y:f,width:g,height:h}=b.target.getClientRects()[0];a.click(c-e-g/2,d-f-h/2)}});c.addEventListener("mousemove",i),document.addEventListener("mouseup",j),f.stopPropagation(),f.preventDefault()});c.addEventListener("mousedown",g);const h=b.asyncEvent(b=>{const d=(c.clientWidth>>1)-b.offsetX,e=(c.clientHeight>>1)-b.offsetY;a.panAndZoom(d,-e,0>b.deltaY?-1:1),b.stopPropagation(),b.preventDefault()});c.addEventListener("wheel",h)}Object.defineProperty(a,"__esModule",{value:!0}),a.identity=d,a.inverse=function(a){const[b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r]=a,s=m*r,t=q*n,u=i*r,v=q*j,w=i*n,x=m*j,y=e*r,z=q*f,A=e*n,B=m*f,C=e*j,D=i*f,E=k*p,F=o*l,G=g*p,H=o*h,I=g*l,J=k*h,K=b*p,L=o*c,M=b*l,N=k*c,O=b*h,P=g*c,Q=s*h+v*l+w*p-(t*h+u*l+x*p),R=t*c+y*l+B*p-(s*c+z*l+A*p),S=u*c+z*h+C*p-(v*c+y*h+D*p),T=x*c+A*h+D*l-(w*c+B*h+C*l),U=1/(b*Q+g*R+k*S+o*T);return[U*Q,U*R,U*S,U*T,U*(t*g+u*k+x*o-(s*g+v*k+w*o)),U*(s*b+z*k+A*o-(t*b+y*k+B*o)),U*(v*b+y*g+D*o-(u*b+z*g+C*o)),U*(w*b+B*g+C*k-(x*b+A*g+D*k)),U*(E*j+H*n+I*r-(F*j+G*n+J*r)),U*(F*f+K*n+N*r-(E*f+L*n+M*r)),U*(G*f+L*j+O*r-(H*f+K*j+P*r)),U*(J*f+M*j+P*n-(I*f+N*j+O*n)),U*(G*m+J*q+F*i-(I*q+E*i+H*m)),U*(M*q+E*e+L*m-(K*m+N*q+F*e)),U*(K*i+P*q+H*e-(O*q+G*e+L*i)),U*(O*m+I*e+N*i-(M*i+P*m+J*e))]},a.perspective=function(a,b,c,d){const e=Math.tan(.5*(Math.PI-a)),f=1/(c-d);return[e/b,0,0,0,0,e,0,0,0,0,(c+d)*f,-1,0,0,2*(c*d*f),0]},a.orthographic=function(a,b,c,d){return[2/a,0,0,0,0,2/b,0,0,0,0,-2/(d-c),0,0,0,0,1]},a.translation=e,a.xRotation=function(a){const b=n(a),c=m(a);return[1,0,0,0,0,b,c,0,0,-c,b,0,0,0,0,1]},a.yRotation=function(a){const b=n(a),c=m(a);return[b,0,-c,0,0,1,0,0,c,0,b,0,0,0,0,1]},a.zRotation=function(a){const b=n(a),c=m(a);return[b,c,0,0,-c,b,0,0,0,0,1,0,0,0,0,1]},a.scaling=function(a,b,c){return[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]},a.multiply=f,a.cross=g,a.minus=h,a.normalize=i,a.lookAt2=function(a,b,c){const d=i(h(b,a)),j=i(g(d,c)),k=i(g(j,d)),l=[j[0],k[0],-d[0],0,j[1],k[1],-d[1],0,j[2],k[2],-d[2],0,0,0,0,1];return f(l,e(-a[0],-a[1],-a[2]))},a.transformVector=function(a,b){for(var c=[],d=0;4>d;++d){c[d]=0;for(var e=0;4>e;++e)c[d]+=b[e]*a[4*e+d]}return c},a.loadShader=j,a.createProgram=k,a.addPanAndZoomEvents=l,a.default=a.Origin=void 0;a.Origin=class{constructor(a){this.surface=a;const b=a.gl;this.program=k(b,"I3ZlcnNpb24gMzAwIGVzCiBpbiB2ZWM0IGFfcG9zaXRpb247CiBpbiB2ZWM0IGFfY29sb3I7CiBvdXQgdmVjNCB2X2NvbG9yOwoKIHVuaWZvcm0gbWF0NCB1X21hdHJpeDsKCiB2b2lkIG1haW4oKSB7CiBnbF9Qb3NpdGlvbiA9IHVfbWF0cml4ICogYV9wb3NpdGlvbjsKIHZfY29sb3IgPSBhX2NvbG9yOwogfQ==","I3ZlcnNpb24gMzAwIGVzCiBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCiBpbiB2ZWM0IHZfY29sb3I7CiBvdXQgdmVjNCBvdXRDb2xvcjsKCiB2b2lkIG1haW4oKSB7CiBvdXRDb2xvciA9IHZfY29sb3I7CiB9");const c=b.getAttribLocation(this.program,"a_position"),d=b.getAttribLocation(this.program,"a_color");this.matloc=b.getUniformLocation(this.program,"u_matrix"),this.vao=b.createVertexArray(),b.bindVertexArray(this.vao);const e=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,e),b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1]),b.STATIC_DRAW),b.enableVertexAttribArray(c),b.vertexAttribPointer(c,3,b.FLOAT,!1,0,0);const f=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,f),b.bufferData(b.ARRAY_BUFFER,new Uint8Array([1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1]),b.STATIC_DRAW),b.enableVertexAttribArray(d),b.vertexAttribPointer(d,3,b.UNSIGNED_BYTE,!1,0,0)}glRender(){const{surface:a,program:b,matloc:c,vao:d}=this,{gl:e,world:f}=a;e.useProgram(b),e.uniformMatrix4fv(c,!1,f),e.bindVertexArray(d),e.drawArrays(e.LINES,0,6)}};class o extends b.Component{constructor(){super(),this.template="PGNhbnZhcz48eWllbGQtYmxvY2sgcGFyYW1zPXt7Z2wgYWRkIHJlbW92ZSB3b3JsZH19IC8+e3tnbHlSZW5kZXJ9fTwvY2FudmFzPg==",this.children=c.A.create(),this.add=a=>this.children.push(a),this.remove=a=>this.children.splice(this.children.indexOf(a),1),this.width=0,this.height=0,this.gl=(0,c.computed)(function(){const a=this.getElement().querySelector("canvas"),b={};let c=a.getContext("webgl2",b)||a.getContext("experimental-webgl2",b);if(!c){if(c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b),!c){const b=a.getContext("2d");return a.width=a.clientWidth,a.height=a.clientHeight,b.font="48px serif",b.fillText("No WebGL 1.0 support detected",50,50,a.width-200),null}c.shaderSource=(a,b)=>(b=b.replace(/#version 300 es/,""),b=/precision/.test(b)?b.replace(/^ *in /gm,"varying ").replace(/^ *out [^;]*;/gm,"").replace(/outColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D("):b.replace(/^ *in /gm,"attribute ").replace(/^ *out /gm,"varying "),WebGLRenderingContext.prototype.shaderSource.call(c,a,b));const d=c.getExtension("OES_vertex_array_object");c.bindVertexArray=(...a)=>d.bindVertexArrayOES(...a),c.createVertexArray=(...a)=>d.createVertexArrayOES(...a)}return c}),this.dirty=(0,c.computed)("world","localDirty","children.@each.dirty",function(){return this.oldWorld===this.world?!!this.localDirty||this.children.some(a=>a.dirty):(this.oldWorld=this.world,!0)}),this.glyRender=(0,c.computed)("__owner__.now","world",function(){this.resize(),this.dirty&&this.animate()}),this.clearColor=(0,c.computed)("model.bgcolor",function(){const a=this.model&&this.model.bgcolor;if(a&&a.length){if("string"==typeof a){const b=parseInt(a.slice(1),16);return[(255&b>>16)/255,(255&b>>8)/255,(255&b)/255,1]}return a.map(a=>a/255)}return[0,0,0,1]}),this.world=d()}init(){super.init(),this.resizeCb=this.getOwner().asyncEvent(()=>this.resize())}resize(){const a=this.gl.canvas,b=window.devicePixelRatio,c=a.clientWidth*b,d=a.clientHeight*b;(a.width!==c||a.height!==d)&&(this.width=a.width=c,this.height=a.height=d)}animate(){const{gl:a}=this;a.viewport(0,0,a.canvas.width,a.canvas.height),a.clearColor(...this.clearColor),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.enable(a.DEPTH_TEST),a.enable(a.CULL_FACE),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);const b=this.getOwner().now;this.glRender(b),this.localDirty=!1,this.children.forEach(a=>{a.glRender(b),a.dirty=!1}),this.dirty=!1}glRender(){}didInsertElement(){this.getOwner().addAfterRender(()=>this.resize()),window.addEventListener("resize",this.resizeCb),l(this)}willRemoveElement(){window.removeEventListener("resize",this.resizeCb),cancelAnimationFrame(this.reqid)}mousemove(){}click(){}}a.default=o}),define(17,["exports",45,46,16],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const e=Float32Array.from([0,0,1,0,0,1,1,1]);class f extends b.Component{constructor(){function a(a){const b=a.createTexture();return a.bindTexture(a.TEXTURE_2D,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),b}super(),this.template=null,this.t=8,this.pixelSize=[-1,-1],this.scale=(0,c.computed)("t","z","model.tile",function(){const{t:a,z:b,model:{tile:{zoom:[c,d]}}}=this;return Math.min(d,Math.max(c,b-a))}),this.tileSize=(0,c.computed)("pixelSize",function(){const{t:a,pixelSize:[b,c]}=this;return[(b>>a)+(0<b%(1<<a))+1,(c>>a)+(0<c%(1<<a))+1]}),this.tileOffset=(0,c.computed)("scale","pos","tileSize",function(){const{scale:a,pos:[b,c],tileSize:[d,e]}=this;return[0|b*2**a-(d-1)/2,0|(1-c)*2**a-(e-1)/2]}),this.urls=(0,c.computed)("model.tile.url",function(){const a=this.model.tile.url;let b=[];return /\[abc\]/.test(a)?(b.push(a.replace("[abc]","a")),b.push(a.replace("[abc]","b")),b.push(a.replace("[abc]","c"))):b.push(a),b});const b=c.A.create();this.tiles=(0,c.computed)("urls","z","tileOffset","tileSize",function(){const{scale:c,gl:d,tileOffset:[f,g],tileSize:[k,i],urls:e}=this,h=b.slice(),l=[];for(let a=0;a<i;a++)for(let b=0;b<k;b++){const d=e[(a*k+b)%e.length].replace("{z}",c).replace("{x}",f+b).replace("{y}",g+a),i=d.split("/").slice(-3).join("/"),j=h.find(a=>a.key===i);if(j)h.splice(h.indexOf(j),1),l.push(j);else{l.push({texture:null,url:d,key:i,loaded:!1})}}return l.filter(a=>!a.texture).forEach(b=>{if(h.length){const a=h.pop();b.texture=a.texture,a.texture=null}else b.texture=a(d);d.bindTexture(d.TEXTURE_2D,b.texture),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,1,1,0,d.RGBA,d.UNSIGNED_BYTE,new Uint8Array([.8,.8,.8,1]));const c=new Image;c.addEventListener("load",this.getOwner().asyncEvent(()=>{b.texture&&(d.bindTexture(d.TEXTURE_2D,b.texture),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,c),b.loaded=!0)})),c.crossOrigin="",c.src=b.url}),h.forEach(a=>{d.deleteTexture(a.texture),a.texture=null}),b.splice.call(b,0,b.length,...l),b.map(a=>a.texture)}),this.dirty=(0,c.computed)("tiles","tileStore.@each.loaded",function(){return!0})}didInsertElement(){this.add(this);const{gl:a}=this,b=this.program=(0,d.createProgram)(a,"I3ZlcnNpb24gMzAwIGVzCiBpbiB2ZWM0IGFfcG9zaXRpb247CiBpbiB2ZWMyIGFfdGV4Y29vcmQ7CgogdW5pZm9ybSBtYXQ0IHVfbWF0cml4OwoKIG91dCB2ZWMyIHZfdGV4Y29vcmQ7Cgogdm9pZCBtYWluKCkgewogZ2xfUG9zaXRpb24gPSB1X21hdHJpeCAqIGFfcG9zaXRpb247CiB2X3RleGNvb3JkID0gdmVjMihhX3Bvc2l0aW9uLngsIDEuLWFfcG9zaXRpb24ueSk7CiB9","I3ZlcnNpb24gMzAwIGVzCiBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCiBpbiB2ZWMyIHZfdGV4Y29vcmQ7CiB1bmlmb3JtIHNhbXBsZXIyRCB1X3RleHR1cmU7CiBvdXQgdmVjNCBvdXRDb2xvcjsKCiB2b2lkIG1haW4oKSB7CiBvdXRDb2xvciA9IHRleHR1cmUodV90ZXh0dXJlLCB2X3RleGNvb3JkKTsKIH0="),c=a.getAttribLocation(b,"a_position");this.matloc=a.getUniformLocation(b,"u_matrix"),this.texloc=a.getUniformLocation(b,"u_texture");const f=this.vao=a.createVertexArray();a.bindVertexArray(f);const g=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,g),a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,e,a.STATIC_DRAW)}willRemoveElement(){this.remove(this)}glRender(){if(this.model.hidden)return;const{pixelSize:[j,k],gl:a,program:b,vao:c,scale:e,world:f,tileOffset:[l,m],tileSize:[n,o],tiles:g,matloc:i}=this,{width:h,height:p}=a.canvas;(h!==j||p!==k)&&(this.pixelSize=[h,p]);const q=2**-e,r=(0,d.multiply)(f,(0,d.scaling)(q,q,1));a.useProgram(b),a.bindVertexArray(c);for(let b=0,c=l,e=1/q-(m+1);b<n;b+=1,c+=1,e+=o)for(let f=0;f<o;f+=1,e-=1)a.uniformMatrix4fv(i,!1,(0,d.multiply)(r,(0,d.translation)(c,e,-.9999))),a.bindTexture(a.TEXTURE_2D,g[b+f*n]),a.drawArrays(a.TRIANGLE_STRIP,0,4)}}a.default=f}),define(18,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.RoutableComponent{constructor(){super(),this.template="e3sjaWYgYXBwLmFjbC5jb2xsZWN0aW9ufX0ge3tvYnN9fSB7e2Vsc2V9fSA8ZGl2IGNsYXNzPSJqdW1ib3Ryb24iPiA8aDEgY2xhc3M9InRleHQtY2VudGVyIj4gPHdpZGdldC1pY29uIGdseXBoPSJsaXN0IiBjbGFzcz0id2lkZ2V0LWljb24tbGciIC8+IDwvaDE+IDxwIGNsYXNzPSJ0ZXh0LWNlbnRlciI+U2lnbiBpbiB0byBzZWUgeW91ciBjb2xsZWN0aW9uczwvcD4gPC9kaXY+IHt7L2lmfX0=",this.app=(0,c.computed)(function(){return this.getOwner().lookup("application-route")}),this.obs=(0,c.computed)("app.model",function(){this.didEnter()})}didEnter(){if(this.app.model.collections){const a=this.app.model.collections.default;this.transitionTo({route:"collection",models:[{id:a,fake:!0}]})}}}a.default=d}),define(19,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.Component{constructor(){super(),this.template="PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjbGFzcz17e2NsYXNzfX0gZGlzYWJsZWQ9e3siaWYiIGRpc2FibGVkICJkaXNhYmxlZCIgdW5kZWZpbmVkfX0gY2hlY2tlZD17e21WYWx1ZX19IHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImNoYW5nZSIgb249ImNoYW5nZSIpfX0gPg==",this.mValue=(0,c.computed)("value",function(){const a=this.getElement();return a.checked=this.value,this.value})}change(){const a=this.getElement(),b=a.checked;this.changeAction(b)}}a.default=d}),define(2,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.RoutableComponent{constructor(){super(),this.template="e3sjaWYgaW5zZWN1cmV9fSA8ZGl2IGNsYXNzPSJhbGVydCBhbGVydC1kYW5nZXIgdW5lbmNyeXB0ZWQiIHJvbGU9ImFsZXJ0Ij5Zb3VyIE1BUlYgaW5zdGFsbGF0aW9uIGlzIG5vdCBzZWN1cmVkLiBQbGVhc2UgbWFrZSBzdXJlIHlvdXIgd2Vic2VydmVyIHNlcnZlcyBNQVJWIG92ZXIgYW4gZW5jcnlwdGVkIGh0dHBzIGNvbm5lY3Rpb24uPC9kaXY+IHt7ZWxzZX19IDxkaXYgY2xhc3M9ImFwcCI+IDxuYXYgY2xhc3M9Im5hdmJhciBuYXZiYXItZXhwYW5kLXNtIG5hdmJhci1kYXJrIj4gPGxpbmstdG8gaHJlZj0iLyIgY2xhc3M9Im5hdmJhci1icmFuZCI+PGltZyBzcmM9Int7bWFydkxvZ299fSIgYWx0PSJNQVJWIFJvYm90aWNzIiB3aWR0aD0xMDA+PC9saW5rLXRvPiA8YnV0dG9uIGNsYXNzPSJuYXZiYXItdG9nZ2xlciIgdHlwZT0iYnV0dG9uIiBkYXRhLXRvZ2dsZT0iY29sbGFwc2UiIGRhdGEtdGFyZ2V0PSIjbmF2YmFyU3VwcG9ydGVkQ29udGVudCIgYXJpYS1jb250cm9scz0ibmF2YmFyU3VwcG9ydGVkQ29udGVudCIgYXJpYS1leHBhbmRlZD0iZmFsc2UiIGFyaWEtbGFiZWw9IlRvZ2dsZSBuYXZpZ2F0aW9uIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICgic2V0dGVyIiAoInBhdGgiIG5hdmJhck9wZW4pICgibm90IiBuYXZiYXJPcGVuKSkpfX0+IDxzcGFuIGNsYXNzPSJuYXZiYXItdG9nZ2xlci1pY29uIj48L3NwYW4+IDwvYnV0dG9uPiA8ZGl2IGNsYXNzPSJjb2xsYXBzZSBuYXZiYXItY29sbGFwc2Uge3siaWYiIG5hdmJhck9wZW4gInNob3cifX0iIGlkPSJuYXZiYXJTdXBwb3J0ZWRDb250ZW50Ij4gPHVsIGNsYXNzPSJuYXZiYXItbmF2IG1yLWF1dG8iPiB7eyNpZiBhY2wuY29sbGVjdGlvbn19IDxsaSBjbGFzcz0ibmF2LWl0ZW0gZHJvcGRvd24ge3siaWYiIGNvbGxlY3Rpb25zT3BlbiAic2hvdyJ9fSI+IDxhIGNsYXNzPSJuYXYtbGluayBkcm9wZG93bi10b2dnbGUiIHJvbGU9ImJ1dHRvbiIgaHJlZj0iIyIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiB0b2dnbGVDb2xsZWN0aW9uQ29sbGFwc2UpfX0+Q29sbGVjdGlvbiB7eyNpZiBhY3RpdmVDb2xsZWN0aW9ufX0oPGI+e3thY3RpdmVDb2xsZWN0aW9ufX08L2I+KXt7L2lmfX08c3BhbiBjbGFzcz0iY2FyZXQiPjwvc3Bhbj48L2E+IDxkaXYgY2xhc3M9ImRyb3Bkb3duLW1lbnUge3siaWYiIGNvbGxlY3Rpb25zT3BlbiAic2hvdyJ9fSI+IHt7I2VhY2ggbW9kZWwuY29sbGVjdGlvbnMuaXRlbXMgYXMgfGl0ZW18fX0gPGEgaHJlZj0iIy9jb2xsZWN0aW9uL3t7aXRlbS5pZH19IiBjbGFzcz0iZHJvcGRvd24taXRlbSB7eyJpZiIgKCJpcy1lcXVhbCIgaXRlbS5pZCBhY3RpdmVDb2xsZWN0aW9uKSAiYWN0aXZlIn19IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJvcGVuQ29sbGVjdGlvbiIgaXRlbS5pZCl9fT4ge3tpdGVtLnRpdGxlfX0gPC9hPiB7ey9lYWNofX0gPC9kaXY+IDwvbGk+IHt7L2lmfX0ge3sjZWFjaCBvd25lci5oZWFkZXJsaW5rcyBhcyB8cm91dGV8fX0gPGxpIGNsYXNzPSJuYXYtaXRlbSI+IDxsaW5rLXRvIGNsYXNzPSJuYXYtbGluayIgaHJlZj0ie3tyb3V0ZS5yb3V0ZX19Ij57e3JvdXRlLnRleHR9fTwvbGluay10bz4gPC9saT4ge3svZWFjaH19IHt7I2lmIGFjbC5hZG1pbn19IDxsaSBjbGFzcz0ibmF2LWl0ZW0iPiA8bGluay10byBjbGFzcz0ibmF2LWxpbmsiIGhyZWY9ImFkbWluIj48d2lkZ2V0LWljb24gY2xhc3M9ImJhc2VsaW5lIiBjb2xvcj0id2hpdGUiIGdseXBoPSJ3cmVuY2giIC8+PC9saW5rLXRvPiA8L2xpPiB7ey9pZn19IDwvdWw+IDxmb3JtIGNsYXNzPSJmb3JtLWlubGluZSI+IDxidXR0b24gaWQ9InNpZ25pbiIgY2xhc3M9ImJ0biBidG4tb3V0bGluZS1saWdodCBidG4tc20iIHR5cGU9ImJ1dHRvbiIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAoImlmIiB1c2VyICgiZm4iIHNldFNlc3Npb25pZCBudWxsKSAib3BlblNpZ25pbiIpKX19PlNpZ24ge3sjaWYgdXNlcn19b3V0IDxzdHJvbmc+e3t1c2VyfX08L3N0cm9uZz57e2Vsc2V9fWlue3svaWZ9fTwvYnV0dG9uPiA8L2Zvcm0+IDwvZGl2PiA8L25hdj4gPCEtLSA8ZGl2IGNsYXNzPSJwYWNlIHBhY2UtYWN0aXZlIj4gPGRpdiBjbGFzcz0icGFjZS1wcm9ncmVzcyIgZGF0YS1wcm9ncmVzcz0ie3tvd25lci54aHJQcm9ncmVzc319IiBkYXRhLXByb2dyZXNzLXRleHQ9Int7b3duZXIueGhyUHJvZ3Jlc3N9fSUiIHN0eWxlPSJ0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKHt7b3duZXIueGhyUHJvZ3Jlc3N9fSUsIDBweCwgMHB4KTsiPiA8ZGl2IGNsYXNzPSJwYWNlLXByb2dyZXNzLWlubmVyIj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYWNlLWFjdGl2aXR5Ij48L2Rpdj4gPC9kaXY+IC0tPiA8ZGl2IGNsYXNzPSJjb250YWluZXItZmx1aWQgbWFpbiI+IHt7I2lmIG93bmVyLmFqYXhFcnJvcn19IDxkaXYgY2xhc3M9ImFsZXJ0IGFsZXJ0LWRhbmdlciIgcm9sZT0iYWxlcnQiPiA8c3Ryb25nPlJlcXVlc3QgZmFpbGVkOjwvc3Ryb25nPiB7e293bmVyLmFqYXhFcnJvcn19IDwvZGl2PiB7ey9pZn19IHt7I2lmICgiYW5kIiByZWxlYXNlcy5sZW5ndGggKCJpcy1ncmVhdGVyIiByZWxlYXNlcy4wLnZlcnNpb24gdmVyc2lvbikpfX0gPGgyPiBVcGRhdGUgYXZhaWxhYmxlIDxzbWFsbD4oPGEgcm9sZT0iYnV0dG9uIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICgic2V0dGVyIiAoInBhdGgiIHNob3dVcGRhdGVzKSAoIm5vdCIgc2hvd1VwZGF0ZXMpKSl9fT52ZXJzaW9uIHt7cmVsZWFzZXMuMC52ZXJzaW9ufX08L2E+KTwvc21hbGw+IDwvaDI+IHt7I2lmIHNob3dVcGRhdGVzfX0gPGRpdiBjbGFzcz0iY2FyZCI+IDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+IDxkaXYgY2xhc3M9InJlbGVhc2VzIj4ge3sjZWFjaCByZWxlYXNlcyBhcyB8cmVsZWFzZXx9fSA8ZGl2IGNsYXNzPSJyZWxlYXNlIj4gPGZpZWxkc2V0PiA8bGVnZW5kPiB7e3JlbGVhc2UudmVyc2lvbn19IDxzcGFuIGNsYXNzPSJkYXRlIj4tIDxzcGFuIHRpdGxlPXt7cmVsZWFzZS5kYXRlfX0+e3tyZWxlYXNlLmRhdGV9fTwvc3Bhbj48L3NwYW4+IHt7I2lmICgiaXMtZXF1YWwiIHJlbGVhc2UudmVyc2lvbiB2ZXJzaW9uKX19IDxzcGFuIGNsYXNzPSJzdGF0dXMgdGV4dC13aGl0ZSBiZy1zdWNjZXNzIj4gSW5zdGFsbGVkIDwvc3Bhbj4ge3svaWZ9fSA8L2xlZ2VuZD4ge3sjZWFjaCByZWxlYXNlLmNoYW5nZXMgYXMgfGNoYW5nZXx9fSA8ZGl2IGNsYXNzPSJjaGFuZ2UiPiA8c3BhbiBjbGFzcz0idGV4dC13aGl0ZSBiZy17eygiaWYiICgiaXMtZXF1YWwiIGNoYW5nZS50eXBlICJmaXgiKSAiaW5mbyIgInN1Y2Nlc3MiKX19Ij57e2NoYW5nZS50eXBlfX08L3NwYW4+IHt7Y2hhbmdlLnRpdGxlfX0gPC9kaXY+IHt7L2VhY2h9fSA8L2ZpZWxkc2V0PiA8L2Rpdj4ge3svZWFjaH19IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IHt7L2lmfX0ge3svaWZ9fSA8d2lkZ2V0LXdhaXRpbmcgaWNvbj0ibG9jay1sb2NrZWQiIGFjbD10cnVlIHVzZXI9e3t1c2VyfX0gZTQwMT0iU2lnbiBpbiB0byBhY2Nlc3Mgc2l0ZSIgZTQwMz0iVXNlciB7e3VzZXJ9fSBpcyBub3QgcGVybWl0dGVkIHRvIGVudGVyIHRoaXMgc2l0ZSI+IHt7b3V0bGV0fX0gPC93aWRnZXQtd2FpdGluZz4gPC9kaXY+IDx3aWRnZXQtbW9kYWwgb3Blbj17e3NpZ25pbk9wZW59fSBzZXRPcGVuPXt7InNldHRlciIgKCJwYXRoIiBzaWduaW5PcGVuKX19IHRpdGxlPSJTaWduIGluIiBhcz0idGFyZ2V0Ij4ge3sjaWYgKCJpcy1lcXVhbCIgdGFyZ2V0ICJib2R5Iil9fSA8dWwgY2xhc3M9Im5hdiBuYXYtdGFicyI+IDxsaSBjbGFzcz0ibmF2LWl0ZW0iPiA8YSBjbGFzcz0ibmF2LWxpbmsge3siaWYiICgiaXMtZXF1YWwiIHJlYWxtICJtYXJ2IikgImFjdGl2ZSJ9fSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAoInNldHRlciIgKCJwYXRoIiByZWFsbSkgIm1hcnYiKSl9fT5NQVJWPC9hPiA8L2xpPiB7eyNlYWNoIG1vZGVsLnJlYWxtcyBhcyB8cnx9fSA8bGkgY2xhc3M9Im5hdi1pdGVtIj4gPGEgY2xhc3M9Im5hdi1saW5rIHt7ImlmIiAoImlzLWVxdWFsIiByZWFsbSByKSAiYWN0aXZlIn19IiB7eyJhY3Rpb24iICgic2V0dGVyIiAoInBhdGgiIHJlYWxtKSByKX19Pnt7cn19PC9hPiA8L2xpPiB7ey9lYWNofX0gPC91bD4gPHA+IDwvcD4gPGRpdiBjbGFzcz0idGFiLWNvbnRlbnQiPiA8ZGl2IHJvbGU9InRhYnBhbmVsIiBjbGFzcz0idGFiLXBhbmUgYWN0aXZlIj4ge3sjaWYgKCJpcy1lcXVhbCIgcmVhbG0gIm1hcnYiKX19IDxmb3JtIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInNpZ25pbiIgb249InN1Ym1pdCIpfX0+IDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPiA8bGFiZWw+VXNlcm5hbWU8L2xhYmVsPiA8aW5wdXQtY29udHJvbCBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0idXNlcm5hbWUiIHZhbHVlPXt7dXNlcm5hbWV9fSBjaGFuZ2VBY3Rpb249e3sic2V0dGVyIiAoInBhdGgiIHVzZXJuYW1lKX19IC8+IDwvZGl2PiA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4gPGxhYmVsPlBhc3N3b3JkPC9sYWJlbD4gPGlucHV0LWNvbnRyb2wgdHlwZT0icGFzc3dvcmQiIGNsYXNzPSJmb3JtLWNvbnRyb2wge3siaWYiIHBhc3N3b3JkX2Vycm9yICJpcy1pbnZhbGlkIn19IiBwbGFjZWhvbGRlcj0icGFzc3dvcmQiIHZhbHVlPXt7cGFzc3dvcmR9fSBjaGFuZ2VBY3Rpb249e3sic2V0dGVyIiAoInBhdGgiIHBhc3N3b3JkKX19IC8+IDxkaXYgY2xhc3M9ImludmFsaWQtZmVlZGJhY2siPiB7e3Bhc3N3b3JkX2Vycm9yfX0gPC9kaXY+IDwvZGl2PiA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCI+U2lnbiBpbjwvYnV0dG9uPiA8L2Zvcm0+IHt7ZWxzZX19IDxhdXRoLW8yIHJlYWxtPSJ7e3JlYWxtfX0iIGF1dGhFbmRwb2ludD17eyJmbiIgYXV0aEVuZHBvaW50fX0gYXV0aENvbXBsZXRlPXt7ImZuIiBhdXRoQ29tcGxldGV9fSAvPiB7ey9pZn19IDwvZGl2PiA8L2Rpdj4ge3tlbHNlfX0ge3svaWZ9fSA8L3dpZGdldC1tb2RhbD4gPHdpZGdldC1tb2RhbCBvcGVuPXt7YXBpRXJyb3J9fSBzZXRPcGVuPXt7InNldHRlciIgKCJwYXRoIiBhcGlFcnJvcil9fSB0aXRsZT0iT3BlcmF0aW9uIGZhaWxlZCIgYXM9InRhcmdldCI+IHt7I2lmICgiaXMtZXF1YWwiIHRhcmdldCAiYm9keSIpfX0gPGRpdj5TdGF0dXM6IDxiPnt7YXBpRXJyb3Iuc3RhdHVzfX08L2I+PC9kaXY+IDxkaXY+UmVhc29uOiA8Yj57e2FwaUVycm9yLmVycm9yfX08L2I+PC9kaXY+IHt7ZWxzZX19IDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICgic2V0dGVyIiAoInBhdGgiIGFwaUVycm9yKSBmYWxzZSkpfX0+RGlzbWlzczwvYnV0dG9uPiB7ey9pZn19IDwvd2lkZ2V0LW1vZGFsPiA8bmF2IGNsYXNzPSJuYXZiYXIgbmF2YmFyLWV4cGFuZC1zbSBuYXZiYXItZGFyayI+IDxhIGNsYXNzPSJuYXZiYXItYnJhbmQgZm9vdGVyIiBocmVmPSJodHRwczovL3Rlcm5hcmlzLmNvbSIgcmVsPSJub29wZW5lciIgdGFyZ2V0PV9ibGFuaz48aW1nIHNyYz0ie3t0ZXJuYXJpc0xvZ299fSIgYWx0PSJURVJOQVJJUyIgd2lkdGg9MTAwPjwvYT4gPHVsIGNsYXNzPSJuYXZiYXItbmF2IG1yLWF1dG8iPiB7eyNlYWNoIG93bmVyLmZvb3RlcmxpbmtzIGFzIHxsaW5rfH19IDxsaSBjbGFzcz0ibmF2LWl0ZW0iPiA8YSBjbGFzcz0ibmF2LWxpbmsiIGhyZWY9Int7bGluay5ocmVmfX0iIHJlbD0ibm9vcGVuZXIiIHRhcmdldD1fYmxhbms+e3tsaW5rLnRleHR9fTwvYT4gPC9saT4ge3svZWFjaH19IHt7I2VhY2ggb3duZXIuZm9vdGVycm91dGVzIGFzIHxyb3V0ZXx9fSA8bGkgY2xhc3M9Im5hdi1pdGVtIj4gPGxpbmstdG8gY2xhc3M9Im5hdi1saW5rIiBocmVmPSJ7e3JvdXRlLnJvdXRlfX0iPnt7cm91dGUudGV4dH19PC9saW5rLXRvPiA8L2xpPiB7ey9lYWNofX0gPC91bD4gPHNwYW4gY2xhc3M9Im5hdmJhci10ZXh0Ij4gdmVyc2lvbiB7e3ZlcnNpb259fSB7eyNpZiBvd25lci5saWNlbnNlfX0gKDxzcGFuIGNsYXNzPSJkcm9wdXAge3siaWYiIGxpY2Vuc2VPcGVuICJzaG93In19Ij4gPGEgY2xhc3M9ImRyb3Bkb3duLXRvZ2dsZSBuYXZiYXItbGluayIgcm9sZT0iYnV0dG9uIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICgic2V0dGVyIiAoInBhdGgiIGxpY2Vuc2VPcGVuKSAoImlmIiBvd25lci5saWNlbnNlLmV4cGlyZXMgKCJub3QiIGxpY2Vuc2VPcGVuKSkpKX19ID4gPHNwYW4gY2xhc3M9Int7ImlmIiAoIm9yIiAoImlzLXBhc3QiIG93bmVyLmxpY2Vuc2UuZXhwaXJlcykgKCJub3QiICgib3IiICgiY29udGFpbnMiIG93bmVyLmxpY2Vuc2UuaG9zdG5hbWVzIGhvc3RuYW1lKSBpc0xvY2FsaG9zdCkpKSAidGV4dC1kYW5nZXIiICJ0ZXh0LXdoaXRlIn19Ij4ge3tvd25lci5saWNlbnNlLmxpY2Vuc2VlfX0gPHdpZGdldC1pY29uIGNsYXNzPSJiYXNlbGluZSIgZ2x5cGg9Int7ImlmIiAoIm9yIiAoImlzLXBhc3QiIG93bmVyLmxpY2Vuc2UuZXhwaXJlcykgKCJub3QiICgib3IiICgiY29udGFpbnMiIG93bmVyLmxpY2Vuc2UuaG9zdG5hbWVzIGhvc3RuYW1lKSBpc0xvY2FsaG9zdCkpKSAid2FybmluZyIgInNoaWVsZCJ9fSIgLz4gPC9zcGFuPiA8L2E+IDx1bCBjbGFzcz0iZHJvcGRvd24tbWVudSBkcm9wZG93bi1tZW51LXJpZ2h0IHt7ImlmIiBsaWNlbnNlT3BlbiAic2hvdyJ9fSI+IDxoNiBjbGFzcz0iZHJvcGRvd24taGVhZGVyIj4gTGljZW5zZWU6IDxzdHJvbmc+e3tvd25lci5saWNlbnNlLmxpY2Vuc2VlfX08L3N0cm9uZz4gPC9oNj4gPGg2IGNsYXNzPSJkcm9wZG93bi1oZWFkZXIiPiBUeXBlOiA8c3Ryb25nPnt7b3duZXIubGljZW5zZS50eXBlfX08L3N0cm9uZz4gPC9oNj4gPGg2IGNsYXNzPSJkcm9wZG93bi1oZWFkZXIiPiB7eyNpZiAoImlzLXBhc3QiIG93bmVyLmxpY2Vuc2UuZXhwaXJlcyl9fSBFeHBpcmVkOiA8c3Ryb25nIGNsYXNzPSJ0ZXh0LWRhbmdlciI+e3soImZvcm1hdC1kYXRlIiBvd25lci5saWNlbnNlLmV4cGlyZXMpfX08L3N0cm9uZz4ge3tlbHNlfX0gRXhwaXJlczogPHN0cm9uZz57eygiZm9ybWF0LWRhdGUiIG93bmVyLmxpY2Vuc2UuZXhwaXJlcyl9fTwvc3Ryb25nPiB7ey9pZn19IDwvaDY+IDxoNiBjbGFzcz0iZHJvcGRvd24taGVhZGVyIj4ge3sjaWYgKCJub3QiICgib3IiICgiY29udGFpbnMiIG93bmVyLmxpY2Vuc2UuaG9zdG5hbWVzIGhvc3RuYW1lKSBpc0xvY2FsaG9zdCkpfX0gSG9zdG5hbWVzOiA8c3Ryb25nIGNsYXNzPSJ0ZXh0LWRhbmdlciI+e3sjZWFjaCBvd25lci5saWNlbnNlLmhvc3RuYW1lcyBhcyB8bmFtZXx9fXt7bmFtZX19IHt7L2VhY2h9fTwvc3Ryb25nPiB7e2Vsc2V9fSBIb3N0bmFtZXM6IDxzdHJvbmc+e3sjZWFjaCBvd25lci5saWNlbnNlLmhvc3RuYW1lcyBhcyB8bmFtZXx9fXt7bmFtZX19IHt7L2VhY2h9fTwvc3Ryb25nPiB7ey9pZn19IDwvaDY+IHt7I2lmIG93bmVyLmxpY2Vuc2UuZGV0YWlsc319IDxoNiBjbGFzcz0iZHJvcGRvd24taGVhZGVyIj4gRGV0YWlsczoge3soImZvcm1hdC1odG1sIiBvd25lci5saWNlbnNlLmRldGFpbHMpfX0gPC9oNj4ge3svaWZ9fSA8L3VsPiA8L3NwYW4+KSB7ey9pZn19IDwvc3Bhbj4gPC9uYXY+IDwvZGl2PiB7ey9pZn19",this.ternarisLogo="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkViZW5lXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSI2NHB4IiBoZWlnaHQ9IjEycHgiIHZpZXdCb3g9IjAgMCA2NCAxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNjQgMTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkZGRkZGO30KPC9zdHlsZT4KPGc+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNC4xLDNIMS4zVjEuMkg5VjNINi4zdjcuOEg0LjFWM3oiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik05LjgsMS4yaDYuM1YzaC00djEuOWgzLjR2MS44aC0zLjRWOWg0LjF2MS44SDkuOFYxLjJ6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjIuOCwxMC44bC0xLjktMy41aC0xLjJ2My41aC0yLjNWMS4ySDIxYzIuMSwwLDMuOSwwLjcsMy45LDNjMCwxLjQtMC43LDIuMy0xLjgsMi44bDIuMiwzLjlMMjIuOCwxMC44CgkJTDIyLjgsMTAuOHogTTE5LjcsNS42aDEuMWMxLjIsMCwxLjgtMC41LDEuOC0xLjRTMjIsMi45LDIwLjgsMi45aC0xLjFDMTkuNywyLjksMTkuNyw1LjYsMTkuNyw1LjZ6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjYuMSwxLjJoMi4zTDMxLDZsMSwyLjFsMCwwYy0wLjEtMS0wLjMtMi40LTAuMy0zLjVWMS4yaDIuMXY5LjZoLTIuM0wyOSw2bC0xLTIuMWgtMC4xCgkJQzI4LDUsMjguMiw2LjMsMjguMiw3LjR2My40SDI2VjEuMkgyNi4xeiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQwLjEsOC41SDM3bC0wLjYsMi4zaC0yLjNsMy4xLTkuNkg0MGwzLjEsOS42aC0yLjRMNDAuMSw4LjV6IE0zOS43LDYuOGwtMC4yLTAuOWMtMC4zLTEtMC41LTIuMS0wLjgtMy4xCgkJaC0wLjFjLTAuMiwxLTAuNSwyLjEtMC44LDMuMWwtMC4yLDAuOUgzOS43eiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ4LjgsMTAuOGwtMS45LTMuNWgtMS4ydjMuNWgtMi4zVjEuMkg0N2MyLjEsMCwzLjksMC43LDMuOSwzYzAsMS40LTAuNywyLjMtMS44LDIuOGwyLjIsMy45TDQ4LjgsMTAuOAoJCUw0OC44LDEwLjh6IE00NS43LDUuNmgxLjFjMS4yLDAsMS44LTAuNSwxLjgtMS40UzQ4LDIuOSw0Ni44LDIuOWgtMS4xVjUuNnoiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01Mi4xLDEuMmgyLjN2OS42aC0yLjNWMS4yeiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTU2LjUsOC4xYzAuNywwLjYsMS42LDEsMi40LDFjMC45LDAsMS40LTAuNCwxLjQtMC45YzAtMC42LTAuNi0wLjgtMS40LTEuMmwtMS4zLTAuNWMtMS0wLjQtMi0xLjItMi0yLjYKCQljMC0xLjYsMS41LTIuOSwzLjUtMi45YzEuMSwwLDIuNCwwLjQsMy4yLDEuM2wtMS4xLDEuNGMtMC43LTAuNS0xLjMtMC44LTIuMS0wLjhzLTEuMywwLjMtMS4zLDAuOXMwLjcsMC44LDEuNSwxLjFsMS4zLDAuNQoJCWMxLjIsMC41LDIsMS4zLDIsMi42YzAsMS42LTEuNCwzLTMuNywzYy0xLjMsMC0yLjctMC41LTMuNy0xLjRMNTYuNSw4LjF6Ii8+CjwvZz4KPC9zdmc+Cg==",this.marvLogo="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkViZW5lXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSI3MHB4IiBoZWlnaHQ9IjM1cHgiIHZpZXdCb3g9IjAgMCA3MCAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNzAgMzU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkZGRkZGO30KPC9zdHlsZT4KPGc+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTAuMiw2LjdIMTNsMS42LDQuM2wwLjYsMS43aDAuMWwwLjYtMS43bDEuNi00LjNoMi44djEwLjRoLTIuNlYxNGMwLTEuMSwwLjItMi43LDAuNC0zLjdIMThsLTAuOSwyLjQKCQlsLTEuNCwzLjVoLTFsLTEuNC0zLjVsLTAuOC0yLjRoLTAuMWMwLjEsMSwwLjQsMi43LDAuNCwzLjd2My4xaC0yLjVWNi43SDEwLjJ6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjcuNiwxNC45aC0yLjlsLTAuNSwyLjJoLTIuOGwzLjItMTAuNGgzLjNMMzEsMTcuMWgtMi45TDI3LjYsMTQuOXogTTI3LjEsMTIuOGwtMC4yLTAuNwoJCWMtMC4zLTEtMC41LTIuMy0wLjgtMy4zSDI2Yy0wLjIsMS4xLTAuNSwyLjMtMC43LDMuM2wtMC4yLDAuN0gyNy4xeiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTM3LjcsMTcuMWwtMS44LTMuNWgtMS4xdjMuNUgzMlY2LjdoNGMyLjIsMCw0LjIsMC44LDQuMiwzLjRjMCwxLjUtMC43LDIuNS0xLjcsM2wyLjMsNEgzNy43eiBNMzQuOCwxMS41aDEKCQljMS4xLDAsMS43LTAuNSwxLjctMS40cy0wLjYtMS4yLTEuNy0xLjJoLTFWMTEuNXoiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MC42LDYuN2gyLjlsMS4xLDQuNWMwLjMsMS4xLDAuNSwyLjIsMC44LDMuM2gwLjFjMC4zLTEuMSwwLjUtMi4yLDAuOC0zLjNsMS4xLTQuNWgyLjhMNDcsMTcuMWgtMy4zCgkJTDQwLjYsNi43eiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTE0LjQsMjguMWwtMS45LTMuM2gtMS40djMuM2gtMXYtNy45aDIuNWMxLjYsMCwyLjcsMC42LDIuNywyLjJjMCwxLjItMC43LDItMS44LDIuMmwyLDMuNEwxNC40LDI4LjEKCQlMMTQuNCwyOC4xeiBNMTEuMSwyNGgxLjNjMS4yLDAsMS45LTAuNSwxLjktMS41cy0wLjctMS40LTEuOS0xLjRoLTEuM1YyNHoiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNi40LDI0LjJjMC0yLjUsMS40LTQsMy40LTRzMy40LDEuNSwzLjQsNHMtMS40LDQuMS0zLjQsNC4xQzE3LjgsMjguMywxNi40LDI2LjcsMTYuNCwyNC4yeiBNMjIuMSwyNC4yCgkJYzAtMi0wLjktMy4yLTIuMy0zLjJzLTIuMywxLjItMi4zLDMuMnMwLjksMy4yLDIuMywzLjJDMjEuMiwyNy40LDIyLjEsMjYuMSwyMi4xLDI0LjJ6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjQuNywyMC4zSDI3YzEuNiwwLDIuNywwLjUsMi43LDEuOWMwLDAuOC0wLjQsMS41LTEuNCwxLjdsMCwwYzEuMiwwLjIsMS44LDAuOCwxLjgsMS45YzAsMS41LTEuMiwyLjMtMywyLjMKCQloLTIuNXYtNy44SDI0Ljd6IE0yNi45LDIzLjZjMS4zLDAsMS45LTAuNSwxLjktMS40UzI4LjIsMjEsMjcsMjFoLTEuMnYyLjZIMjYuOXogTTI3LjEsMjcuM2MxLjMsMCwyLjEtMC41LDIuMS0xLjYKCQljMC0xLTAuOC0xLjQtMi4xLTEuNGgtMS40djNIMjcuMXoiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zMS4yLDI0LjJjMC0yLjUsMS40LTQsMy40LTRzMy40LDEuNSwzLjQsNHMtMS40LDQuMS0zLjQsNC4xQzMyLjYsMjguMywzMS4yLDI2LjcsMzEuMiwyNC4yeiBNMzYuOSwyNC4yCgkJYzAtMi0wLjktMy4yLTIuMy0zLjJjLTEuNCwwLTIuMywxLjItMi4zLDMuMnMwLjksMy4yLDIuMywzLjJDMzYsMjcuNCwzNi45LDI2LjEsMzYuOSwyNC4yeiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQwLjksMjEuMWgtMi40di0wLjhoNS44djAuOGgtMi40djdoLTFDNDAuOSwyOC4xLDQwLjksMjEuMSw0MC45LDIxLjF6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDUuNiwyMC4zaDF2Ny45aC0xVjIwLjN6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTEuNywyMC4xYzAuOSwwLDEuNywwLjUsMi4xLDFsLTAuNiwwLjZjLTAuNC0wLjQtMC45LTAuNy0xLjYtMC43Yy0xLjUsMC0yLjUsMS4yLTIuNSwzLjJzMC45LDMuMiwyLjQsMy4yCgkJYzAuNywwLDEuMy0wLjMsMS44LTAuOWwwLjYsMC42Yy0wLjYsMC43LTEuNCwxLjEtMi40LDEuMWMtMiwwLTMuNS0xLjUtMy41LTQuMUM0OC4yLDIxLjcsNDkuNywyMC4xLDUxLjcsMjAuMXoiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01NS4xLDI2LjRjMC42LDAuNiwxLjMsMSwyLjIsMWMxLDAsMS42LTAuNSwxLjYtMS4zcy0wLjYtMS4xLTEuMy0xLjRsLTEuMS0wLjVjLTAuNy0wLjMtMS42LTAuOS0xLjYtMgoJCWMwLTEuMiwxLjEtMi4xLDIuNS0yLjFjMC45LDAsMS44LDAuNCwyLjMsMWwtMC41LDAuNmMtMC41LTAuNS0xLjEtMC43LTEuOC0wLjdjLTAuOSwwLTEuNSwwLjQtMS41LDEuMmMwLDAuOCwwLjcsMSwxLjMsMS4zCgkJbDEuMSwwLjVjMC45LDAuNCwxLjYsMC45LDEuNiwyLjFzLTEsMi4yLTIuNywyLjJjLTEuMSwwLTIuMS0wLjUtMi43LTEuMkw1NS4xLDI2LjR6Ii8+CjwvZz4KPC9zdmc+Cg==",this.timezones=(0,c.computed)("model",function(){return[{name:"localtime",value:void 0}]}),this.timezoneSelected=(0,c.computed)("timezones",{get(){const a=localStorage.getItem("marv-displayTimezone"),b=this.timezones.find(b=>b.name===a);return b||this.timezones[0]}}),this.displayTimezone=(0,c.computed)("timezoneSelected",function(){return this.timezoneSelected.value}),this.owner=(0,c.computed)("owner",function(){return this.getOwner()}),this.hostname=(0,c.computed)(function(){return location.hostname}),this.isLocalhost=(0,c.computed)(function(){const{hostname:a}=this;return"localhost"===a||/^127\./.test(a)}),this.insecure=(0,c.computed)(function(){return"http:"===location.protocol&&!this.isLocalhost}),this.sessionid=(0,c.computed)(function(){const a=JSON.parse(localStorage.session||"{}");return 1===a.version?a.id:(localStorage.session=JSON.stringify({version:1,id:null}),null)}),this.user=(0,c.computed)("sessionid",function(){return this.sessionid?JSON.parse(atob(this.sessionid.split(".")[1])).sub:null}),this.username="",this.password="",this.password_error=(0,c.computed)("username","password",()=>!1),this.model=(0,c.computed)("user",async function(){return void this.user,await this.api({url:"meta"})}),this.acl=(0,c.computed)("model",function(){const a={};return this.model.acl&&this.model.acl.forEach(b=>a[b.replace("-","_")]=!0),a}),this.apiEndpoint="".concat(document.querySelector("base").href,"marv/api/"),this.version=(0,c.computed)(function(){return this.getOwner().version}),this.releases=[],this.realm="marv"}toggleCollectionCollapse(a){a.preventDefault(),this.collectionsOpen=!this.collectionsOpen}openCollection(a){this.transitionTo({route:"collection",models:[{id:a,fake:!0}]}),this.collectionsOpen=!1}openSignin(){this.signinOpen=!0,this.getOwner().addAfterRender(()=>{const a=this.getElement().querySelector("input[placeholder=username]");a&&a.focus()})}async signin(a){a.preventDefault();const b={url:"auth",method:"POST",data:{username:this.username,password:this.password}};try{const a=await this.api(b);this.setSessionid(a.access_token),this.username="",this.password="",this.signinOpen=!1}catch(a){let b;b=600<=a.status?"check your network connection":500<=a.status?"server side error, try again later":"check your username and password",this.password_error="Could not sign in: ".concat(b)}this.getOwner().asyncEvent(()=>{})()}modelHook(){const a={url:"https://ternaris.com/marv-robotics/changes.json",headers:{"X-MARV":this.getOwner().et}};this.getOwner().ajax(a).then(a=>{this.releases=a})}setSessionid(a){const b=JSON.parse(localStorage.session||"{}");b.id=a,localStorage.session=JSON.stringify(b),this.sessionid=a}async api(a,b){const c=a.url;a.url="".concat(this.apiEndpoint).concat(a.url),this.sessionid&&(a.headers=Object.assign({Authorization:"Bearer ".concat(this.sessionid)},a.headers)),this.loading=!0;try{const b=await this.getOwner().ajax(a);return this.loading=!1,this.error=b.error,b}catch(d){if(401!==d.status)this.error="The frontend is unable to communicate with the server.";else if(this.setSessionid(null),a.headers&&a.headers.Authorization)return delete a.headers.Authorization,a.url=c,this.api(a);throw b&&(this.apiError=d),d}}comment(a){return this.api({url:"comment",method:"POST",data:a},!0)}tag(a){return this.api({url:"tag",method:"POST",data:a},!0)}getFilelist(a){return this.api({url:"file-list",method:"POST",data:a},!0)}delete(a){return this.api({url:"dataset",method:"DELETE",data:a},!0)}authComplete(a){this.setSessionid(a),this.username="",this.password="",this.signinOpen=!1}authEndpoint(a){return this.api({url:"oauth2",method:"POST",data:a})}}a.default=d}),define(20,["exports",45,46],function(a,b,c){"use strict";var d=Math.floor,e=Math.max;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class f extends b.Component{constructor(){super(),this.template="PGlucHV0IHR5cGU9e3t0eXBlfX0gY2xhc3M9e3tjbGFzc319IG1pbj17e21pbn19IG1heD17e21heH19IHN0ZXA9e3tzdGVwfX0gZGlzYWJsZWQ9e3siaWYiIGRpc2FibGVkICJkaXNhYmxlZCIgdW5kZWZpbmVkfX0gcGxhY2Vob2xkZXI9e3twbGFjZWhvbGRlcn19IHZhbHVlPXt7bVZhbHVlfX0ge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiY2hhbmdlIiBvbj0iY2hhbmdlIil9fSB7eyJhY3Rpb24iICgibm9leHBhbmQiICJjaGFuZ2UiIG9uPSJrZXl1cCIpfX0ge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiY2hhbmdlIiBvbj0iaW5wdXQiKX19IHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgIm1vdXNlbW92ZSIgb249Im1vdXNlbW92ZSIpfX0ge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAibW91c2Vtb3ZlIiBvbj0ibW91c2VsZWF2ZSIpfX0ge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAibW91c2Vkb3duIiBvbj0ibW91c2Vkb3duIil9fSA+",this.type="text",this.mValue=(0,c.computed)("value",function(){const a=this.getElement();return a.value===this.value||this.blocked||(a.value=this.value),this.value})}change(){const a=this.getElement(),b=a.value;this.changeAction(b)}mousedown(){const a=()=>{this.blocked=!1,document.removeEventListener("mouseup",a)};this.blocked=!0,document.addEventListener("mouseup",a)}mousemove(a){if(this.overAction)if("mousemove"===a.type){const{left:b}=a.target.getClientRects()[0],c=e(0,(a.clientX-b-8)/(a.target.clientWidth-18));this.overAction(d(this.min+c*(this.max-this.min)))}else this.overAction(null)}}a.default=f}),define(21,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.Component{constructor(){super(),this.template="PHRleHRhcmVhIGNsYXNzPXt7Y2xhc3N9fSBkaXNhYmxlZD17eyJpZiIgZGlzYWJsZWQgImRpc2FibGVkIiB1bmRlZmluZWR9fSB2YWx1ZT17e21WYWx1ZX19IHJvd3M9e3tyb3dzfX0gY29scz17e2NvbHN9fSBwbGFjZWhvbGRlcj17e3BsYWNlaG9sZGVyfX0ge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiY2hhbmdlIiBvbj0iY2hhbmdlIil9fSB7eyJhY3Rpb24iICgibm9leHBhbmQiICJjaGFuZ2UiIG9uPSJrZXl1cCIpfX0gPiA8L3RleHRhcmVhPg==",this.mValue=(0,c.computed)("value",function(){const a=this.getElement();return a.value=this.value,this.value})}change(){const a=this.getElement(),b=a.value;this.changeAction(b)}}a.default=d}),define(22,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PHNwYW4gY2xhc3M9Im0taG92ZXIge3siaWYiIGhvdmVyaW5nICJob3ZlcmluZyJ9fSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAoInNldHRlciIgKCJwYXRoIiBob3ZlcmluZykgdHJ1ZSkgb249Im1vdXNlZW50ZXIiKX19IHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgIm1vdXNlbGVhdmUiIG9uPSJtb3VzZWxlYXZlIil9fT48eWllbGQtYmxvY2sgcGFyYW1zPXt7aG92ZXJpbmd9fSAvPjwvc3Bhbj4="}mouseleave(a){a.relatedTarget&&(this.hovering=!1)}}a.default=c}),define(23,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PGRpdiBjbGFzcz0ibS1oc2Nyb2xsIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJzY3JvbGwiIG9uPSJtb3VzZWRvd24iKX19PiA8eWllbGQtYmxvY2sgLz4gPC9kaXY+",this.wheelEvent=a=>{if(a.deltaX){const b=this.getElement(),c=b.firstElementChild;c.scrollLeft+=a.deltaX,this.updateHscroll(),a.preventDefault(),a.stopPropagation()}}}scroll(a){if(0!==a.button)return;let b=a.clientX;const c=this.getOwner().asyncEvent(a=>{const c=a.clientX-b;b=a.clientX;const d=this.getElement(),e=d.firstElementChild;e.scrollLeft-=c,this.updateHscroll()}),d=this.getOwner().asyncEvent(()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d)});document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)}updateHscroll(){const a=this.getElement(),b=a.firstElementChild,c=b.scrollLeft;if(a.classList.remove("scrolling"),a.classList.remove("left"),a.classList.remove("right"),b.scrollWidth!==b.offsetWidth){a.classList.add("scrolling");const d=b.scrollWidth-b.offsetWidth;0!==b.scrollLeft&&a.classList.add("left"),b.scrollLeft!==d&&a.classList.add("right"),b.scrollLeft=c}}didInsertElement(){this.getOwner().addAfterRender(()=>{this.updateHscroll()});const a=this.getElement();a.addEventListener("wheel",this.wheelEvent)}willRemoveElement(){const a=this.getElement();a.removeEventListener("wheel",this.wheelEvent)}}a.default=c}),define(24,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.Component{constructor(){super(),this.template="PHNlbGVjdCBjbGFzcz0iZm9ybS1jb250cm9sIHt7Y2xhc3N9fSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiY2hhbmdlIiBvbj0iY2hhbmdlIil9fSBkaXNhYmxlZD17e2Rpc2FibGVkfX0+IHt7I2VhY2ggbU9wdGlvbnMgYXMgfGl0ZW18fX0gPG9wdGlvbiB2YWx1ZT17e2l0ZW0udmFsdWV9fSBzZWxlY3RlZD17eyJpZiIgKCJpcy1lcXVhbCIgaXRlbS52YWx1ZSBtU2VsZWN0ZWQpICJzZWxlY3RlZCJ9fT4ge3tpdGVtLm5hbWV9fSA8L29wdGlvbj4ge3svZWFjaH19IDwvc2VsZWN0Pg==",this.nameKey="",this.valueKey="__index__",this.mOptions=(0,c.computed)("options",function(){return this.options.map((a,b)=>({name:this.nameKey?a[this.nameKey]:a,value:"__index__"===this.valueKey?b:a[this.valueKey]}))}),this.mSelected=(0,c.computed)("options","selected",function(){const a=this.options,b=this.selected,c=a.indexOf(b),d=this.getElement().querySelector("option:nth-child(".concat(c+1,")"));if(d&&(d.selected=!0),~c)return"__index__"===this.valueKey?c:b[this.valueKey]})}change(){const a=this.getElement(),b=a.selectedIndex;this.changeAction(this.options[b])}}a.default=d}),define(25,["exports",45,46],function(a,b,c){"use strict";function d(a,b){do{if(a===b)return!0;b=b.parentElement}while(b.parentElement);return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class e extends b.Component{constructor(){super(),this.template="PGRpdiBjbGFzcz0ibS10YWcgZHJvcGRvd24ge3siaWYiIHJlc3VsdHNWaXNpYmxlICJzaG93In19IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJjbGljayIpfX0ge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAia2V5ZG93biIgb249ImtleWRvd24iKX19IHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImZvY3VzSW4iIG9uPSJmb2N1cyIgY2FwdHVyZT10cnVlKX19IHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImZvY3VzT3V0IiBvbj0iYmx1ciIgY2FwdHVyZT10cnVlKX19PiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wge3tjbGFzc319IHt7ImlmIiBmb2N1c2VkICJmb2N1cyJ9fSI+IHt7I2VhY2ggdGFncyBhcyB8dGFnfH19IDxzcGFuIGNsYXNzPSJiYWRnZSI+IHt7dGFnfX0ge3sjaWYgZGlzYWJsZWR9fSB7e2Vsc2V9fSA8c3BhbiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJyZW1vdmUiIHRhZyl9fT54PC9zcGFuPiB7ey9pZn19IDwvc3Bhbj4ge3svZWFjaH19IDxpbnB1dC1jb250cm9sIHZhbHVlPXt7c2VhcmNofX0gZGlzYWJsZWQ9e3tkaXNhYmxlZH19IHBsYWNlaG9sZGVyPXt7cGxhY2Vob2xkZXJ9fSBjaGFuZ2VBY3Rpb249e3siZm4iIGlucHV0Q2hhbmdlQWN0aW9ufX0gLz4gPC9kaXY+IHt7I2lmIHJlc3VsdHMubGVuZ3RofX0gPHVsIGNsYXNzPSJkcm9wZG93bi1tZW51IHt7ImlmIiByZXN1bHRzVmlzaWJsZSAic2hvdyJ9fSI+IHt7I2VhY2ggcmVzdWx0cyBhcyB8cmVzdWx0fH19IDxhIGhyZWY9IiMiIHRhYmluZGV4PS0xIGNsYXNzPSJkcm9wZG93bi1pdGVtIHt7ImlmIiByZXN1bHQuYWN0aXZlICJhY3RpdmUifX0iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImFkZCIgcmVzdWx0KX19IHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImhpZ2hsaWdodCIgcmVzdWx0IG9uPSJtb3VzZWVudGVyIil9fSA+IHt7cmVzdWx0LnRhZ319IDwvYT4ge3svZWFjaH19IDwvdWw+IHt7ZWxzZSBpZiBzdWdnZXN0aW9ucy5sZW5ndGh9fSA8dWwgY2xhc3M9ImRyb3Bkb3duLW1lbnUge3siaWYiIHJlc3VsdHNWaXNpYmxlICJzaG93In19Ij4gPGEgdGFiaW5kZXg9LTEgY2xhc3M9ImRyb3Bkb3duLWl0ZW0gZGlzYWJsZWQiID4gTm8gcmVzdWx0cyBtYXRjaCB5b3VyIHF1ZXJ5IDwvYT4gPC91bD4ge3svaWZ9fSA8L2Rpdj4=",this.tags=null,this.suggestions=null,this.search="",this.focused=!1,this.disabled=(0,c.computed)("subset","suggestions.@each",function(){return this.subset&&!this.suggestions.length}),this.placeholder=(0,c.computed)("subset","suggestions.@each",function(){return this.subset&&!this.suggestions.length?"There are no items":void 0}),this.results=(0,c.computed)("search","tags.@each","suggestions.@each",function(){const a=this.search,b=this.subset;if(!a&&!b)return c.A.create();const d=this.tags,e=new RegExp(a,"i");return c.A.create(this.suggestions.filter(a=>!~d.indexOf(a)).filter(a=>e.test(a)).map(a=>c.O.create({tag:a,active:!1})))}),this.resultsVisible=(0,c.computed)("focused",function(){return this.focused})}click(){this.getElement().querySelector("input").focus()}focusIn(){this.focused=!0}focusOut(a){if(a.relatedTarget){const b=this.getElement();if(d(b,a.relatedTarget))return}this.focused=!1}add(a,b){this.addAction(a.tag),this.getElement().querySelector("input").focus(),this.search="",b.stopPropagation(),b.preventDefault()}remove(a,b){this.removeAction(a),b.stopPropagation(),b.preventDefault()}highlight(a){const b=this.results;if(b.length){const d=b.filter(a=>!0===a.active)[0];if(b.forEach(a=>a.active=!1),"number"==typeof a){let c=b.indexOf(d);c=(c+b.length+a)%b.length,b[c].active=!0}else a.active=!0}}keydown(a){const b=a;if(38===b.keyCode)this.highlight(-1),b.stopPropagation(),b.preventDefault();else if(40===b.keyCode)this.highlight(1),b.stopPropagation(),b.preventDefault();else if(13===b.keyCode||9===b.keyCode){const a=this.results,d=this.search.trim();this.search="";const e=a.filter(a=>!0===a.active)[0];if(e)this.addAction(e.tag),b.stopPropagation(),b.preventDefault();else if(d.length)(!this.subset||a.filter(a=>a.tag===d)[0])&&this.addAction(d),b.stopPropagation(),b.preventDefault();else if(9===b.keyCode)return}else if(8===b.keyCode){if(this.search.length)return;this.tags.length&&this.remove(this.tags[this.tags.length-1],b)}}inputChangeAction(a){this.search=a}}a.default=e}),define(26,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.RoutableComponent{constructor(){super(),this.template="PGRpdiBjbGFzcz0iYWxlcnQgYWxlcnQtZGFuZ2VyIiByb2xlPSJhbGVydCI+IDxzdHJvbmc+RXJyb3I6PC9zdHJvbmc+IFRoaXMgaXMgbm90IGEgdmFsaWQgbWFydiByb3V0ZS4gPC9kaXY+IDxsaW5rLXRvIGhyZWY9Ii8iPkdvIHRvIG92ZXJ2aWV3PC9saW5rLXRvPg=="}}a.default=c}),define(27,["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;a.default=[{name:"index",path:""},{name:"collection",path:"/collection/:id",queryParams:{filter:{refreshModel:!0},debugfilters:{}}},{name:"detail",path:"/detail/:id"},{name:"compare",path:"/compare/:id"},{name:"admin",path:"/admin"},{name:"notfound",path:"*wildcard"}]}),define(28,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PGJ1dHRvbiBjbGFzcz0ie3tjbGFzc319IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJjb3B5Iil9fT5Db3B5IHt7bW9kZWwudGl0bGV9fSB0byBjbGlwYm9hcmQgPHdpZGdldC1pY29uIGdseXBoPSJjbGlwYm9hcmQiIC8+PC9idXR0b24+"}copy(){const a=this.getOwner().rootNode.__doc__.createElement("textarea");a.value=this.model.data,this.getElement().appendChild(a),a.select(),this.getOwner().rootNode.__doc__.execCommand("copy"),a.remove()}}a.default=c}),define(29,["exports",45],function(a,b){"use strict";function c(a,b){do{if(a===b)return!0;b=b.parentElement}while(b.parentElement);return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.Component{constructor(){super(),this.template="PHNwYW4gY2xhc3M9IndpZGdldC1jb21tZW50Ij4gPHNwYW4gY2xhc3M9ImRyb3Bkb3duIHt7ImlmIiBmb2N1c2VkICJzaG93In19Ij4gPHNwYW4gY2xhc3M9ImJhY2tkcm9wIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJmb2N1c0luIil9fT48L3NwYW4+IDxidXR0b24gcm9sZT0iYnV0dG9uIiBjbGFzcz0ie3tjbGFzc319IGRyb3Bkb3duLXRvZ2dsZSIgZGlzYWJsZWQ9e3tmdWxsZGlzYWJsZWR9fSB7eyJhY3Rpb24iICgibm9leHBhbmQiICJmb2N1c0luIil9fT4gY29tbWVudCA8L2J1dHRvbj4gPGRpdiBjbGFzcz0iZHJvcGRvd24tbWVudSB7eyJpZiIgZm9jdXNlZCAic2hvdyJ9fSB7e21lbnVDbGFzc319Ij4ge3sjaWYgZGlzYWJsZWR9fSA8YSBocmVmPSIjIiBjbGFzcz0iZHJvcGRvd24taXRlbSI+U2lnbiBpbiB0byBjb21tZW50PC9hPiB7e2Vsc2V9fSA8Zm9ybSBjbGFzcz0icHgtMSBweS0xIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJzYXZlIiBvbj0ic3VibWl0Iil9fT4gPGlucHV0LXRleHRhcmVhIGNsYXNzPSJmb3JtLWNvbnRyb2wgZm9ybS1jb250cm9sLXNtIiByb3dzPTEwIGNvbHM9ODAgcGxhY2Vob2xkZXI9IkNvbW1lbnQiIHZhbHVlPXt7Y29tbWVudH19IGNoYW5nZUFjdGlvbj17eyJjdXJyeSIgKCJub2V4cGFuZCIgKCJzZXQiICgibm9leHBhbmQiIGNvbW1lbnQpKSl9fSAvPiA8L2Zvcm0+IDxkaXYgY2xhc3M9ImRyb3Bkb3duLWRpdmlkZXIiPjwvZGl2PiA8Zm9ybSBjbGFzcz0icHgtMSBweS0xIHRleHQtcmlnaHQiPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IGJ0bi14cyIgdHlwZT0iYnV0dG9uIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJzYXZlIil9fT5Db21tZW50PC9idXR0b24+IDwvZm9ybT4ge3svaWZ9fSA8L2Rpdj4gPC9zcGFuPiA8L3NwYW4+",this.comment="",this.focused=!1}focusIn(a){console.log("in",a.target),this.focused=!this.focused}focusOut(a){if(console.log("out",a.target,a.relatedTarget),a.relatedTarget){const b=this.getElement();if(c(b,a.relatedTarget))return}this.focused=!1}save(a){a.preventDefault(),this.comment&&(this.changeAction(this.comment),this.comment="",this.focused=!1)}}a.default=d}),define(3,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="e3sjaWYgKCJpcy1lcXVhbCIgbW9kZSAibGluayIpfX0gPGEgY2xhc3M9Int7Y2xhc3N9fSB7e2J1dHRvbkNsYXNzfX0iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImNoZWNrIil9fT4gPHlpZWxkLWJsb2NrIC8+IDwvYT4ge3tlbHNlfX0gPGJ1dHRvbiBjbGFzcz0ie3tjbGFzc319IHt7YnV0dG9uQ2xhc3N9fSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiY2hlY2siKX19IGRpc2FibGVkPXt7ZGlzYWJsZWR9fT4gPHlpZWxkLWJsb2NrIC8+IDwvYnV0dG9uPiB7ey9pZn19IDx3aWRnZXQtbW9kYWwgb3Blbj17e21vZGFsT3Blbn19IHNldE9wZW49e3siY3VycnkiICgibm9leHBhbmQiICgic2V0IiAoIm5vZXhwYW5kIiBtb2RhbE9wZW4pKSl9fSB0aXRsZT17e3RpdGxlfX0gYXM9InRhcmdldCI+IHt7I2lmICgiaXMtZXF1YWwiIHRhcmdldCAiYm9keSIpfX0ge3t0ZXh0fX0ge3tlbHNlfX0gPGJ1dHRvbiBjbGFzcz0ie3tjbGFzc319IHt7YWN0aW9uQnV0dG9uQ2xhc3N9fSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiZXhlY3V0ZSIpfX0+e3soImlmIiBjb25maXJtVGV4dCBjb25maXJtVGV4dCAiQ29uZmlybSIpfX08L2J1dHRvbj4ge3svaWZ9fSA8L3dpZGdldC1tb2RhbD4=",this.modalOpen=!1}check(){this.modalOpen=!0}execute(){this.action(),this.modalOpen=!1}}a.default=c}),define(30,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.Component{constructor(){super(),this.template="PGZvcm0gY2xhc3M9ImNhcmQtYm9keSBmaWx0ZXJzIGZvcm0taG9yaXpvbnRhbCB4d2FzLXZhbGlkYXRlZCIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiYXBwbHlGaWx0ZXIiIG9uPSJzdWJtaXQiKX19PiA8ZGl2IGNsYXNzPSJyb3cgZm9ybS1ncm91cCBmb3JtLWdyb3VwLXNtIGFkZC1maWx0ZXItYnV0dG9ucyI+IDxkaXYgY2xhc3M9ImNvbC0yIGNvbC1mb3JtLWxhYmVsIGNvbC1mb3JtLWxhYmVsLXNtIj5BZGQgbmV3IGZpbHRlcjwvZGl2PiA8ZGl2IGNsYXNzPSJjb2wiPiA8dWwgY2xhc3M9Imxpc3QtaW5saW5lIj4ge3sjZWFjaCBmaWVsZHMgYXMgfGZpZWxkfH19IDxsaSBjbGFzcz0ibGlzdC1pbmxpbmUtaXRlbSI+IDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBidG4teHMiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImFkZCIgZmllbGQpfX0gZGlzYWJsZWQ9e3tmaWVsZC5hY3RpdmV9fSB0aXRsZT17e2ZpZWxkLnRpdGxlfX0+e3tmaWVsZC50aXRsZX19PC9idXR0b24+IDwvbGk+IHt7L2VhY2h9fSA8L3VsPiA8L2Rpdj4gPC9kaXY+IHt7I2VhY2ggZmllbGRzIGFzIHxmaWVsZHx9fSB7eyNpZiBmaWVsZC5hY3RpdmV9fSA8ZGl2IGNsYXNzPSJyb3cgZm9ybS1ncm91cCBmb3JtLWdyb3VwLXNtIHt7ImlmIiBmaWVsZC5lbnRyeS5lcnJvciAiaXMtaW52YWxpZCJ9fSI+IDxsYWJlbCBjbGFzcz0iY29sLTIgY29sLWZvcm0tbGFiZWwgY29sLWZvcm0tbGFiZWwtc20iPiB7e2ZpZWxkLnRpdGxlfX0gPC9sYWJlbD4ge3sjaWYgKCJpcy1ncmVhdGVyIiBmaWVsZC5vcGVyYXRvcnMubGVuZ3RoIDEpfX0gPGRpdiBjbGFzcz0iY29sLTIiPiA8bS1zZWxlY3Qgb3B0aW9ucz17e2ZpZWxkLm9wZXJhdG9yc319IGNsYXNzPSJmb3JtLWNvbnRyb2wtc20iIHNlbGVjdGVkPXt7ZmllbGQuZW50cnkub3B9fSBjaGFuZ2VBY3Rpb249e3sic2V0dGVyIiAoInBhdGgiIGZpZWxkLmVudHJ5Lm9wKX19IGRpc2FibGVkPXt7ImlmIiAoImlzLWdyZWF0ZXIiIGZpZWxkLm9wZXJhdG9ycy5sZW5ndGggMSkgdW5kZWZpbmVkIHRydWV9fSAvPiA8L2Rpdj4ge3svaWZ9fSA8ZGl2IGNsYXNzPSJjb2wiPiA8ZGVsZWdhdGUtY29tcG9uZW50IGNvbXBvbmVudD0iZmllbGQte3tmaWVsZC52YWx1ZV90eXBlfX0iIGNsYXNzPSJmb3JtLWNvbnRyb2wtc20ge3siaWYiIGZpZWxkLmVudHJ5LmVycm9yICJpcy1pbnZhbGlkIn19IiB2YWx1ZT17e2ZpZWxkLmVudHJ5LnZhbH19IGNvbnN0cmFpbnRzPXt7ZmllbGQuY29uc3RyYWludHN9fSBjaGFuZ2VBY3Rpb249e3sic2V0dGVyIiAoInBhdGgiIGZpZWxkLmVudHJ5LnZhbCl9fSBjaGFuZ2VFcnJvckFjdGlvbj17eyJzZXR0ZXIiICgicGF0aCIgZmllbGQuZW50cnkuZXJyb3IpfX0gLz4ge3sjaWYgZmllbGQuZW50cnkuZXJyb3J9fSA8ZGl2IGNsYXNzPSJpbnZhbGlkLWZlZWRiYWNrIGQtYmxvY2siPnt7ZmllbGQuZW50cnkuZXJyb3J9fTwvZGl2PiB7ey9pZn19IDwvZGl2PiA8ZGl2IGNsYXNzPSJjb2wtMSI+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYnRuLXNtIiB0eXBlPSJidXR0b24iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInJlbW92ZSIgZmllbGQpfX0+IDx3aWRnZXQtaWNvbiBnbHlwaD0ieCIgLz4gPC9idXR0b24+IDwvZGl2PiA8L2Rpdj4ge3svaWZ9fSB7ey9lYWNofX0gPGRpdiBjbGFzcz0iZmlsdGVyLWNvbnRyb2xzIHJvdyI+IHt7I2lmIGRlYnVnfX0gPGg0PkZpbHRlciBEZWJ1ZzwvaDQ+IDxwcmU+e3tmaWx0ZXJKU09OfX08L3ByZT4gPHByZT57e2ZpbHRlckJhc2V9fTwvcHJlPiB7ey9pZn19IDxkaXYgY2xhc3M9ImNvbC0xMSB0ZXh0LXJpZ2h0Ij4gPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IGJ0bi1zbSIgZGlzYWJsZWQ9e3siaXMtZXF1YWwiIGZpbHRlckJhc2UgIiJ9fSB7eyJhY3Rpb24iICgibm9leHBhbmQiICJyZXNldEZpbHRlcnMiKX19PnJlc2V0IGZpbHRlcnM8L2J1dHRvbj4gPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4gYnRuLW91dGxpbmUtcHJpbWFyeSBidG4tc20iIGRpc2FibGVkPXt7ImlzLWVxdWFsIiBmaWx0ZXJTdHIgZmlsdGVyQmFzZX19PmFwcGx5IGZpbHRlcjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZm9ybT4=",this.filterStr=(0,c.computed)("filter",function(){return"undefined"==typeof this.filter?"":this.filter}),this.filterObj=(0,c.computed)(function(){const a={};if(this.filter){const b=JSON.parse(atob(this.filter));for(let[d,e]of Object.entries(b))a[d]=c.O.create(e)}return c.O.create(a)}),this.filterJSON=(0,c.computed)("model",function(){const a=this.model.filters.reduce((a,b)=>a.concat(["filterObj.".concat(b.key,".op"),"filterObj.".concat(b.key,".val")]),["model"]);(0,c.updateComputed)(this,"filterJSON",a);const b={};for(let[a,c]of Object.entries(this.filterObj)){const{op:d,val:e}=c;e.length&&(b[a]={op:d,val:e})}return JSON.stringify(b,0,1)}),this.filterBase=(0,c.computed)("filterJSON",function(){return"{}"===this.filterJSON?"":btoa(this.filterJSON)}),this.fields=(0,c.computed)("model","filterObj",function(){const a=this.filterObj,b=this.model.filters;return b.map((b,d)=>{const e=a[b.key]||(a[b.key]=c.O.create({}));return e.op=e.op||b.operators[0],e.val=e.val||("subset"===b.value_type?c.A.create():""),e.error=null,c.O.create({key:b.key,title:b.title,operators:b.operators,value_type:b.value_type,constraints:c.A.create(b.constraints),active:0===d||!!e.val.length,entry:e})})})}add(a){a.active=!0}remove(a){a.active=!1,a.entry.val=a.entry.val.slice(0,0)}applyFilter(a){this.setAction(this.filterBase),a.preventDefault()}resetFilters(a){Object.values(this.filterObj).forEach(a=>a.val=a.val.slice(0,0)),this.applyFilter(a)}}a.default=d}),define(31,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.Component{constructor(){super(),this.template="PGRpdiBjbGFzcz0id2lkZ2V0LWdhbGxlcnkiPiB7eyNpZiBzaG93VGl0bGV9fSA8aDQgY2xhc3M9InRleHQtY2VudGVyIj5JbWFnZSB7eygiaW5jcmVtZW50IiBpbmRleCl9fSBvZiB7e21vZGVsLmltYWdlcy5sZW5ndGh9fSA8c21hbGw+e3tpbWFnZS5hbHR9fTwvc21hbGw+PC9oND4ge3svaWZ9fSA8ZGl2IGNsYXNzPSJyb3ciPiA8ZGl2IGNsYXNzPSJjb2wiPiA8ZGl2IGNsYXNzPSJjYXJvdXNlbCI+IDxkaXYgY2xhc3M9ImNhcm91c2VsLWlubmVyIj4ge3sjZWFjaCBtb2RlbC5pbWFnZXMgYXMgfGltYWdlIGl8fX0gPGRpdiBjbGFzcz0iY2Fyb3VzZWwtaXRlbSB7eygiaWYiICgiaXMtZXF1YWwiIGkgaW5kZXgpICJhY3RpdmUiKX19Ij4gPGltZyBjbGFzcz0iaW1nLXJlc3BvbnNpdmUgY2VudGVyLWJsb2NrIiBzcmM9e3tpbWFnZS5zcmN9fSBhbHQ9e3tpbWFnZS5hbHR9fT4gPC9kaXY+IHt7L2VhY2h9fSA8L2Rpdj4gPGEgY2xhc3M9ImNhcm91c2VsLWNvbnRyb2wtcHJldiIgcm9sZT0iYnV0dG9uIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJzZXRJbmRleCIgIi0xIil9fT4gPHNwYW4gY2xhc3M9ImNhcm91c2VsLWNvbnRyb2wtcHJldi1pY29uIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ic3Itb25seSI+UHJldmlvdXM8L3NwYW4+IDwvYT4gPGEgY2xhc3M9ImNhcm91c2VsLWNvbnRyb2wtbmV4dCIgcm9sZT0iYnV0dG9uIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJzZXRJbmRleCIgIisxIil9fT4gPHNwYW4gY2xhc3M9ImNhcm91c2VsLWNvbnRyb2wtbmV4dC1pY29uIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ic3Itb25seSI+TmV4dDwvc3Bhbj4gPC9hPiA8L2Rpdj4gPC9kaXY+IHt7I2lmIGhhc0Jsb2NrfX08ZGl2IGNsYXNzPSJjb2wtMyI+PHlpZWxkLWJsb2NrIC8+PC9kaXY+e3svaWZ9fSA8L2Rpdj4gPHVsIGNsYXNzPSJpbWFnZS1zdHJpcGUiPiB7eyNlYWNoIG1vZGVsLmltYWdlcyBhcyB8aW1hZ2UgaXx9fSA8bGk+IDxkaXYgY2xhc3M9ImltZy10aHVtYm5haWwtd3JhcHBlciB7eyJpZiIgKCJpcy1lcXVhbCIgaSBpbmRleCkgImFjdGl2ZSJ9fSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAic2V0SW5kZXgiIGkpfX0+IDxpbWcgc3JjPXt7aW1hZ2Uuc3JjfX0gYWx0PXt7aW1hZ2UuYWx0fX0+IDwvZGl2PiA8L2xpPiB7ey9lYWNofX0gPC91bD4gPC9kaXY+",this.index=0,this.image=(0,c.computed)("index",function(){return this.model.images[this.index]})}setIndex(a){"-1"===a?0<this.index&&this.index--:"+1"===a?this.index<this.model.images.length-1&&this.index++:this.index=a}}a.default=d}),define(32,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.Component{constructor(){super(),this.template="PHNwYW4gY2xhc3M9IndpZGdldC1pY29uIHt7Y2xhc3N9fSIgdGl0bGU9e3t0aXRsZX19Pnt7c3ZnfX08L3NwYW4+",this.svg=(0,c.computed)("glyph",function(){(async()=>{const a=await fetch("app/styles/icons/".concat(this.glyph,".svg")),b=await a.text();if(!/^<svg/.test(b))return console.log("Missing",this.glyph),null;const c=new DOMParser().parseFromString(b,"application/xml"),d=this.getElements()[0];d&&(Array.from(d.querySelectorAll("svg")).forEach(a=>a.remove()),d.appendChild(d.ownerDocument.importNode(c.documentElement,!0)))})()})}}a.default=d}),define(33,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PGltZyBjbGFzcz17e2NsYXNzfX0gc3JjPSJ7e21vZGVsLnNyY319IiBhbHQ9e3ttb2RlbC5hbHR9fSB3aWR0aD17e21vZGVsLndpZHRofX0+",this.class="img-responsive widget-img"}}a.default=c}),define(34,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PGRpdiBjbGFzcz0id2lkZ2V0LWtleXZhbCI+IDx1bCBjbGFzcz0ibGlzdC1pbmxpbmUiPiB7eyNlYWNoIG1vZGVsLml0ZW1zIGFzIHxyb3cgaW5kZXh8fX0gPGxpIGNsYXNzPSJsaXN0LWlubGluZS1pdGVtIj4gPGRpdiBjbGFzcz0idmFsdWUiPiB7eyNpZiByb3cubGlzdH19IHt7I2VhY2ggcm93LnZhbHVlIGFzIHx2YWx8fX0ge3soKCJjb25jYXQiICJmb3JtYXQtIiByb3cuZm9ybWF0dGVyKSB2YWwpfX0ge3svZWFjaH19IHt7ZWxzZX19IHt7KCgiY29uY2F0IiAiZm9ybWF0LSIgcm93LmZvcm1hdHRlcikgcm93LnZhbHVlKX19IHt7L2lmfX0gPC9kaXY+IDxkaXYgY2xhc3M9InVpbnQiPiB7e3Jvdy50aXRsZX19IDwvZGl2PiA8L2xpPiB7ey9lYWNofX0gPC91bD4gPC9kaXY+"}}a.default=c}),define(35,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PGEgaHJlZj17e21vZGVsLmhyZWZ9fSBkb3dubG9hZD17e21vZGVsLmRvd25sb2FkfX0+e3ttb2RlbC50aXRsZX19PC9hPg=="}}a.default=c}),define(36,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const d=/^marv-partial:/;class e extends b.Component{constructor(){super(),this.template="e3sjaWYgcHJvdG99fSB7eyNpZiBkYXRhfX0gPGg1Pnt7bW9kZWwudGl0bGV9fTwvaDU+IDxkZWxlZ2F0ZS1jb21wb25lbnQgY29tcG9uZW50PSJ3aWRnZXQte3ttb2RlbC50eXBlfX0iIG1vZGVsPXt7ZGF0YX19IC8+IHt7ZWxzZX19IDxkaXYgY2xhc3M9ImNzc2xvYWQtbG9hZGVyIj4gPGRpdiBjbGFzcz0iY3NzbG9hZC1pbm5lciBjc3Nsb2FkLTEiPjwvZGl2PiA8ZGl2IGNsYXNzPSJjc3Nsb2FkLWlubmVyIGNzc2xvYWQtMiI+PC9kaXY+IDxkaXYgY2xhc3M9ImNzc2xvYWQtaW5uZXIgY3NzbG9hZC0zIj48L2Rpdj4gPGRpdiBjbGFzcz0iY3NzbG9hZC1pbm5lciBjc3Nsb2FkLTQiPjwvZGl2PiA8L2Rpdj4ge3svaWZ9fSB7e2Vsc2V9fSBXaWRnZXQgPHN0cm9uZz57e21vZGVsLnR5cGV9fTwvc3Ryb25nPiBub3QgYXZhaWxhYmxlIHt7L2lmfX0=",this.route=(0,c.computed)(function(){return this.getOwner().lookup("detail-route")}),this.proto=(0,c.computed)("model.type",function(){return this.getOwner().components["widget-".concat(this.model.type)]}),this.data=(0,c.computed)("model.data",function(){const a=this.model.data;if(d.test(a)){const b="dataset/".concat(this.route.params.id,"/").concat(a.replace(d,""));return this.getOwner().lookup("application-route").api({url:b},!0).then(a=>{this.model.data=this.data=a}),null}return a})}}a.default=e}),define(37,["exports",46,16],function(a,b,c){"use strict";var h=Math.log,i=Math.min,j=Math.max,k=Math.tan,l=Math.cos,m=Math.PI;function d(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;return d=function(){return a},a}function e(a){if(a&&a.__esModule)return a;var b=d();if(b&&b.has(a))return b.get(a);var c={};if(null!=a){var e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(c,f,g):c[f]=a[f]}}return c.default=a,b&&b.set(a,c),c}function g([a,b]){return a=a*n/180,b=b*n/180,[(1+a/n)/2,(1+h(k(b)+1/l(b))/n)/2]}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,c=e(c);const n=m;class f extends c.default{constructor(){super(),this.template="PGRpdiBjbGFzcz0id2lkZ2V0LW1hcCI+IDxjYW52YXM+e3tnbHlSZW5kZXJ9fTwvY2FudmFzPiB7eyNlYWNoIGxheWVycyBhcyB8bGF5ZXIgaW5kZXh8fX0ge3sjaWYgKCJpcy1lcXVhbCIgbGF5ZXIudHlwZSAidGlsZXMiKX19IDxnbHljaW5lLXR5bGVyIG1vZGVsPXt7bGF5ZXJ9fSBpbmRleD17e2luZGV4fX0gej17e3p9fSBwb3M9e3twb3N9fSBnbD17e2dsfX0gYWRkPXt7YWRkfX0gcmVtb3ZlPXt7cmVtb3ZlfX0gd29ybGQ9e3t3b3JsZH19IC8+IHt7ZWxzZSBpZiAoImlzLWVxdWFsIiBsYXllci50eXBlICJnZW9qc29uIil9fSA8Z2x5Y2luZS1nZW9qc29uIG1vZGVsPXt7bGF5ZXJ9fSBpbmRleD17e2luZGV4fX0gZ2w9e3tnbH19IGFkZD17e2FkZH19IHJlbW92ZT17e3JlbW92ZX19IHdvcmxkPXt7d29ybGR9fSB0aW1lUmFuZ2U9e3t0aW1lUmFuZ2V9fSB3aWR0aD17e3dpZHRofX0gaGVpZ2h0PXt7aGVpZ2h0fX0gLz4ge3tlbHNlfX0gTGF5ZXIge3tsYXllci50eXBlfX0gbm90IHN1cHBvcnRlZCB7ey9pZn19IHt7L2VhY2h9fSA8ZGl2IGNsYXNzPSJvbmRlbWFuZCBjb250cm9scyB0b3AgbGVmdCBidG4tZ3JvdXAiPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInpvb20iIC0xKX19PiA8d2lkZ2V0LWljb24gZ2x5cGg9Inpvb20tb3V0IiAvPiA8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJ6b29tIiAwKX19PiA8d2lkZ2V0LWljb24gZ2x5cGg9ImZ1bGxzY3JlZW4tZXhpdCIgLz4gPC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGVmYXVsdCIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiem9vbSIgMSl9fT4gPHdpZGdldC1pY29uIGdseXBoPSJ6b29tLWluIiAvPiA8L2J1dHRvbj4gPCEtLSA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInpvb20iICJmdWxsIil9fT4gPHdpZGdldC1pY29uIGdseXBoPSJmdWxsc2NyZWVuLWVudGVyIiAvPiA8L2J1dHRvbj4gLS0+IDwhLS0gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICgic2V0dGVyIiAoInBhdGgiIGNhbW1vZGUpICJub3JtYWwiKSl9fT4gZGVmIDwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgKCJzZXR0ZXIiICgicGF0aCIgY2FtbW9kZSkgInBlcnNwZWN0aXZlIikpfX0+IHBlciA8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICgic2V0dGVyIiAoInBhdGgiIGNhbW1vZGUpICJjaGlsZCIpKX19PiBmcCA8L2J1dHRvbj4gLS0+IDwvZGl2PiA8ZGl2IGNsYXNzPSJ4b25kZW1hbmQgY29udHJvbHMgdG9wIHJpZ2h0Ij4gPG0taG92ZXIgYXM9ImhvdmVyaW5nIj4ge3sjaWYgKCJub3QiIGhvdmVyaW5nKX19IDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGVmYXVsdCI+IDx3aWRnZXQtaWNvbiBnbHlwaD0ibWVudSIgLz4gPC9idXR0b24+IHt7L2lmfX0gPGZvcm0gY2xhc3M9ImxlZ2VuZCBvbmRlbWFuZCBmbGV4LWNvbHVtbiI+IHt7I2VhY2ggbGF5ZXJzIGFzIHxsYXllcnx9fSB7eyNpZiAoImlzLWVxdWFsIiBsYXllci50eXBlICJ0aWxlcyIpfX0gPG0tc2VsZWN0IG9wdGlvbnM9e3tsYXllci50aWxlc319IG5hbWVLZXk9InRpdGxlIiB2YWx1ZUtleT0idXJsIiBzZWxlY3RlZD17e2xheWVyLnRpbGV9fSBjaGFuZ2VBY3Rpb249e3sic2V0dGVyIiAoInBhdGgiIGxheWVyLnRpbGUpfX0gLz4ge3tlbHNlIGlmICgibm90IiAoImlzLWVxdWFsIiBsYXllci50aXRsZS4wICJfIikpfX0gPGRpdiBjbGFzcz0iY2hlY2tib3giPiA8bGFiZWw+IDxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD17eyJub3QiIGxheWVyLmhpZGRlbn19IHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInRvZ2dsZUxheWVyIiBsYXllcil9fSAvPjxzcGFuIGNsYXNzPSJsYXllciIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6e3tsYXllci5jb2xvcn19Ij4mbmJzcDs8L3NwYW4+IHt7bGF5ZXIudGl0bGV9fSA8L2xhYmVsPiA8L2Rpdj4ge3svaWZ9fSB7ey9lYWNofX0gPC9mb3JtPiA8L20taG92ZXI+IDwvZGl2PiA8L2Rpdj4=",this.nextPlaytime=null,this.playState="stopped",this.playSpeed=1,this.playLength=240,this.timeRange=(0,b.computed)("timebox","playState","playTime","playLength",function(){return"stopped"===this.playState?this.timebox:[this.playTime-1e3*this.playLength,this.playTime]}),this.layers=(0,b.computed)("model",function(){return this.model.zoom=[-30,40],b.A.from(this.model.layers.map(a=>{if(a=b.O.create(a),a.color instanceof Array&&a.color.length){const[c,d,e]=a.color.map(a=>0|255*a);a.color="#".concat(("000000"+(c<<16|d<<8|e).toString(16)).slice(-6))}if("tiles"===a.type)a.tile=a.tiles[0];else if("geojson"===a.type){const b=a.geojson.features.reduce((b,c)=>{const{type:d,coordinates:e}=c.geometry;return"LineString"===d?("WGS84"===c.properties.coordinatesystem&&(c.geometry.coordinates=e.map(a=>g(a)),c.properties.coordinatesystem="cartesian"),b.concat(c.geometry.coordinates)):"Polygon"===d?("WGS84"===c.properties.coordinatesystem&&(c.geometry.coordinates[0]=e[0].map(a=>g(a)),c.properties.coordinatesystem="cartesian"),b.concat(c.geometry.coordinates[0])):"Circle"===d||"Point"===d?("WGS84"===c.properties.coordinatesystem&&(c.geometry.coordinates=g(e),c.properties.coordinatesystem="cartesian"),a.hidden?b:b.concat([c.geometry.coordinates])):void console.assert(!1,"".concat(c.geometry.type," not supported"))},[]);let c=1/0,d=-Infinity,f=-Infinity,h=1/0;b.forEach(([a,b])=>{a<c&&(c=a),a>f&&(f=a),b<h&&(h=b),b>d&&(d=b)}),a.bbox=[c,d,f,h];const e=a.geojson.features.filter(({properties:a})=>a.timestamps&&a.timestamps.length);e.length&&(a.timebox=e.reduce((a,{properties:b})=>[i(a[0],b.timestamps[0]),j(a[1],b.timestamps.slice(-1)[0])],[1/0,-Infinity]))}return a}))}),this.bbox=(0,b.computed)("layers",function(){const a=this.layers.filter(a=>a.bbox).map(a=>a.bbox);return[i.apply(null,a.map(a=>a[0])),j.apply(null,a.map(a=>a[1])),j.apply(null,a.map(a=>a[2])),i.apply(null,a.map(a=>a[3]))]}),this.timebox=(0,b.computed)("layers",function(){const a=this.layers.filter(a=>a.timebox).map(a=>a.timebox);return a.length?[i.apply(null,a.map(a=>a[0])),j.apply(null,a.map(a=>a[1]))]:null}),this.playTime=(0,b.computed)("timebox",function(){return this.timebox?this.timebox[0]:null}),this.duration=(0,b.computed)("timebox",function(){const{timebox:a}=this;return a[1]-a[0]}),this.pos=(0,b.computed)("bbox",function(){return[(this.bbox[0]+this.bbox[2])/2,(this.bbox[1]+this.bbox[3])/2]}),this.z=(0,b.computed)("bbox","width","height",function(){const a=this.bbox,b=a[2]-a[0],c=a[1]-a[3];if(0===b||0===c)return 30;const[d,e]=this.model.zoom,{width:f,height:g}=this;let h;for(h=e;h>=d&&!(b*2**h<f&&c*2**h<g);h--);return h}),this.world=(0,b.computed)("pos","z","width","height","children.@each.layerWorld","cammode",function(){const{cammode:a}=this;if("child"===a){const a=this.children.filter(a=>a.layerWorld)[0];return a?a.layerWorld.slice():(0,c.identity)()}if("perspective"===a){const{width:a,height:b}=this;let d=(0,c.identity)();return d=(0,c.perspective)(m/2,a/b,1,1e3),d=(0,c.multiply)(d,(0,c.lookAt2)([0,-40,60],[0,0,0],[0,0,1])),d=(0,c.multiply)(d,(0,c.scaling)(2**this.z,2**this.z,1)),d=(0,c.multiply)(d,(0,c.translation)(-this.pos[0],-this.pos[1],0)),d}else{const{width:a,height:b}=this;let d=(0,c.identity)();return d=(0,c.multiply)(d,(0,c.orthographic)(a,b,-1,1)),d=(0,c.multiply)(d,(0,c.scaling)(2**this.z,2**this.z,1)),d=(0,c.multiply)(d,(0,c.translation)(-this.pos[0],-this.pos[1],0)),d}}),this.pnow=(0,b.computed)("playState",function(){return this.getOwner().now}),this.playing=(0,b.computed)("playState",function(){return"playing"===this.playState}),this.localDirty=(0,b.computed)("__owner__.now","playState","playTime","layers.@each.hidden","world",function(){return!0}),this.infull=!1}zoom(a){if(!a)this.bbox=this.bbox.slice();else if("full"===a){if(this.infull)document.webkitExitFullscreen();else{const a=this.getElement();a.webkitRequestFullScreen()}this.infull=!this.infull}else{const[b,c]=this.model.zoom;this.z=i(c,j(b,this.z+a))}}toggleLayer(a){a.hidden=!a.hidden}panAndZoom(a,b,c){1===c&&(a=-a/2,b=-b/2),c=this.z-c;const[d,e]=this.model.zoom;d<=c&&c<=e&&(this.pos=[this.pos[0]-a/2**c,this.pos[1]-b/2**c],this.z=c)}}a.default=f}),define(38,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="e3sjaWYgb3Blbn19IDxkaXYgY2xhc3M9Im1vZGFsIHt7ImlmIiBvcGVuICJzaG93In19IHt7Y2xhc3N9fSIgc3R5bGU9ImRpc3BsYXk6YmxvY2s7Ij4gPGRpdiBjbGFzcz0ibW9kYWwtZGlhbG9nIj4gPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCI+IDxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciI+IDxoNSBjbGFzcz0ibW9kYWwtdGl0bGUiPnt7dGl0bGV9fTwvaDU+IDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iY2xvc2UiIGRhdGEtZGlzbWlzcz0ibW9kYWwiIGFyaWEtbGFiZWw9IkNsb3NlIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJjbG9zZSIpfX0+IDxzcGFuIGFyaWEtaGlkZGVuPSJ0cnVlIj4mdGltZXM7PC9zcGFuPiA8L2J1dHRvbj4gPC9kaXY+IDxkaXYgY2xhc3M9Im1vZGFsLWJvZHkiPiA8eWllbGQtYmxvY2sgcGFyYW1zPXt7ImJvZHkifX0gLz4gPC9kaXY+IDxkaXYgY2xhc3M9Im1vZGFsLWZvb3RlciI+IDx5aWVsZC1ibG9jayBwYXJhbXM9e3siZm9vdGVyIn19IC8+IDwhLS0gPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQiIGRhdGEtZGlzbWlzcz0ibW9kYWwiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImNsb3NlIil9fT4gQ2xvc2UgPC9idXR0b24+IC0tPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4ge3svaWZ9fQ=="}close(){this.setOpen(!1)}}a.default=c}),define(39,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PHByZSBjbGFzcz17e2NsYXNzfX0+e3ttb2RlbC50ZXh0fX08L3ByZT4="}}a.default=c}),define(4,["exports",45,48],function(a,b,c){"use strict";function d(){const{widgets:a,formats:d}=window.marv_extensions||{};this.variant="MARV_VARIANT";for(let[c,[d,e]]of Object.entries(a||{}))this.components["widget-".concat(c)]=class extends b.Component{constructor(){super(),this.template="<div class=\"widget-".concat(c,"\"></div>")}didInsertElement(){this.state=d(this.getElement(),JSON.parse(JSON.stringify(this.model)))}willRemoveElement(){e(this.state)}};for(let[a,b]of Object.entries(d||{}))this.helpers["format-".concat(a)]=new c.Helper(a=>b(...JSON.parse(JSON.stringify(a))));"serviceWorker"in navigator&&async function(){try{await navigator.serviceWorker.register("sw.js")}catch(a){}}(),this.footerlinks=[{href:"https://gitlab.com/ternaris/marv-robotics",text:"Code"},{href:"https://gitlab.com/ternaris/marv-robotics/issues",text:"Issues"},{href:"docs/",text:"Documentation"}]}Object.defineProperty(a,"__esModule",{value:!0}),a.default=d}),define(40,["exports",45,46,49],function(a,b,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class f extends b.Component{constructor(){super(),this.template="PGRpdiBjbGFzcz0id2lkZ2V0LXRhYmxlIj4gPGRpdiBjbGFzcz0iYWN0aW9ucyBkLWZsZXgiPiA8ZGl2IGNsYXNzPSJmbGV4LWdyb3ctMSI+IHt7I2lmIHBhZ2luYXRlZC5sZW5ndGh9fSB7eyNpZiBzZWxlY3RhYmxlfX0gPGxhYmVsIHN0eWxlPSJwYWRkaW5nLWxlZnQ6IDhweCIgY2xhc3M9Im1yLTIiPiA8aW5wdXQtY2hlY2tib3ggdmFsdWU9e3thbGxDaGVja2VkfX0gY2hhbmdlQWN0aW9uPXt7ImZuIiB0b2dnbGVBbGx9fSAvPiBBbGwgKHt7c2VsZWN0ZWRSb3dzLmxlbmd0aH19IHJvd3Mgc2VsZWN0ZWQpIDwvbGFiZWw+IHt7L2lmfX0gPGRpdiBjbGFzcz0iZC1pbmxpbmUtYmxvY2siPiA8eWllbGQtYmxvY2sgcGFyYW1zPXt7c2VsZWN0ZWRSb3dzfX0gLz4gPC9kaXY+IHt7L2lmfX0gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJzY3JvbGwtd3JhcCI+IDx0YWJsZSBjbGFzcz0idGFibGUgdGFibGUtaG92ZXIiPiA8dGhlYWQ+IDx0cj4ge3sjaWYgc2VsZWN0YWJsZX19PHRoPjwvdGg+e3svaWZ9fSB7eyNlYWNoIGNvbHVtbnMgYXMgfGNvbCBpbmRleHx9fSA8dGggY2xhc3M9ImludGVyYWN0aXZlIHRleHQte3tjb2wuYWxpZ259fSB7eyJpZiIgKCJhbmQiIHZpc2liaWxpdHlPcGVuICgibm90IiBjb2wudmlzaWJsZSkpICJiZy1zZWNvbmRhcnkifX0iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInNvcnRieSIgaW5kZXgpfX0+IHt7Y29sLnRpdGxlfX17eyNpZiAoImlzLWVxdWFsIiBpbmRleCBzb3J0KX19IDx3aWRnZXQtaWNvbiBjbGFzcz0iYmFzZWxpbmUiIGdseXBoPSJzb3J0LXt7ImlmIiBkZXNjZW5kaW5nICJkZXNjZW5kaW5nIiAiYXNjZW5kaW5nIn19IiAvPnt7ZWxzZX19Jm5ic3A7e3svaWZ9fSA8L3RoPiB7ey9lYWNofX0gPC90cj4gPC90aGVhZD4gPHRib2R5PiB7eyNlYWNoICgiemlwIiBwYWdpbmF0ZWQgY2hlY2tib3hlcykgYXMgfHJvdyBpbmRleHx9fSA8dHIgY2xhc3M9InhtLWFuaW1hdGUiPiB7eyNpZiBzZWxlY3RhYmxlfX0gPHRkPiA8aW5wdXQtY2hlY2tib3ggdmFsdWU9e3tyb3cuMX19IGNoYW5nZUFjdGlvbj17eyJmbiIgdG9nZ2xlSXRlbSBpbmRleH19IC8+IDwvdGQ+IHt7L2lmfX0ge3sjZWFjaCAoInppcCIgY29sdW1ucyByb3cuMC52YWx1ZXMpIGFzIHxjb2x8fX0gPHRkIGNsYXNzPSJ0ZXh0LXt7Y29sLjAuYWxpZ259fSI+IHt7I2lmIGNvbC4wLmxpc3R9fSB7eyNlYWNoIGNvbC4xIGFzIHx2YWx8fX0ge3soY29sLjAuZm9ybWF0dGVyIHZhbCl9fSB7ey9lYWNofX0ge3tlbHNlfX0ge3soY29sLjAuZm9ybWF0dGVyIGNvbC4xKX19IHt7L2lmfX0gPC90ZD4ge3svZWFjaH19IDwvdHI+IHt7L2VhY2h9fSA8L3Rib2R5PiA8L3RhYmxlPiA8L2Rpdj4ge3sjaWYgKCJpcy1ncmVhdGVyIiBudW1QYWdlcyAxKX19IDxuYXYgY2xhc3M9InRleHQtY2VudGVyIj4gPHVsIGNsYXNzPSJwYWdpbmF0aW9uIHBhZ2luYXRpb24tc20gZC1pbmxpbmUtZmxleCI+IDxsaSBjbGFzcz0icGFnZS1pdGVtIHt7ImlmIiBwYWdlci5wcmV2LmRpc2FibGVkICJkaXNhYmxlZCJ9fSI+IDxhIGhyZWY9IiMiIGNsYXNzPSJwYWdlLWxpbmsiIGFyaWEtbGFiZWw9IlByZXZpb3VzIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJwcmV2UGFnZSIpfX0+IDxzcGFuIGFyaWEtaGlkZGVuPSJ0cnVlIj4mbGFxdW87PC9zcGFuPiA8L2E+IDwvbGk+IHt7I2VhY2ggcGFnZXIucGFnZXMgYXMgfHBhZ2V8fX0gPGxpIGNsYXNzPSJwYWdlLWl0ZW0ge3siaWYiIHBhZ2UuYWN0aXZlICJhY3RpdmUifX0ge3siaWYiIHBhZ2UuZGlzYWJsZWQgImRpc2FibGVkIn19Ij48YSBocmVmPSIjIiBjbGFzcz0icGFnZS1saW5rIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJzZXRwYWdlIiBwYWdlLm51bSl9fT57e3BhZ2UubnVtfX08L2E+PC9saT4ge3svZWFjaH19IDxsaSBjbGFzcz0icGFnZS1pdGVtIHt7ImlmIiBwYWdlci5uZXh0LmRpc2FibGVkICJkaXNhYmxlZCJ9fSI+IDxhIGhyZWY9IiMiIGNsYXNzPSJwYWdlLWxpbmsiIGFyaWEtbGFiZWw9Ik5leHQiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgIm5leHRQYWdlIil9fT4gPHNwYW4gYXJpYS1oaWRkZW49InRydWUiPiZyYXF1bzs8L3NwYW4+IDwvYT4gPC9saT4gPC91bD4gPC9uYXY+IHt7L2lmfX0gPC9kaXY+",this.selectable=(0,d.computed)("selectableForce","model.actions",function(){return this.selectableForce||!!(this.model.actions&&this.model.actions.length)}),this.columns=(0,d.computed)("model",function(){const a=JSON.parse(localStorage.getItem(this.cacheid)||"{\"visibility\":{}}");return d.A.from(this.model.columns,b=>Object.assign(new d.O,b,{formatter:"format-".concat(b.formatter),visible:!1!==a.visibility[b.title],query:""}))}),this.indices=(0,d.computed)("model",function(){return Uint32Array.from({length:this.model.rows.length},(a,b)=>b)}),this.selected=(0,d.computed)("model",function(){return new Int8Array(this.model.rows.length)}),this.allChecked=!1,this.selectedRows=new d.A,this.sort=(0,d.computed)("model.sortcolumn",function(){return this.model.sortcolumn}),this.descending=(0,d.computed)("model.sortorder",function(){return"descending"===this.model.sortorder}),this.cache=(0,d.computed)("model",function(){return this.model.__cache||(this.model.__cache={}),this.model.__cache}),this.omodel=(0,d.computed)("model",function(){const a=d.O.create(this.model);return a}),this.sortedidxs=(0,d.computed)("sort","descending","model.rows",function(){const{model:{rows:f},sort:a,descending:b,cache:c,indices:d}=this;if(null===a||!f.length)return new Uint32Array;const g="sort".concat(a);if(!(g in c)){let b;if(this.model.columns[a].sortkey){const c=this.model.columns[a].sortkey;b=a=>null===a?"":a[c]}else b=this.model.columns[a].list?a=>null===a?"":a.length:a=>null===a?"":a;const h=f.map(c=>b(c.values[a])),i=d.slice();(0,e.sort)(i,(a,b)=>(a=h[a],b=h[b],a===b?0:a>b?1:-1)),c[g]=i}const h=b?c[g].slice().reverse():c[g];return h}),this.page=0,this.pagesizes=[50,100],this.pagesize=50,this.filteredidxs=(0,d.computed)("sortedidxs","model.rows","filtersOpen","columns.@each.query",function(){const{model:{rows:b},sortedidxs:a}=this;let c,d=null;return c=a,c}),this.pageidxs=(0,d.computed)("filteredidxs","page","pagesize","columns",function(){const{page:a,pagesize:b,filteredidxs:c}=this;return-1===b?c:c.subarray(a*b,(a+1)*b)}),this.checkboxes=(0,d.computed)("pageidxs",function(){const{selected:a}=this;return d.A.from(this.pageidxs,b=>a[b])}),this.numPages=(0,d.computed)("filteredidxs","pagesize",function(){return this.pagesize?Math.ceil(this.filteredidxs.length/this.pagesize):1}),this.paginated=(0,d.computed)("pageidxs",function(){const{pageidxs:a}=this;return Array.from(a,a=>this.model.rows[a])}),this.pagersize=7,this.pager=(0,d.computed)("page","pagesize","filteredidxs",function(){if(this.filteredidxs.length<this.pagesize)return[];const a={prev:{disabled:0===this.page,page:this.page-1},next:{disabled:this.page===this.numPages-1,page:this.page+1},pages:[]};for(let b=0,c=this.numPages;b<c;b++)a.pages.push({num:b+1,active:b===this.page});if(a.pages.length>this.pagersize){const b={num:"...",disabled:!0},c=this.pagersize-1,d=c>>1,e=(c>>1)+(1&c);this.page<=d?a.pages.splice(c-1,a.pages.length-c,b):this.page>=a.pages.length-1-e?a.pages.splice(1,a.pages.length-c,b):(a.pages.splice(this.page+e-1,a.pages.length-1-(this.page+e-1),b),a.pages.splice(1,this.page-(d-1),b))}return a})}toggleItem(a){const b=this.pageidxs[a];this.checkboxes[a]=!this.checkboxes[a],this.selected[b]=!this.selected[b],this.allChecked=!this.selected.some(a=>!a);const c=this.model.rows[b];this.selected[b]?this.selectedRows.push(c):this.selectedRows.splice(this.selectedRows.indexOf(c),1),this.selectionChange&&this.selectionChange(this.selectedRows)}toggleAll(){this.allChecked?(this.checkboxes.fill(0),this.selected.fill(0)):(this.checkboxes.fill(1),this.selected.fill(1)),this.allChecked=!this.selected.some(a=>!a),this.selectedRows=this.allChecked?d.A.from(this.model.rows):new d.A,this.selectionChange&&this.selectionChange(this.selectedRows)}prevPage(a){a.preventDefault(),0<this.page&&this.page--}nextPage(a){a.preventDefault(),this.page<this.numPages-1&&this.page++}setpage(a,b){b.preventDefault();"..."===a||(this.page=a-1)}sortby(a){var b=this.sort;b===a?this.descending=!this.descending:(this.descending=!1,this.sort=a)}}a.default=f}),define(41,["exports",45,46],function(a,b,c){"use strict";function d(a,b){do{if(a===b)return!0;b=b.parentElement}while(b.parentElement);return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class e extends b.Component{constructor(){super(),this.template="PHNwYW4gY2xhc3M9IndpZGdldC10YWciPiA8c3BhbiBjbGFzcz0iZHJvcGRvd24ge3siaWYiIGZvY3VzZWQgInNob3cifX0iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImtleWRvd24iIG9uPSJrZXlkb3duIil9fSB7eyJhY3Rpb24iICgibm9leHBhbmQiICJmb2N1c0luIiBvbj0iZm9jdXNpblgiKX19IHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImZvY3VzT3V0IiBvbj0iZm9jdXNvdXRYIil9fT4gPHNwYW4gY2xhc3M9ImJhY2tkcm9wIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJmb2N1c0luIil9fT48L3NwYW4+IDxidXR0b24gcm9sZT0iYnV0dG9uIiBjbGFzcz0ie3tjbGFzc319IGRyb3Bkb3duLXRvZ2dsZSIgZGlzYWJsZWQ9e3tmdWxsZGlzYWJsZWR9fSB7eyJhY3Rpb24iICgibm9leHBhbmQiICJmb2N1c0luIil9fT50YWc8L2J1dHRvbj4gPGRpdiBjbGFzcz0iZHJvcGRvd24tbWVudSB7eyJpZiIgZm9jdXNlZCAic2hvdyJ9fSB7e21lbnVDbGFzc319Ij4ge3sjaWYgZGlzYWJsZWR9fSA8YSBjbGFzcz0iZHJvcGRvd24taXRlbSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiYWx0QWN0aW9uIil9fT5TaWduIGluIHRvIHRhZzwvYT4ge3tlbHNlfX0gPGZvcm0gY2xhc3M9InB4LTEgcHktMSI+IDxpbnB1dC1jb250cm9sIHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgZm9ybS1jb250cm9sLXNtIiBwbGFjZWhvbGRlcj0iTGFiZWwiIHZhbHVlPXt7c2VhcmNofX0gY2hhbmdlQWN0aW9uPXt7ImN1cnJ5IiAoIm5vZXhwYW5kIiAoInNldCIgKCJub2V4cGFuZCIgc2VhcmNoKSkpfX0gLz4gPC9mb3JtPiA8ZGl2IGNsYXNzPSJkcm9wZG93bi1kaXZpZGVyIj48L2Rpdj4ge3sjZWFjaCByZXN1bHRzIGFzIHx0YWd8fX0gPGEgY2xhc3M9ImRyb3Bkb3duLWl0ZW0iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInRvZ2dsZSIgdGFnKX19IHRpdGxlPXt7dGFnLmhpbnR9fSB0YWJpbmRleD0tMT4gPHdpZGdldC1pY29uIGNsYXNzPSJiYXNlbGluZSIgZ2x5cGg9e3siaWYiIHRhZy5zdGF0ZSB0YWcuc3RhdGUgImRpZmYtYWRkZWQifX0gLz4ge3t0YWcubmFtZX19IDwvYT4ge3svZWFjaH19IDxkaXYgY2xhc3M9ImRyb3Bkb3duLWRpdmlkZXIiPjwvZGl2PiA8Zm9ybSBjbGFzcz0icHgtMSB4cHktMSB0ZXh0LXJpZ2h0Ij4gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBidG4teHMiIHR5cGU9ImJ1dHRvbiIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiY2FuY2VsIil9fT5DYW5jZWw8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBidG4teHMiIHR5cGU9ImJ1dHRvbiIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAic2F2ZSIpfX0gZGlzYWJsZWQ9e3t1bnNhdmVhYmxlfX0+U2F2ZSB0YWdzPC9idXR0b24+IDwvZm9ybT4ge3svaWZ9fSA8L2Rpdj4gPC9zcGFuPiA8L3NwYW4+",this.tags=null,this.alltags=null,this.search="",this.changed=!1,this.unsaveable=(0,c.computed)("changed",function(){return!this.changed}),this.realtags=(0,c.computed)("focused",function(){if(!this.tags.length)return c.A.create();if("string"==typeof this.tags[0])return c.A.create(this.tags);else{let a=this.tags[0].tags.slice();return this.tags.forEach(b=>{a=a.filter(a=>~b.tags.indexOf(a))}),c.A.create(a)}}),this.mtags=(0,c.computed)("realtags",function(){return c.A.create(this.realtags)}),this.malltags=(0,c.computed)("focused",function(){return c.A.create(this.alltags)}),this.vtags=(0,c.computed)("mtags.@each","malltags.@each",function(){return c.A.create(this.realtags.map(a=>c.O.create({name:a,state:~this.mtags.indexOf(a)?"task":"task-no"})).concat(this.malltags.filter(a=>!~this.realtags.indexOf(a)).map(a=>c.O.create({name:a,state:~this.mtags.indexOf(a)?"task":"task-no"}))))}),this.results=(0,c.computed)("search","vtags.@each",function(){const a=this.search,b=new RegExp(a,"i"),d=c.A.create(this.vtags.filter(a=>b.test(a.name)));return a&&!d.filter(b=>b.name===a).length&&d.push(c.O.create({name:"create \"".concat(a,"\""),action:"create",label:this.search})),d}),this.focused=!1}focusIn(a){console.log("in",a.target),this.search="",this.changed=!1,this.focused=!this.focused}focusOut(a){if(console.log("out",a.target,a.relatedTarget),a.relatedTarget){const b=this.getElement();if(d(b,a.relatedTarget))return}this.focused=!1}toggle(a){"create"===a.action?(this.mtags.push(this.search),!~this.malltags.indexOf(this.search)&&this.malltags.push(this.search),this.search=""):~this.mtags.indexOf(a.name)?this.mtags.splice(this.mtags.indexOf(a.name),1):this.mtags.push(a.name),this.changed=!0}keydown(a){const b=a;13===b.keyCode&&(this.search&&(~this.malltags.indexOf(this.search)?~this.mtags.indexOf(this.search)?this.mtags.splice(this.mtags.indexOf(this.search),1):this.mtags.push(this.search):(this.malltags.push(this.search),this.mtags.push(this.search)),this.search=""),this.changed=!0,b.stopPropagation(),b.preventDefault())}cancel(){this.focused=!1}save(){this.changed||this.toggle({action:"create"});const a=this.mtags.filter(a=>!~this.realtags.indexOf(a)),b=this.realtags.filter(a=>!~this.mtags.indexOf(a));this.changeAction({added:a,removed:b}),this.focused=!1}}a.default=e}),define(42,["exports",45],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class c extends b.Component{constructor(){super(),this.template="PHZpZGVvIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInRvZ2dsZSIpfX1jb250cm9scz17e2NvbnRyb2xzfX0gc3JjPXt7bW9kZWwuc3JjfX0gLz4=",this.controls=!0}toggle(){const a=this.getElement();a.paused?a.play():a.pause()}}a.default=c}),define(43,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.Component{constructor(){super(),this.template="e3sjaWYgZXJyb3J9fSA8ZGl2IGNsYXNzPSJqdW1ib3Ryb24iPiA8aDEgY2xhc3M9InRleHQtY2VudGVyIj4gPHdpZGdldC1pY29uIGdseXBoPXt7aWNvbn19IGNsYXNzPSJ3aWRnZXQtaWNvbi1sZyIgLz4gPC9oMT4gPHAgY2xhc3M9InRleHQtY2VudGVyIj57e2Vycm9yfX08L3A+IDwvZGl2PiB7e2Vsc2UgaWYgKCJpcy1wcm9taXNlIiBtb2RlbCl9fSA8ZGl2IGNsYXNzPSJqdW1ib3Ryb24iPiA8aDEgY2xhc3M9InRleHQtY2VudGVyIj4gPHdpZGdldC1pY29uIGdseXBoPXt7aWNvbn19IGNsYXNzPSJ3aWRnZXQtaWNvbi1sZyIgLz4gPC9oMT4gPGRpdiBjbGFzcz0iY3NzbG9hZC1sb2FkZXIiPiA8ZGl2IGNsYXNzPSJjc3Nsb2FkLWlubmVyIGNzc2xvYWQtMSI+PC9kaXY+IDxkaXYgY2xhc3M9ImNzc2xvYWQtaW5uZXIgY3NzbG9hZC0yIj48L2Rpdj4gPGRpdiBjbGFzcz0iY3NzbG9hZC1pbm5lciBjc3Nsb2FkLTMiPjwvZGl2PiA8ZGl2IGNsYXNzPSJjc3Nsb2FkLWlubmVyIGNzc2xvYWQtNCI+PC9kaXY+IDwvZGl2PiA8L2Rpdj4ge3tlbHNlfX08eWllbGQtYmxvY2sgLz57ey9pZn19",this.model=(0,c.computed)("scope.parent.ctx.model",function(){return this.scope.parent.ctx.model}),this.error=(0,c.computed)("acl","model.error",function(){if(!this.acl){const a=this.user?403:401;return this["e".concat(a)]}if(this.model&&this.model.error){const a=this.model.error.status;return this["e".concat(a)]?this["e".concat(a)]:JSON.stringify(this.model&&this.model.error)}})}}a.default=d}),define(45,["exports",46,48,56],function(a,b,c,d){"use strict";function e(a){return(0,d.parse)(/[ <{]/.test(a)?a:decodeURIComponent(escape(atob(a))))}function f(a,b,c){for(let d of a)if(d[b]===c)return d;return null}function g(a,d,e,f,g,i,j,l,m,n){if(console.assert(g.ctx===l),console.assert(j===l.__owner__),"Condition"===e.type){a.leafs.push(d);const b=f.createTextNode("");m.appendChild(b),g.createUpdater(i,d,"".concat(d.prefix,"-condition"),e.conditions,(a,c)=>{if(d.branch!==a){d.unrender(!0),d.branch=a;const f=e.branches[d.branch];f&&(c?h(d,f,g,b.parentNode,null):d.renderEnter(f,g,b))}})}else if("Loop"===e.type){a.leafs.push(d);const b=f.createTextNode("");m.appendChild(b);const c=e.params[0]||"__itemname__",l=e.params[1]||"__indexname__";e.list.list=!0;const n=[];g.createUpdater(i,d,"".concat(d.prefix,"-loop"),e.list,(a,f)=>{if(a&&a.length){if(1===d.leafs.length&&e.catchempty)d.unrender(!0);else if(d.leafs.length){for(let b=a.length*e.content.length,c=d.leafs.length;b<c;b++)d.leafs[b].unrender(!0,!0);d.leafs.splice(a.length*e.content.length,d.leafs.length-a.length*e.content.length),n.splice(a.length,n.length-a.length)}for(let b=n.length,d=a.length;b<d;b++){const d=k.create({parent:g,[c]:a[b],[l]:b,ctx:g.ctx});n.push(d)}for(let b=0,d=a.length;b<d;b++)n[b][c]=a[b];for(let c=d.leafs.length/e.content.length,g=a.length;c<g;c++)f?h(d,e.content,n[c],b.parentNode,b):d.renderEnter(e.content,n[c],b)}else n.length&&(n.splice(0,n.length),d.unrender(!0)),e.catchempty&&!d.leafs.length&&(f?h(d,e.catchempty,g,b.parentNode,b):d.renderEnter(e.catchempty,g,b));d.getElements().forEach(a=>b.parentNode.insertBefore(a,b))})}else if("Component"===e.type){a.leafs.push(d);const c=e.name,i=l.getOwner().components[c];if(!i)throw new Error("Component ".concat(c," does not exist"));const j={__doc__:f,__owner__:l.__owner__,__oast__:e,scope:g.subscope({}),leaf:d};e.attributes.forEach(a=>{j[a.name]="Literal"===a.value.type?a.value.value:(0,b.computed)({get(){const c={},d=this.scope.parent.evalExpression(a.value,c);return(0,b.updateComputed)(this.instance,a.name,Object.keys(c).map(a=>"scope.parent.".concat(a))),d},set:null})}),d.component=i.create(j),h(d,d.component.__ast__,d.component.scope,m,n),d.component.__render__()}else if("Identifier"===e.type&&"ctx.outlet"===e.value){a.leafs.push(d);const b=f.createTextNode("");m.appendChild(b),g.createUpdater(i,a,"".concat(a.prefix,"-outlet"),e,a=>{d.component&&d.unrender(!0),d.component=a,a&&(Object.assign(a,{__doc__:f,__owner__:l.__owner__,leaf:d}),h(d,d.component.__ast__,d.component.scope,b.parentNode,b),d.component.__render__())})}else if("Literal"===e.type)a.leafs.push(d),d.elements=[f.createTextNode(e.value)],m.insertBefore(d.elements[0],n);else if("Tag"===e.type){a.leafs.push(d),d.elements=[f.createElement(e.name)],m.insertBefore(d.elements[0],n);for(let a=0,b=e.attributes.length;a<b;a++){const b=e.attributes[a];if(b.name)"Literal"===b.value.type?d.elements[0].setAttribute(b.name,b.value.value):g.createUpdater(i,d,"".concat(d.prefix,"-").concat(b.name),b.value,a=>{"undefined"!=typeof a&&!1!==a?d.elements[0].setAttribute(b.name,a):d.elements[0].removeAttribute(b.name)});else{let a=null;g.createUpdater(i,d,"".concat(d.prefix,"-").concat(Math.random()),b.value,b=>{b?(a=b.name,d.elements[0].setAttribute(a,b.value),b.listener&&d.elements[0].addEventListener(...b.listener)):a&&(d.elements[0].removeAttribute(a),a=null)})}}h(d,e.content,g,d.elements[0],null)}else{console.assert("Identifier"===e.type||"Expression"===e.type),a.leafs.push(d),d.elements=[f.createTextNode("")],m.appendChild(d.elements[0]);let b=0;g.createUpdater(i,d,"".concat(d.prefix,"-content"),e,a=>{const g=d.elements;if(a instanceof c.HTML){const c=f.createElement("div");c.innerHTML=a.content,d.elements=Array.from(c.children),d.elements.length||(d.elements=[f.createTextNode("")]),d.elements.forEach(a=>g[0].parentNode.insertBefore(a,g[0])),g.forEach(a=>a.remove()),b=0}else("undefined"==typeof a||a instanceof Promise)&&(a=""),1==b?d.elements[0].textContent=a:(d.elements=[f.createTextNode(a)],g[0].parentNode.insertBefore(d.elements[0],g[0]),g.forEach(a=>a.remove()),b=1)})}}function h(a,b,c,d,e){const f=c.ctx,h=f.__owner__,j=f.__doc__,{rootNode:k}=h;for(let m=0,i=b.length;m<i;m++){const i=b[m],n=new l(h,a.depth+1,"".concat(a.prefix,"-").concat(m));g(a,n,i,j,c,k,h,f,d,e)}}Object.defineProperty(a,"__esModule",{value:!0}),a.components=a.RoutableComponent=a.Component=a.Scope=void 0;const i={};class k extends b.O{constructor(){super()}subscope(a){return a.parent=this,k.create(a)}getHelper(a){const b=this.ctx.getOwner().helpers[a];if(!b)throw new Error("Helper ".concat(a," does not exist."));return b}getPath(a){if(!i[a]){let b=a.split("."),c=[];if(2===b.length&&"ctx"===b[0])c.push("return typeof obj.".concat(a," !== 'undefined' ? obj.").concat(a," : undefined;"));else{b=b.map(a=>/^-?[0-9]*$/.test(a)?"obj[".concat(a,"]"):"obj.".concat(a));for(let a=0,d=b.length-1;a<d;a++)c.push("if(obj) obj=".concat(b[a],"; else return '';"));c.push("return obj ? ".concat(b[b.length-1]," : '';"))}i[a]=new Function("obj",c.join("\n"))}return i[a](this)}setPath(a,b){const c=a.split(".");let d=this;for(let e=0,f=c.length-1;e<f;e++)if(d=d[c[e]],"object"!=typeof d)throw new Error("Cannot set path ".concat(a," to ").concat(b));d[c[c.length-1]]=b}evaluate(a,b,c,d){if("Literal"===a.type)return~b.indexOf(a.value)||b.push(a.value),"__lit[".concat(b.indexOf(a.value),"]");if("Identifier"===a.type)return~c.indexOf(a.value)||c.push(a.value),"__ide[".concat(c.indexOf(a.value),"]");else{if(console.assert("Expression"===a.type||"Invocation"===a.type),"path"===a.value[0].value)return b.push(a.value[1].value),"__lit[".concat(b.length-1,"]");if("noexpand"===a.value[0].value)return b.push(a.value.slice(1)),"__lit[".concat(b.length-1,"]");const e=this.evaluate(a.value[0],b,c,d),f="obj.getHelper(".concat(e,")");~d.indexOf(f)||d.push(f);const g="__con".concat(d.indexOf(f)),h=a.value.slice(1).map(e=>this.evaluate(e,b,c,d));return"".concat(g,".fn.call(obj, [").concat(h,"], triggers)")}}evalExpression(a,b){if("Literal"===a.type)return a.value;if("Identifier"===a.type)return b[a.value]=!0,this.getPath(a.value);if(!a.fn){const b=[],c=[],d=[],e=this.evaluate(a,b,c,d),f=[];for(let a in c)f.push("triggers[\"".concat(c[a],"\"] = true;"));for(let a=0;a<d.length;a++)f.push("const __con".concat(a," = ").concat(d[a],";"));f.push("return ".concat(e,";")),a.fn=new Function("obj","triggers","__lit","__ide",f.join("\n")),a.__lit=b,a.__ide=c}return a.fn(this,b,a.__lit,a.__ide.map(b=>this.getPath(b)))}createUpdater(a,c,d,e,f){c.updaters.push([this.instance,d]);let g=!0;(0,b.convertComputed)(this.instance,d,{get(){let a={};const c=this.evalExpression(e,a);f.apply(this,[c,g]),g=!1,(0,b.updateComputed)(this,d,Object.keys(a))},set:null,keys:[],notify:()=>{a.__dirty__.push([this,d,c.depth]),a.getOwner().asyncEvent(()=>{})()}}),this[d]}}a.Scope=k;class l{constructor(a,b,c){this.owner=a,this.depth=b,this.prefix=c,this.updaters=[],this.leafs=[],this.elements=null,this.component=null}render(a){if(this.component)return h(this,this.component.__ast__,this.component.scope,a,null),void this.component.__render__();throw new Error("Render on non component?")}renderEnter(a,c,d){const e=d.ownerDocument.createDocumentFragment();h(this,a,c,e,null);const f=[];Array.from(e.children).forEach(a=>{a.classList&&a.classList.contains("m-animate")&&f.push(a)}),f.length&&f.forEach(a=>{a.classList.add("m-animating","m-enter-from");const c=new b.O;c.owner=this.owner;let d=0;(0,b.convertComputed)(c.instance,"enter",{get(){0===d&&(a.classList.remove("m-enter-from"),a.classList.add("m-enter-to")),d++},notify:()=>{this.owner.rootNode.__dirty__.push([c,"enter",this.depth]),this.owner.asyncEvent(()=>{})()},keys:["owner.now"]});const e=d=>{d.target===a&&((0,b.deleteComputed)(c.instance,"enter"),a.classList.remove("m-animating","m-enter-to"),a.removeEventListener("transitionend",e))};a.addEventListener("transitionend",e,!1),this.owner.rootNode.__dirty__.push([c,"enter",this.depth]),this.owner.asyncEvent(()=>{})()}),d.parentNode.insertBefore(e,d)}notifyUnrender(){this.component&&(this.component.__unrender__(),!this.component.__route__&&this.component.dispose(),this.component=null)}unrender(a,c){let d=[];if(a&&(d=this.getElements()),(!a||c)&&(this.updaters.forEach(a=>(0,b.deleteComputed)(a[0],a[1])),this.updaters=[]),this.component&&this.notifyUnrender(),this.leafs.forEach(a=>a.unrender()),this.leafs=[],a){const a=[];d.forEach(b=>b.classList&&b.classList.contains("m-animate")?void a.push(b):void b.remove()),a.length&&a.forEach(a=>{a.classList.add("m-animating","m-leave-from");const c=new b.O;c.owner=this.owner;let d=0;(0,b.convertComputed)(c.instance,"leave",{get(){0===d&&(a.classList.remove("m-leave-from"),a.classList.add("m-leave-to")),d++},notify:()=>{this.owner.rootNode.__dirty__.push([c,"leave",this.depth]),this.owner.asyncEvent(()=>{})()},keys:["owner.now"]});const e=d=>{d.target===a&&((0,b.deleteComputed)(c.instance,"leave"),a.removeEventListener("transitionend",e),a.remove())};a.addEventListener("transitionend",e,!1),this.owner.rootNode.__dirty__.push([c,"leave",this.depth]),this.owner.asyncEvent(()=>{})()})}}getElements(){return this.elements?this.elements:(this.component&&console.assert(this.component.leaf===this),this.leafs.reduce((a,b)=>a.concat(b.getElements()),[]))}}const m=new WeakMap;class n extends b.O{constructor(){super(),this.template="<span>This is the default component template</span>",this.inDOM=!1,this.__ast__=(0,b.computed)(function(){return m[this.template]||(m[this.template]=this.template?e(this.template):[]),m[this.template]}),this.__oast__=null,this.__dirty__=null,this.__inDOM__=!1}init(){super.init(),this.scope.ctx=this}dispose(){console.assert(!this.__inDOM__,"component ".concat(this.__oid__," should be unrenderd before dispose")),console.assert(!this.__component_disposed__,"component ".concat(this.__oid__," was already disposed")),this.__component_disposed__=!0,super.dispose()}initializeLeaf(){this.__dirty__=[],this.leaf=new l(this.getOwner(),0,"watch"),this.leaf.component=this}__render__(){console.assert(!this.__inDOM__,"Element ".concat(this.__oid__," should not be in DOM for render")),this.__inDOM__=!0,this.didInsertElement()}__unrender__(){console.assert(this.__inDOM__,"Element ".concat(this.__oid__," should be in DOM for unrender")),this.willRemoveElement(),this.__inDOM__=!1}didInsertElement(){}willRemoveElement(){}getAst(){return this.__oast__}getElements(){return this.leaf.getElements()}getElement(){for(let a of this.leaf.getElements())if(1===a.nodeType)return a}update(){const a=this.__dirty__;this.__dirty__=[],a.sort((c,a)=>c[2]<a[2]?-1:1);for(let b=0,c=a.length;b<c;b++)a[b][0][a[b][1]]}}a.Component=n;a.RoutableComponent=class extends n{constructor(){super(),this.scope=k.create(),this.__route__=!0}modelHook(){}redirect(){}error(){}loading(){}didEnter(){}didLeave(){}willTransition(){}transitionTo(a){this.getOwner().router.transitionTo(a)}};a.components={"link-to":class extends n{constructor(){super(),this.template="<a href={{chref}} class={{cclass}}><yield-block/></a>",this.chref=(0,b.computed)("href","__owner__.router.currentQuery",function(){const a=this.__owner__.router.currentQuery;return"".concat(window.location.pathname).concat(a?"?".concat(a):"","#/").concat(this.href)}),this.cclass=(0,b.computed)("__owner__.router.currentRoute","href",function(){return"".concat(this.class||""," ").concat(this.getOwner().router.currentRoute===this.href?"active":"").trim()})}},"delegate-component":class extends n{init(){super.init();const{attributes:a,content:b}=this.getAst();this.__ast__=[{type:"Component",name:this.component,attributes:a.map(b=>({name:b.name,value:{type:"Identifier",value:"ctx.".concat(b.name)}})),params:[],content:b}]}},"yield-block":class extends n{init(){super.init();const{content:a,params:c}=this.scope.parent.ctx.getAst();this.__ast__=a,this.scope.ctx=this.scope.parent.parent.ctx;let d=f(this.getAst().attributes,"name","params");d&&(d="Invocation"===d.value.type?d.value.value:[d.value],console.assert(c.length===c.length,"Component yield parameters do not match"),c.forEach((a,c)=>{if("Literal"===d[c].type)this.scope[a]=d[c].value;else{const e=d[c].value;(0,b.convertComputed)(this.scope.instance,a,{get:()=>this.scope.getPath("parent.".concat(e)),set:null,keys:["parent.".concat(e)]})}}))}}}}),define(46,["exports"],function(a){"use strict";function b(a){return a instanceof p||a instanceof n}function c(a,f,g,i){const j=a[h.watched],k=j[/^[0-9]+/.test(f)?"@each":f];if(k)for(let[a,j]of Object.entries(k)){j.subtree._hasLeaf&&(i||g)&&("@each"===f?(g.forEach(c=>{b(c)&&e(c.instance,j.origin,j.subtree,a)}),i.forEach(c=>{b(c)&&d(c.instance,j.origin,j.subtree,a)})):(b(g)&&e(g.instance,j.origin,j.subtree,a),b(i)&&d(i.instance,j.origin,j.subtree,a)));const k=j.origin,l=k.target,m=k.property,n=l[h.watchers][m];n.cached&&(n.cached=!1,n.notify&&n.notify(l,f,g,i),c(l,m))}}function d(a,c,e,f){const g=a[h.watched];for(let i in e){const j=e[i],k="".concat(f,".").concat(i);if(g[i]||(g[i]={}),g[i][k]){g[i][k].ref++;continue}if(g[i][k]={ref:1,origin:c,subtree:j},!!j._hasLeaf)if("@each"==i)for(let e=0,f=a.length;e<f;e++){const f=a[e];b(f)&&d(f.instance,c,j,k)}else{const e=a[h.watchers][i],f=e?e.value:a[i];b(f)&&d(f.instance,c,j,k)}}}function e(a,c,d,f){const g=a[h.watched];for(let i in d){const j=d[i],k="".concat(f,".").concat(i);if(! --g[i][k].ref&&(delete g[i][k],!!j._hasLeaf))if("@each"==i)for(let d=0,f=a.length;d<f;d++){const f=a[d];b(f)&&e(f.instance,c,j,k)}else{const d=a[h.watchers][i],f=d?d.value:a[i];b(f)&&e(f.instance,c,j,k)}}}function f(a){const b=a.join("");if(!k[b]){const c={};Object.defineProperty(c,"_hasLeaf",{value:!1,enumerable:!1,writable:!0}),a.forEach(a=>{const b=a.split(".");let d=c;for(let c=0,e=b.length;c<e;c++){const a=b[c];d._hasLeaf=!0,d[a]||(d[a]={},Object.defineProperty(d[a],"_hasLeaf",{value:!1,enumerable:!1,writable:!0})),d=d[a]}}),k[b]=c}return k[b]}function g(a,b,e){a[h.watchers][b]={keys:e.keys,value:null,cached:!1,notify:e.notify};const g=a[h.watchers][b];Object.defineProperty(a,b,{get(){if(!g.cached){const d=g.value;if(g.value=e.get.apply(a),g.value instanceof Promise){const d=g.promise=g.value;g.promise.then(e=>{d===g.promise&&(g.value=e,c(a,b,g.promise,g.value),g.cached=!0)},e=>{d===g.promise&&(g.value={error:e},c(a,b,g.promise,g.value),g.cached=!0)})}c(a,b,d,g.value),g.cached=!0}return g.value},set(a){e.set&&e.set.apply(this,arguments);const c=this[h.watchers][b];c.cached=!0,c.value=a},configurable:!0}),e.keys.length&&d(a,{target:a,property:b,wdesc:g},f(e.keys),"".concat(a[h.uuid],":").concat(b)),a[h.watched][b]&&c(a,b,"","")}Object.defineProperty(a,"__esModule",{value:!0}),a.computed=function(...a){let b=a.pop(),c=null;return"object"==typeof b&&(c=b.set,b=b.get),new j(a,b,c)},a.convertComputed=g,a.updateComputed=function(a,b,c){const g=a[h.watchers][b];if(c.length!==g.keys.length||c.some(a=>!~g.keys.indexOf(a))){const i={target:a,property:b,wdesc:g};g.keys.length&&e(a,i,f(g.keys),"".concat(a[h.uuid],":").concat(b)),c.length&&d(a,i,f(c),"".concat(a[h.uuid],":").concat(b)),a[h.watchers][b].keys=c,a[h.watchers][b].cached=!1}},a.deleteComputed=function(a,b){const c=a[h.watchers][b];console.assert(c,"".concat(b," is not defined on ").concat(a.__oid__));c.keys.length&&e(a,{target:a,property:b,wdesc:c},f(c.keys),"".concat(a[h.uuid],":").concat(b)),delete a[h.watchers][b],delete a[b]},a.O=a.A=a.Computed=void 0;const h={uuid:Symbol("uuid"),watchers:Symbol("watcher"),watched:Symbol("watched")};let i=0;class j{constructor(a,b,c){this.keys=a,this.get=b,this.set=c}}a.Computed=j;const k={},l={push(a){return this.splice(this.length,0,a)},pop(){return this.splice(this.length-1,1)},unshift(a){return this.splice(0,0,a)},shift(){return this.splice(0,1)}},m={set(a,b,d){const e=a[b];return!(e!==d)||(c(a,b,e,d),a[b]=d,!0)},get(a,b,d){if("splice"===b)return function(b,d,...e){const f=a.splice.apply(a,arguments);return c(a,"@each",f,e),e.length!==f.length&&c(a,"length"),f};if("string"==typeof b&&"-"===b[0]){let c=+b;if(0>c)return b=a.length+c+"",Reflect.get(a,b,d)}return l[b]||a[b]}};class n extends Array{constructor(){return super(),Object.defineProperties(this,{[h.watchers]:{enumerable:!1,value:{}},[h.watched]:{enumerable:!1,value:{}},[h.uuid]:{enumerable:!1,value:i++},instance:{enumerable:!1,value:this}}),new Proxy(this,m)}static create(a){return a instanceof Array?n.from(a):new n}}a.A=n;const o={set(a,b,d,e){if(d instanceof j&&g(e,b,d),a[h.watched][b]&&!(d instanceof j)){let f;if(a[h.watchers][b]?(f=a[h.watchers][b].value,a[h.watchers][b].cached=!0):f=a[b],f===d)return!0;c(e,b,f,d)}return d instanceof j||Reflect.set(a,b,d,e),!0}};class p{constructor(){return Object.defineProperties(this,{[h.watchers]:{enumerable:!1,value:{}},[h.watched]:{enumerable:!1,value:{}},[h.uuid]:{enumerable:!1,value:i++},instance:{enumerable:!1,value:this}}),new Proxy(this,o)}init(){}dispose(){}static create(a){const b=new this;return Object.assign(b,a),b.init(),b}getOwner(){return this.__owner__}get __oid__(){return"".concat(this.constructor.name,"(").concat(this[h.uuid],")")}}a.O=p}),define(48,["exports",51],function(a,b){"use strict";var d=Math.pow,f=Math.log,g=Math.floor;function c(a){const b="action".concat(a.type),c=a.currentTarget.getAttribute("data-".concat(b));console.assert(c,"No action id found for ".concat(a.type," for"),a.currentTarget);const{action:d,args:e}=this.actions["".concat(a.type,"-").concat(c)],f=this.ctx;let g="function"==typeof d?d:f.scope.evalExpression(d,{});const h="function"==typeof g?g:f[g];console.assert(h,"There is no action ".concat(g," on ").concat(f.__oid__)),h.apply(f,e.map(b=>this.evalExpression(b,{})).concat([a]))}Object.defineProperty(a,"__esModule",{value:!0}),a.helpers=a.HTML=a.Helper=void 0;class h{constructor(a){this.fn=a}}a.Helper=h;class i{constructor(a){this.content=a}}a.HTML=i;var j={action:new h(function([a]){let b=a,d=[];"function"!=typeof a&&([b,...d]=a);const e=d.filter(b=>"on"===b.name)[0],f=d.filter(b=>"capture"===b.name)[0],g=e?e.value:"click";d=d.filter(b=>"on"!==b.name&&"capture"!==b.name);const h=this.ctx.getOwner().actions.id++,i=this.actions||(this.actions={});return i["".concat(g,"-").concat(h)]={action:b,args:d},this.handleEvent=this.ctx.getOwner().asyncEvent(c),{name:"data-action".concat(g),value:h,listener:[g,this,!!f]}}),"muc-if":new h(function([a],b){for(let c=0,d=a.length;c<d;c++){const d=a[c];if(!d)return c;if(this.evalExpression(d,b))return c}return-1}),"muc-loop":new h(function([a],b){for(let c of Object.keys(b))delete b[c],b["".concat(c,".@each")]=!0;return a}),curry:new h(function(a){return(...b)=>(b=b.map(a=>({type:"Literal",value:a})),this.evalExpression({type:"Expression",value:a[0][0].value.concat(b)},{}))}),set:new h(function(a){return this.setPath(a[0][0].value,a[1])}),setter:new h(function(a){const b=a[0];return(...c)=>{this.setPath(b,a.slice(1).concat(c)[0])}}),cast:new h(function(a){const c={string:a=>a+"",number:a=>+a,boolean:a=>!!a,moment:a=>new b.Moment(a)},d=a[0],e=a[1];return a=>e(c[d](a))}),fn:new h(function(a){return(...b)=>a[0].apply(this.ctx,a.slice(1).concat(b))}),concat:new h(a=>a.join("")),if:new h(a=>{const b=a[0],c=a[1],d=a[2];return b?c:d}),"is-equal":new h(a=>a[0]===a[1]),"is-greater":new h(a=>a[0]>a[1]),contains:new h(a=>!!a[0]&&-1!==a[0].indexOf(a[1])),upper:new h(b=>"".concat(b).toUpperCase()),not:new h(b=>!b[0]),and:new h(b=>b.every(a=>a)),or:new h(b=>b.some(a=>a)),increment:new h(b=>b[0]+(b[1]||1)),"print-relatime":new h(c=>new b.Moment(c[0]).fromNow()),"format-timedelta":new h(([a])=>{if(null===a)return"";a=a/1e3>>0;const c=a/3600>>0;a%=3600;const d=a/60>>0;return a%=60,c?"".concat(c,"h ").concat((0,b.zeropad)(d),"m ").concat((0,b.zeropad)(a),"s"):d?"".concat(d,"m ").concat((0,b.zeropad)(a),"s"):"".concat(a,"s")}),"format-date":new h(([a,c])=>a?new b.Moment(a).format(c||"YYYY-MM-DD"):""),"format-datetime":new h(([a,c])=>a?new b.Moment(a).format(c||"YYYY-MM-DD HH:mm:ss"):""),divide:new h(([a,b])=>a/b),"format-localestring":new h(([a,b])=>a.toLocaleString(navigator.language,{style:b,currency:"EUR"})),"format-float":new h(([a,b])=>{b="number"==typeof b?b:2;const c=d(10,b);return(a*c>>0)/c}),"format-html":new h(([a])=>new i(a)),"format-icon":new h(([a])=>a?new i("<span class=\"glyphicon glyphicon-".concat(a.icon," ").concat(a.classes,"\" title=\"").concat(a.title,"\"></span>")):""),"format-link":new h(a=>{a=a[0]||{};const b=a.external?" target=_blank":"",c=a.href,d=a.title;return new i("<a href=\"".concat(c,"\" ").concat(b,">").concat(d,"</a>"))}),"format-pill":new h(a=>new i("<span class=\"badge\">".concat(a,"</span>"))),"format-route":new h((a,b)=>{a=a[0]||{},a.route=a.route||"",b["ctx.__owner__.router.currentQuery"]=!0;const c=window.location.search;return new i("<a href=\"".concat(window.location.pathname).concat(c||"","#/").concat(a.route.replace(".","/"),"/").concat(a.id,"\">").concat(a.title,"</a>"))}),"format-filesize":new h(a=>{if(0===a[0])return"0.00 B";const b=g(f(a[0])/f(1024));return(a[0]/d(1024,b)).toFixed(2)+" "+" KMGTP".charAt(b)+"B"}),"format-string":new h(b=>b[0]),"format-int":new h(b=>b[0]),stringify:new h(b=>JSON.stringify(...b)),"is-promise":new h(([a])=>a instanceof Promise),get:new h(([a,b])=>a[b]),zip:new h(([a,b])=>{if(!a)return[];const c=a.instance?a.instance.constructor:a.constructor;return c.from(a.map((d,e)=>c.from([a[e],b[e]])))})};a.helpers=j}),define(49,["exports",46,58],function(a,b,c){"use strict";var r=Math.log;function d(a){let b=0;for(;a>=s;)b|=1&a,a>>=1;return a+b}function e(a,b,c){for(c--;b<c;){const d=a[b];a[b++]=a[c],a[c--]=d}}function f(a,b,c,d){let f=b+1;if(f===c)return 1;if(0>d(a[f++],a[b])){for(;f<c&&0>d(a[f],a[f-1]);)f++;e(a,b,f)}else for(;f<c&&0<=d(a[f],a[f-1]);)f++;return f-b}function g(a,b,c,d,e){for(d===b&&d++;d<c;d++){let c=a[d],f=b,g=d;for(;f<g;){const b=f+g>>>1;0>e(c,a[b])?g=b:f=b+1}let h=d-f;switch(h){case 4:a[f+4]=a[f+3];case 3:a[f+3]=a[f+2];case 2:a[f+2]=a[f+1];case 1:a[f+1]=a[f];break;default:for(;0<h;)a[f+h]=a[f+h-1],h--;}a[f]=c}}function h(a,b,c,d,e,f){let g=0,h=0,i=1;if(0<f(a,b[c+e])){for(h=d-e;i<h&&0<f(a,b[c+e+i]);)g=i,i=(i<<1)+1,0>=i&&(i=h);i>h&&(i=h),g+=e,i+=e}else{for(h=e+1;i<h&&0>=f(a,b[c+e-i]);)g=i,i=(i<<1)+1,0>=i&&(i=h);i>h&&(i=h);const d=g;g=e-i,i=e-d}for(g++;g<i;){const d=g+(i-g>>>1);0<f(a,b[c+d])?g=d+1:i=d}return i}function j(a,b,c,d,e,f){let g=0,h=0,i=1;if(0>f(a,b[c+e])){for(h=e+1;i<h&&0>f(a,b[c+e-i]);)g=i,i=(i<<1)+1,0>=i&&(i=h);i>h&&(i=h);const d=g;g=e-i,i=e-d}else{for(h=d-e;i<h&&0<=f(a,b[c+e+i]);)g=i,i=(i<<1)+1,0>=i&&(i=h);i>h&&(i=h),g+=e,i+=e}for(g++;g<i;){const d=g+(i-g>>>1);0>f(a,b[c+d])?i=d:g=d+1}return i}function k(a,b,c,e){c||(c=0),e||(e=a.length);let h=e-c;if(2>h)return;let i=0;if(h<s)return i=f(a,c,e,b),void g(a,c,e,c+i,b);const j=new v(a,b),k=d(h);do{if(i=f(a,c,e,b),i<k){const d=h<=k?h:k;g(a,c,c+d,c+i,b),i=d}j.pushRun(c,i),j.mergeRuns(),c+=i,h-=i}while(0!==h);j.forceMergeRuns()}function l(b,a,c,d){for(;c<d;){const e=c+d>>>1;b[e]<a?c=e+1:d=e}return c}function m(b,a,c,d){for(;c<d;){const e=c+d>>>1;b[e]<=a?c=e+1:d=e}return c}function n(a){return function(b){const c=b.length;return[l(b,a,0,c),m(b,a,0,c)]}}function o(a){const[b,c]=a;return function(a){const d=a.length;return[l(a,b,0,d),l(a,c,0,d)]}}function p(a){return[0,a.length]}function q(a,b){const c=Array(b.length);for(let d=0,e=b.length;d<e;d++)c[d]=a[b[d]];return c}Object.defineProperty(a,"__esModule",{value:!0}),a.sort=k,a.Crossfilter=void 0;const s=32,t=7,u=256;class v{constructor(a,b){this.array=a,this.compare=b;const c=this.length=a.length;this.minGallop=t;const d=c<2*u?c>>>1:u;this.tmp=Array(d),this.stackSize=0;const e=120>this.length?5:1542>this.length?10:119151>this.length?19:40;this.runStart=Array(e),this.runLength=Array(e)}pushRun(a,b){this.runStart[this.stackSize]=a,this.runLength[this.stackSize]=b,this.stackSize+=1}mergeRuns(){for(;1<this.stackSize;){let a=this.stackSize-2;if(1<=a&&this.runLength[a-1]<=this.runLength[a]+this.runLength[a+1]||2<=a&&this.runLength[a-2]<=this.runLength[a]+this.runLength[a-1])this.runLength[a-1]<this.runLength[a+1]&&a--;else if(this.runLength[a]>this.runLength[a+1])break;this.mergeAt(a)}}forceMergeRuns(){for(;1<this.stackSize;){let a=this.stackSize-2;0<a&&this.runLength[a-1]<this.runLength[a+1]&&a--,this.mergeAt(a)}}mergeAt(a){let b=this.compare,c=this.array,d=this.runStart[a],e=this.runLength[a],f=this.runStart[a+1],g=this.runLength[a+1];this.runLength[a]=e+g,a===this.stackSize-3&&(this.runStart[a+1]=this.runStart[a+2],this.runLength[a+1]=this.runLength[a+2]),this.stackSize--;let i=j(c[f],c,d,e,0,b);(d+=i,e-=i,0!==e)&&(g=h(c[d+e-1],c,f,g,g-1,b),0===g||(e<=g?this.mergeLow(d,e,f,g):this.mergeHigh(d,e,f,g)))}mergeLow(a,b,c,d){let e=this.compare,f=this.array,g=this.tmp;for(let e=0;e<b;e++)g[e]=f[a+e];let k=0,l=c,m=a;if(f[m++]=f[l++],0==--d){for(let a=0;a<b;a++)f[m+a]=g[k+a];return}if(1===b){for(let a=0;a<d;a++)f[m+a]=f[l+a];return void(f[m+d]=g[k])}let n=this.minGallop;for(;;){let a=0,c=0,i=!1;do if(0>e(f[l],g[k])){if(f[m++]=f[l++],c++,a=0,0==--d){i=!0;break}}else if(f[m++]=g[k++],a++,c=0,1==--b){i=!0;break}while((a|c)<n);if(i)break;do{if(a=j(f[l],g,k,b,0,e),0!==a){for(let b=0;b<a;b++)f[m+b]=g[k+b];if(m+=a,k+=a,b-=a,1>=b){i=!0;break}}if(f[m++]=f[l++],0==--d){i=!0;break}if(c=h(g[k],f,l,d,0,e),0!==c){for(let a=0;a<c;a++)f[m+a]=f[l+a];if(m+=c,l+=c,d-=c,0===d){i=!0;break}}if(f[m++]=g[k++],1==--b){i=!0;break}n--}while(a>=t||c>=t);if(i)break;0>n&&(n=0),n+=2}if(this.minGallop=1>n?1:n,1===b){for(let a=0;a<d;a++)f[m+a]=f[l+a];f[m+d]=g[k]}else if(0===b)throw new Error("Comparison method violates conditions");else for(let a=0;a<b;a++)f[m+a]=g[k+a]}mergeHigh(a,b,c,d){let e=this.compare,f=this.array,g=this.tmp;for(let e=0;e<d;e++)g[e]=f[c+e];let i=a+b-1,k=d-1,l=c+d-1,m=0,n=0;if(f[l--]=f[i--],0==--b){m=l-(d-1);for(let a=0;a<d;a++)f[m+a]=g[a];return}if(1===d){l-=b,i-=b,n=l+1,m=i+1;for(let a=b-1;0<=a;a--)f[n+a]=f[m+a];return void(f[l]=g[k])}let o=this.minGallop;for(;;){let c=0,p=0,q=!1;do if(0>e(g[k],f[i])){if(f[l--]=f[i--],c++,p=0,0==--b){q=!0;break}}else if(f[l--]=g[k--],p++,c=0,1==--d){q=!0;break}while((c|p)<o);if(q)break;do{if(c=b-j(g[k],f,a,b,b-1,e),0!==c){l-=c,i-=c,b-=c,n=l+1,m=i+1;for(let a=c-1;0<=a;a--)f[n+a]=f[m+a];if(0===b){q=!0;break}}if(f[l--]=g[k--],1==--d){q=!0;break}if(p=d-h(f[i],g,0,d,d-1,e),0!==p){l-=p,k-=p,d-=p,n=l+1,m=k+1;for(let a=0;a<p;a++)f[n+a]=g[m+a];if(1>=d){q=!0;break}}if(f[l--]=f[i--],0==--b){q=!0;break}o--}while(c>=t||p>=t);if(q)break;0>o&&(o=0),o+=2}if(this.minGallop=1>o?1:o,1===d){l-=b,i-=b,n=l+1,m=i+1;for(let a=b-1;0<=a;a--)f[n+a]=f[m+a];f[l]=g[k]}else if(0===d)throw new Error("Comparison method violates conditions");else{m=l-(d-1);for(let a=0;a<d;a++)f[m+a]=g[a]}}}class w extends b.O{constructor(a,b=32){super(),console.assert(32>=b,"no support for wide matrix"),this.data=new Uint32Array(a),this.gen=0}extend(a){const b=new Uint32Array(this.data.length+a);b.set(this.data),this.data=b}clear(a){for(let b=0,c=this.data.length;b<c;b++)this.data[b]&=~(1<<a);this.gen++}isIn(a,b=-1){return!(this.data[a]&b)}update(a){this.data=a.update(this.data),this.gen++}subarray(a){const b=1<<a,c=~b;return{pos:b,neg:c,set:(a,d)=>{d?this.data[a]|=b:this.data[a]&=c,this.gen++},isIn:a=>this.isIn(a),isGIn:a=>!(this.data[a]&c)}}}class x{constructor(a){return new Uint32Array(a||0)}}const y=[a=>a+1,a=>a-1,()=>0];class z extends b.O{constructor(){super(),this.reduceFn=y,this.orderFn=a=>a,this.linear=b.A.create(),this.count=[],this.acount=[],this.state=[],this.pending=new c.Ot,(0,b.convertComputed)(this.instance,"faux",{keys:["dim.lastUpdate"],notify:(a,b,c,d)=>{this.faux,"lastUpdate"===b&&(this.pending=this.pending.compose(d))},get(){}}),this.faux,this.groups=(0,b.computed)("pending","dim.xf.filters.gen",function(){const a=this.pending;this.pending=new c.Ot().retain(a.olen);const d=this.dim.rows,e=this.linear,f=(a,b)=>{const c=this.dim.rowIndex[a],d=this.state[a],f=this.state[a]=this.dim.filters.isGIn(c),g=d<<1|f,h=e[b];2===g?(h.value=this.reduceFn[1](h.value,this.dim.xf.data[c]),this.count[b]--):1===g&&(h.value=this.reduceFn[0](h.value,this.dim.xf.data[c]),this.count[b]++)},g=(c,a)=>{const b=typeof c;if(b===typeof a)return c<a;return!(c!==A)||a!==A&&(!("string"!==b)||void 0)},h=(c,a)=>"object"==typeof c?+c!=+a:c!==a;let k=0,l=0;for(let c of a.ops)if("n"===c.t)for(let a=0,b=c.n;a<b;a++){for(const a=this.mapFn(d[k]);g(e[l].key,a);)l++;f(k++,l)}else if("i"===c.t){this.state.splice.apply(this.state,[k,0].concat(c.i.map(()=>!0)));let a,i,j=e.length;for(let m=0,n=c.i.length;m<n;m++){if(h(a,d[k])){a=d[k];const c=this.mapFn(d[k]);for(;l<j&&g(e[l].key,c);)l++;i=e[l],(!i||h(c,i.key))&&(i=b.O.create({key:c,value:this.reduceFn[2]()}),e.splice(l,0,i),j=e.length,this.count.splice(l,0,0),this.acount.splice(l,0,0),console.assert(i===e[l],"added group does not match"))}i.value=this.reduceFn[0](i.value,this.dim.xf.data[this.dim.rowIndex[k]],!0),this.count[l]++,this.acount[l]++,f(k++,l)}}else if("r"===c.t){l=0;for(let a=0;a<c.r.length;a++){const b=this.mapFn(c.r[a][0]);for(;g(e[l].key,b);)l++;console.assert(!h(b,e[l].key));const d=e[l];this.state[k+a]||(d.value=this.reduceFn[0](d.value,c.r[a][1]),this.count[l]++),d.value=this.reduceFn[1](d.value,c.r[a][1],!0),this.count[l]--,this.acount[l]--,0===this.acount[l]&&(e.splice(l,1),this.count.splice(l,1),this.acount.splice(l,1))}this.state.splice(k,c.r.length)}return this.linear})}static create(a,b=a=>a){const c=super.create({dim:a,mapFn:b});return c.pending.insert(a.rows),c}filterRange(){return[this.mapFn(this.dim.rows[this.dim.lo]),this.mapFn(this.dim.rows[this.dim.hi])]}size(){return this.groups.length}reduce(a,b,d){return this.reduceFn=[a,b,d],this.linear.splice(0,this.linear.length),this.count=[],this.acount=[],this.state=[],this.pending=new c.Ot().insert(this.dim.rows),this}reduceCount(){return this.reduce(...y)}reduceSum(a){return this.reduce((b,c)=>b+a(c),(b,c)=>b-a(c),()=>0)}order(a){return this.orderFn=a,this}orderNatural(){return this.orderFn=a=>a,this}top(a){const b=this.groups,c=b.filter((a,b)=>this.count[b]).sort((c,a)=>{const b=this.orderFn(c.value),d=this.orderFn(a.value);return b<d?-1:b>d?1:-1}).reverse(),d=b.filter((a,b)=>!this.count[b]).sort((c,a)=>{const b=this.orderFn(c.value),d=this.orderFn(a.value);return b<d?-1:b>d?1:c<a?-1:1});return c.concat(d).slice(0,a).map(a=>({key:a.key===A?null:a.key,value:a.value}))}all(){return this.groups}calcGroups(){return this.groups}dispose(){}}const A=null;class B extends b.O{constructor(){super(),this.filterFx=p,this.filterFn=()=>!0,this.lo=this.hi=0,this.rowsPerValue=new x,this.rows=[],this.rowIndex=new x,this.rowHidden=new x,this.groups=Array(32)}static create(a,b,e){const f=super.create({xf:a,filters:b});return f.accessor=a=>{const b="function"==typeof e?e(a):new Function("d","return d.".concat(e,";"))(a);return"function"==typeof b?b.apply(a):b},f.update(new c.Ot().insert(a.data)),f}update(a){let b=0,d=new c.Ot().retain(this.rows.length);for(let c of a.ops)"n"===c.t?b+=c.n:"i"===c.t?(d=d.compose(this.insert(b,c.i)),b+=c.i.length):d=d.compose(this.remove(b,c.r));this.lastUpdate=d}remove(a,b){const d=b.length,e=new c.Ot,f=new x(this.rowsPerValue.length-d);if(f.set(this.rowsPerValue.slice(0,a)),f.set(this.rowsPerValue.slice(a+d),a),this.rowsPerValue=f,!this.rowsPerValue.length)return e.remove(this.rows.map((a,c)=>[a,b[c]])),this.rows=[],this.rowIndex=new x(0),this.rowHidden=new x(0),e;let g=0;for(let c=0,f=this.rows.length;c<f;c++){const f=this.rowIndex[c];a<=f&&f<a+d?(g++,e.remove([[this.rows[c],b[f-a]]])):e.retain(1)}const h=[],j=new x(this.rows.length-g),k=new x(this.rows.length-g);for(let c=0,e=0,f=this.rows.length;c<f;c++){const b=this.rowIndex[c];a<=b&&b<a+d||(h[e]=this.rows[c],j[e]=b>=a+d?b-d:b,k[e]=this.rowHidden[c],e++)}return this.rows=h,this.rowIndex=j,this.rowHidden=k,e}insert(a,b){const d=new c.Ot,e=b.map(this.accessor),f=new x(b.length);let g,h,j=[];if(e[0]instanceof Array){for(let a=0,b=e.length;a<b;a++)f[a]=e[a].length||1;const a=f.reduce((a,b)=>a+b,0);g=new x(a);let b=0;for(let a=0,c=e.length;a<c;a++)e[a].length?e[a].forEach(c=>{j.push(c),g[b++]=a}):(j.push(A),g[b++]=a);console.assert(b===a,"should be identical")}else f.fill(1),j=e.slice().concat(j),g=Uint32Array.from(e,(b,a)=>a);h=new x(j.length);const l=Array.from(g,(a,b)=>b);k(l,(c,a,b)=>{let d=j[c],e=j[a];return(b&&(console.log("cmp",d,e,c,a),d===e?console.log(0):typeof d==typeof e?console.log(d<e?-1:1):d===A?console.log(-1):e===A?console.log(1):"string"==typeof d&&"number"==typeof e?console.log(-1):"number"==typeof d&&"string"==typeof e&&console.log(1)),d===e)?0:typeof d==typeof e?(d.valueOf&&(d=d.valueOf(),e=e.valueOf()),d<e?-1:d>e?1:0):d===A?-1:e===A?1:"string"==typeof d&&"number"==typeof e?-1:"number"==typeof d&&"string"==typeof e?1:d<e}),j=q(j,l),g.set(q(g,l));const m=this.rows.length,n=j.length,o=new x(this.rowsPerValue.length+b.length),p=[],r=new x(m+n),s=new x(m+n);for(let c=0;c<m;c++)this.rowIndex[c]>=a&&(this.rowIndex[c]+=b.length);for(let c=0;c<n;c++)g[c]+=a;o.set(this.rowsPerValue.subarray(0,a),0),o.set(f,a),o.set(this.rowsPerValue.subarray(a),a+b.length);let t=0,u=0,i=0;const[v,w]=this.filterFx(j),y=[];for(;u<m&&i<n;t++)this.rows[u]<=j[i]?(p[t]=this.rows[u],s[t]=this.rowHidden[u],r[t]=this.rowIndex[u],d.retain(1),u++):(p[t]=j[i],s[t]=h[i],r[t]=g[i],d.insert([j[i]]),i<v?(y.push(t),this.lo++,this.hi++):i<w?(!this.filterFn(j[i])&&y.push(t),this.hi++):y.push(t),i++);for(d.retain(m-u);u<m;u++,t++)p[t]=this.rows[u],s[t]=this.rowHidden[u],r[t]=this.rowIndex[u];for(d.insert(j.slice(i));i<n;i++,t++)p[t]=j[i],s[t]=h[i],r[t]=g[i],i<v?(y.push(t),this.lo++,this.hi++):i<w?(!this.filterFn(j[i])&&y.push(t),this.hi++):y.push(t);return this.rowsPerValue=o,this.rows=p,this.rowIndex=r,this.rowHidden=s,y.forEach(a=>this.hide(a)),d}setFilter(a,b){this.filters.set(a,b)}filter(a){return null==a?this.filterAll():Array.isArray(a)?this.filterRange(a):"function"==typeof a?this.filterFunction(a):this.filterExact(a)}filterExact(a){return this.filterFx=n(a),this.filterFn=()=>!0,this.filterFlipper(this.filterFx(this.rows))}filterRange(a){return this.filterFx=o(a),this.filterFn=()=>!0,this.filterFlipper(this.filterFx(this.rows))}filterAll(){return this.filterFx=p,this.filterFn=()=>!0,this.filterFlipper(this.filterFx(this.rows))}filterFunction(a){return this.filterFx=p,this.filterFn=a,this.filterFlipper(this.filterFx(this.rows))}hide(a){if(!this.rowHidden[a]){const b=this.rowIndex[a];this.rowsPerValue[b]--,this.rowsPerValue[b]||this.setFilter(b,!0),this.rowHidden[a]=1}}show(a){if(this.rowHidden[a]){const b=this.rowIndex[a];this.rowsPerValue[b]++,1===this.rowsPerValue[b]&&this.setFilter(b,!1),this.rowHidden[a]=0}}filterFlipper([a,b]){for(let c=0;c<a;c++)this.hide(c);for(let c=a;c<b;c++)this.filterFn(this.rows[c])?this.show(c):this.hide(c);for(let c=b;c<this.rows.length;c++)this.hide(c);this.lo=a,this.hi=b}top(a,b=0){if(0>=a)return[];const c=Array.from(this.rowIndex.filter(a=>this.filters.isIn(a))).map(a=>this.xf.data[a]).reverse();return c.slice(b,a+b)}bottom(a,b=0){if(0>=a)return[];const c=Array.from(this.rowIndex.filter(a=>this.filters.isIn(a))).map(a=>this.xf.data[a]);return c.slice(b,a+b)}group(a){const b=z.create(this,a);return b}groupAll(){const a=z.create(this,()=>0);return{g:a,value(){const a=this.g.all();return a.length?a[0].value:this.g.reduceFn[2]()},reduceCount(){return this.g.reduceCount(),this},reduceSum(...a){return this.g.reduceSum(...a),this},reduce(...a){return this.g.reduce(...a),this},dispose(){return this.g.dispose(),this}}}dispose(){this.xf.disposeDimension(this)}}class C extends b.O{constructor(a){super(),this.data=a||[],this.n=this.data.length,this.filters=new w(this.n),this.dimmask=0,this.dimensions=Array(32),this.allFilteredA=(0,b.computed)("filters.gen",function(){return b.A.from(this.allFiltered())})}add(a){const b=new c.Ot().retain(this.n).insert(a);this.n+=a.length,b.update(this.data),this.filters.extend(a.length);for(let c of this.dimensions)c&&c.update(b);return this}remove(){this.removeElements(this.allFiltered())}removeElements(a){const b=new c.Ot;for(let c=0;c<this.n;c++)~a.indexOf(this.data[c])?b.remove([this.data[c]]):b.retain(1);this.n+=b.olen-b.ilen,b.update(this.data),this.filters.update(b);for(let c of this.dimensions)c&&c.update(b)}clear(){const a=new c.Ot;a.remove(this.data),this.n=0,a.update(this.data),this.filters.update(a);for(let b of this.dimensions)b&&b.update(a)}dimension(a){const b=~this.dimmask&-~this.dimmask,c=0|r(b)/r(2);return this.dimmask|=b,this.dimensions[c]=B.create(this,this.filters.subarray(c),a)}disposeDimension(a){const b=this.dimensions.indexOf(a);this.dimensions[b]=void 0,this.dimmask^=1<<b,this.filters.clear(b)}groupAll(){const a=this.dimension(()=>0),b=a.groupAll();return b}size(){return this.n}all(){return this.data}allFiltered(){const a=[];for(let b=0;b<this.data.length;b++)this.filters.isIn(b)&&a.push(this.data[b]);return a}isElementFiltered(a,b=[]){let c=-1;return b.forEach(a=>{c^=1<<this.dimensions.indexOf(a)}),this.filters.isIn(a,c)}}a.Crossfilter=C}),define(5,["exports",45,46,49],function(a,b,c,d){"use strict";var e=Math.exp,f=Math.ceil,g=Math.log,h=Math.min;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const i=a=>a;class j extends b.RoutableComponent{constructor(){function b(a,c){if(Array.isArray(a)){let[d,...e]=a;return e=e.map(d=>b(d,c)),k[d].apply(this,e)}return"object"==typeof a?c:a}function j(a,c){const d={title:a.title,widget:{type:"keyval",data:{}}};return d.widget.data.items=a.items.map(a=>({title:a.title,formatter:a.formatter,list:a.islist,value:b(a.function,c)})),d}super(),this.template="PHdpZGdldC13YWl0aW5nIGljb249Imxpc3QiIGFjbD17e2FwcC5hY2wuY29sbGVjdGlvbn19IHVzZXI9e3thcHAudXNlcn19IGU0MDE9IlNpZ24gaW4gdG8gYWNjZXNzIGNvbGxlY3Rpb25zIiBlNDAzPSJVc2VyIHt7YXBwLnVzZXJ9fSBpcyBub3QgcGVybWl0dGVkIHRvIGFjY2VzcyBjb2xsZWN0aW9uIHt7cGFyYW1zLmlkfX0iIGU0MDQ9IkNvbGxlY3Rpb24ge3twYXJhbXMuaWR9fSBkb2VzIG5vdCBleGlzdCI+IDxkaXYgY2xhc3M9ImNvbGxlY3Rpb24iPiA8aDI+IHt7Z3N1bW1hcnkudGl0bGV9fSA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYnRuLXNtIGZsb2F0LXJpZ2h0IHt7ImlmIiBmaWx0ZXJzT3BlbiAiYWN0aXZlIn19IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICgic2V0dGVyIiAoInBhdGgiIGZpbHRlcnNPcGVuKSAoIm5vdCIgZmlsdGVyc09wZW4pKSl9fT4ge3ttb2RlbC5maWx0ZXJzLnRpdGxlfX0gPC9idXR0b24+IDwvaDI+IDxkaXYgY2xhc3M9ImNhcmQiPiB7eyNpZiBmaWx0ZXJzT3BlbiBhbmltYXRlT3V0PSJsaW5lYXIiIGFuaW1hdGVJbj0ibGluZWFyIn19IDx3aWRnZXQtZmlsdGVyIG1vZGVsPXt7bW9kZWwuZmlsdGVycy53aWRnZXR9fSBzZXRBY3Rpb249e3siZm4iIHNldEZpbHRlcn19IGZpbHRlcj17e2ZpbHRlcn19IGRlYnVnPXt7ZGVidWdmaWx0ZXJzfX0gLz4ge3svaWZ9fSA8ZGl2IGNsYXNzPSJjYXJkLWJvZHkiPiA8d2lkZ2V0LWtleXZhbCBtb2RlbD17e2dzdW1tYXJ5LndpZGdldC5kYXRhfX0gLz4gPC9kaXY+IDwvZGl2PiA8aDI+e3ttb2RlbC5saXN0aW5nLnRpdGxlfX08L2gyPiB7eyNpZiB4ZmlsdGVycy5sZW5ndGh9fSA8ZGl2IGNsYXNzPSJjYXJkIj4gPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4ge3sjZWFjaCB4ZmlsdGVycyBhcyB8ZmlsdGVyfH19IHt7I2lmIGZpbHRlci5zZWxlY3RlZH19IDxkaXYgY2xhc3M9InhmaWx0ZXItY2hhcnQiPiA8aDY+e3tmaWx0ZXIudGl0bGV9fSB7eyNpZiBmaWx0ZXIuc2VsZWN0ZWQubGVuZ3RofX08YSByb2xlPSJidXR0b24iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInRvZ2dsZUNudCIgZmlsdGVyICIiKX19PnJlc2V0PC9hPnt7L2lmfX08L2g2PiA8dWwgY2xhc3M9Imxpc3QtaW5saW5lIHRhZ3MiIHN0eWxlPSJwYWRkaW5nLWxlZnQ6IDE2cHg7Ij4ge3sjZWFjaCBmaWx0ZXIuZ3JvdXAuZ3JvdXBzIGFzIHxncm91cHx9fSA8bGk+IDxzcGFuIGNsYXNzPSJiYWRnZSB0YWcge3siaWYiICgiY29udGFpbnMiIGZpbHRlci5zZWxlY3RlZCBncm91cC5rZXkgZmlsdGVyLnNlbGVjdGVkLmxlbmd0aCkgImFjdGl2ZSJ9fSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAidG9nZ2xlQ250IiBmaWx0ZXIgZ3JvdXAua2V5KX19PiB7e2dyb3VwLmtleX19IDxzdHJvbmc+e3tncm91cC52YWx1ZX19PC9zdHJvbmc+IDwvc3Bhbj4gPC9saT4ge3svZWFjaH19IDwvdWw+IDwvZGl2PiB7e2Vsc2V9fSA8d2lkZ2V0LWNoYXJ0IGRpbT17e2ZpbHRlci5kaW19fSBncm91cD17e2ZpbHRlci5ncm91cH19IHRpdGxlPXt7ZmlsdGVyLnRpdGxlfX0gZm9ybWF0WHRpY2tzPXt7ZmlsdGVyLmZvcm1hdFh0aWNrc319IHh2YWx1ZXM9e3tmaWx0ZXIueHZhbHVlc319IC8+IHt7L2lmfX0ge3svZWFjaH19IDxkaXYgY2xhc3M9InRhZy1jbG91ZCI+IDxoNj5CeSBUYWdzIHt7I2lmIHNlbGVjdGVkVGFncy5sZW5ndGh9fTxhIGhyZWY9IiMiIHJvbGU9ImJ1dHRvbiIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAidG9nZ2xlVGFnIiAiIil9fT5yZXNldDwvYT57ey9pZn19PC9oNj4gPHVsIGNsYXNzPSJsaXN0LWlubGluZSB0YWdzIiBzdHlsZT0icGFkZGluZy1sZWZ0OiAxNnB4OyI+IHt7I2VhY2ggdGFnc0dyb3VwLmdyb3VwcyBhcyB8Z3JvdXB8fX0gPGxpIGNsYXNzPSJsaXN0LWlubGluZS1pdGVtIj4gPHNwYW4gY2xhc3M9ImJhZGdlIHt7ImlmIiAoImNvbnRhaW5zIiBzZWxlY3RlZFRhZ3MgZ3JvdXAua2V5IHNlbGVjdGVkVGFncy5sZW5ndGgpICJhY3RpdmUifX0ge3siaWYiIGdyb3VwLmtleSAidGFnIiAibm90YWcifX0iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInRvZ2dsZVRhZyIgZ3JvdXAua2V5KX19PiB7eygiaWYiIGdyb3VwLmtleSBncm91cC5rZXkgInVudGFnZ2VkIil9fSA8c3Ryb25nPnt7Z3JvdXAudmFsdWV9fTwvc3Ryb25nPiA8L3NwYW4+IDwvbGk+IHt7L2VhY2h9fSA8L3VsPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJjYXJkIj4gPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4gPHdpZGdldC1rZXl2YWwgbW9kZWw9e3tsc3VtbWFyeS53aWRnZXQuZGF0YX19IC8+IDwvZGl2PiA8L2Rpdj4ge3svaWZ9fSA8ZGl2IGNsYXNzPSJjYXJkIj4gPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4gPHdpZGdldC10YWJsZSBtb2RlbD17e2xpc3Rpbmd9fSBzZWxlY3RhYmxlRm9yY2U9dHJ1ZSBzZWxlY3Rpb25DaGFuZ2U9e3siZm4iIHNlbGVjdGlvbkNoYW5nZX19IG5vZmlsdGVyPXt7dHJ1ZX19IGNhY2hlaWQ9Im1hcnYtbGlzdGluZ1RhYmxlIiBhcz0ic2VsZWN0ZWQiPiA8dWwgY2xhc3M9Imxpc3QtaW5saW5lIj4ge3sjaWYgYXBwLmFjbC50YWd9fSA8bGkgY2xhc3M9Imxpc3QtaW5saW5lLWl0ZW0iPiA8d2lkZ2V0LXRhZyBjbGFzcz0iYnRuIGJ0bi14cyBidG4tb3V0bGluZS1zZWNvbmRhcnkiIGRpc2FibGVkPXt7Im5vdCIgYXBwLnVzZXJ9fSBmdWxsZGlzYWJsZWQ9e3sibm90IiBzZWxlY3RlZElkcy5sZW5ndGh9fSB0YWdzPXt7c2VsZWN0ZWR9fSBhbGx0YWdzPXt7YWxsdGFnc319IGFsdEFjdGlvbj17eyJmbiIgb3BlblNpZ25pbn19IGNoYW5nZUFjdGlvbj17eyJmbiIgZXhlY1RhZ319IC8+IDwvbGk+IHt7L2lmfX0ge3sjaWYgYXBwLmFjbC5maWxlX2xpc3R9fSB7eyNpZiBsaXN0RmV0Y2hlZH19IDxsaSBjbGFzcz0ibGlzdC1pbmxpbmUtaXRlbSI+IDx3aWRnZXQtY2xpcGJvYXJkIGNsYXNzPSJidG4gYnRuLXhzIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSIgbW9kZWw9e3tjb3B5RmlsZWxpc3R9fSAvPiA8L2xpPiA8bGkgY2xhc3M9Imxpc3QtaW5saW5lLWl0ZW0iPiA8d2lkZ2V0LWNsaXBib2FyZCBjbGFzcz0iYnRuIGJ0bi14cyBidG4tb3V0bGluZS1zZWNvbmRhcnkiIG1vZGVsPXt7Y29weVVybGxpc3R9fSAvPiA8L2xpPiB7e2Vsc2V9fSA8bGkgY2xhc3M9Imxpc3QtaW5saW5lLWl0ZW0iPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXhzIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSIgZGlzYWJsZWQ9e3sibm90IiBzZWxlY3RlZElkcy5sZW5ndGh9fSB7eyJhY3Rpb24iICgibm9leHBhbmQiICJnZXRGaWxlbGlzdCIpfX0+IGZldGNoIGZpbGUgbGlzdHMgPC9idXR0b24+IDwvbGk+IHt7L2lmfX0ge3svaWZ9fSB7eyNpZiAoImFuZCIgbW9kZWwuY29tcGFyZSBhcHAuYWNsLmNvbXBhcmUpfX0gPGxpIGNsYXNzPSJsaXN0LWlubGluZS1pdGVtIj4gPGRpdiBjbGFzcz0id2lkZ2V0LWNvbXBhcmUiPiA8c3BhbiBjbGFzcz0iZHJvcGRvd24ge3siaWYiIGNvbXBhcmVPcGVuICJzaG93In19Ij4gPHNwYW4gY2xhc3M9ImJhY2tkcm9wIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICgic2V0dGVyIiAoInBhdGgiIGNvbXBhcmVPcGVuKSBmYWxzZSkpfX0+PC9zcGFuPiA8YnV0dG9uIHJvbGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4teHMgYnRuLW91dGxpbmUtc2Vjb25kYXJ5IGRyb3Bkb3duLXRvZ2dsZSIgZGlzYWJsZWQ9e3sibm90IiBzZWxlY3RlZElkcy5sZW5ndGh9fSB7eyJhY3Rpb24iICgibm9leHBhbmQiICJvcGVuQ29tcGFyZSIpfX0+IGNvbXBhcmUgPC9idXR0b24+IDxkaXYgY2xhc3M9ImRyb3Bkb3duLW1lbnUge3siaWYiIGNvbXBhcmVPcGVuICJzaG93In19IHt7bWVudUNsYXNzfX0iPiB7eyNpZiAoIm5vdCIgYXBwLnVzZXIpfX0gPGEgY2xhc3M9ImRyb3Bkb3duLWl0ZW0iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgKCJmbiIgb3BlblNpZ25pbikpfX0+U2lnbiBpbiB0byBjb21wYXJlPC9hPiB7e2Vsc2V9fSA8Zm9ybSBjbGFzcz0icHgtMSBweS0xIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJjb21wYXJlIiBvbj0ic3VibWl0Iil9fT4gPGlucHV0LWNvbnRyb2wgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc20iIHBsYWNlaG9sZGVyPSJQYXJhbWV0ZXIiIHZhbHVlPXt7Y29tcGFyZVBhcmFtfX0gY2hhbmdlQWN0aW9uPXt7InNldHRlciIgKCJwYXRoIiBjb21wYXJlUGFyYW0pfX0gLz4gPC9mb3JtPiA8ZGl2IGNsYXNzPSJkcm9wZG93bi1kaXZpZGVyIj48L2Rpdj4gPGZvcm0gY2xhc3M9InB4LTEgeHB5LTEgdGV4dC1yaWdodCI+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYnRuLXhzIiB0eXBlPSJidXR0b24iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgKCJzZXR0ZXIiICgicGF0aCIgY29tcGFyZU9wZW4pIGZhbHNlKSl9fT5DYW5jZWw8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBidG4teHMiIHR5cGU9ImJ1dHRvbiIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiY29tcGFyZSIpfX0+Q29tcGFyZTwvYnV0dG9uPiA8L2Zvcm0+IHt7L2lmfX0gPC9kaXY+IDwvc3Bhbj4gPC9kaXY+IDwvbGk+IHt7L2lmfX0ge3sjaWYgYXBwLmFjbC5kZWxldGV9fSA8bGkgY2xhc3M9Imxpc3QtaW5saW5lLWl0ZW0iPiA8YnV0dG9uLWNvbmZpcm0gYnV0dG9uQ2xhc3M9ImJ0biBidG4teHMgYnRuLW91dGxpbmUtc2Vjb25kYXJ5IiBhY3Rpb25CdXR0b25DbGFzcz0iYnRuIGJ0bi1vdXRsaW5lLWRhbmdlciIgdGl0bGU9IkRpc2NhcmQgc2VsZWN0ZWQgZGF0YXNldHMiIHRleHQ9IkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBtYXJrIGFsbCBzZWxlY3RlZCBkYXRhc2V0cyBmb3IgZGVsZXRpb24/IElmIHRoZSBjb3JyZXNwb25kaW5nIGZpbGVzIHN0aWxsIGV4aXN0cyBvbiBkaXNrLCB0aGV5IHdvdWxkIGJlIHJlLWFkZGVkIGFzIG5ldyBkYXRhc2V0cyBkdXJpbmcgdGhlIG5leHQgc2Nhbi4gVGhlIGRpc2NhcmRlZCBkYXRhc2V0cyB3b3VsZCBiZSBkZWxldGVkIGR1cmluZyB0aGUgbmV4dCBjbGVhbnVwIGFuZCB0aGVpciB0YWdzIGFuZCBjb21tZW50cyB3b3VsZCBiZSBJUlJFVk9DQUJMWSBnb25lLiIgZGlzYWJsZWQ9e3soIm5vdCIgKCJhbmQiIHNlbGVjdGVkSWRzLmxlbmd0aCBhcHAudXNlcikpfX0gYWN0aW9uPXt7ImZuIiBkZWxldGV9fSBjb25maXJtVGV4dD0iRGlzY2FyZCBzZWxlY3RlZCBkYXRhc2V0cyI+IGRpc2NhcmQgPC9idXR0b24tY29uZmlybT4gPC9saT4ge3svaWZ9fSB7eyNlYWNoIGFwcC5fX293bmVyX18ubGlzdGluZ0FjdGlvbnMgYXMgfGFjdHx9fSA8bGkgY2xhc3M9Imxpc3QtaW5saW5lLWl0ZW0iPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXhzIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSIgZGlzYWJsZWQ9e3sibm90IiBzZWxlY3RlZElkcy5sZW5ndGh9fSB7eyJhY3Rpb24iIGFjdC5mbn19PiB7e2FjdC5uYW1lfX0gPC9idXR0b24+IDwvbGk+IHt7L2VhY2h9fSA8L3VsPiA8L3dpZGdldC10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC93aWRnZXQtd2FpdGluZz4=",this.params={},this.filter="",this.debugfilters=!1,this.filtersOpen=(0,c.computed)("filter",function(){return!!this.filter}),this.alltags=(0,c.computed)("model.all_known",function(){return c.A.create(this.model.all_known.tags)}),this.resetNdx=(0,c.computed)("app.displayTimezone",function(){this.app.displayTimezone,this.prevXfilters=null}),this.attrIdx=(0,c.computed)("model","resetNdx",function(){this.resetNdx;const a={},b=this.model.listing.widget.data.columns.map(a=>a.id);return b.forEach((b,c)=>a[b]=c),a}),this.prevAttrIdx=null,this.prevNdx=null,this.ndx=(0,c.computed)("attrIdx",function(){const{attrIdx:a,prevAttrIdx:b,model:c}=this;let e=this.prevNdx;return(!b||Object.entries(a||{}).some(([a,c])=>b[a]!==c))&&(e=d.Crossfilter.create(),this.allDim=e.dimension(()=>null),this.allGroup=this.allDim.group(),this.tagsDim=e.dimension(a=>a.tags),this.tagsGroup=this.tagsDim.group()),this.prevNdx=e,this.prevAttrIdx=a,e.clear(),e.add(c.listing.widget.data.rows),e}),this.selectedTags=(0,c.computed)("params.id",function(){return c.A.create()}),this.listing=(0,c.computed)("ndx.allFilteredA",function(){const{model:a,ndx:b}=this,d=c.O.create(a.listing.widget.data);return d.rows=b.allFilteredA,d});const k={len:a=>a.length,sum:a=>a.reduce((a,b)=>a+b,0),map:(a,b,c)=>a.map(a=>void 0===a[b]?c:a[b]),idx:a=>this.attrIdx[a]};this.gsummary=(0,c.computed)("model.summary_config",function(){const a=this.model.summary_config,b=this.model.listing.widget.data.rows.map(a=>a.values);return j(a,b)}),this.lsummary=(0,c.computed)("model.summary_config","ndx.allFilteredA",function(){const a=this.model.summary_config,b=this.ndx.allFilteredA.map(a=>a.values);return j(a,b)}),this.prevXfilters=null,this.xfilters=(0,c.computed)("ndx","attrIdx",function(){const a=this.attrIdx,b=this.getOwner().crxfilters||[];return b.some(b=>void 0===a[b.key])?(this.prevXfilters=null,[]):this.prevXfilters?this.prevXfilters:this.prevXfilters=b.map(b=>{const d=Object.assign(c.O.create({formatXticks:i}),b),j=a[b.key],k=a=>a.values[j];if(b.dimFn)d.dim=this.ndx.dimension(a=>b.dimFn.call(this.app,k(a)));else if(b.dimHist){const c=b.dimHist;let i,j;if("linear"===c.axis){const e=f(c.max/c.bins)*c.bins;i=f=>c.bins*f.values[a[b.key]]/e,j=a=>a*e/c.bins}else if("logarithmic"===c.axis){const f=g(c.max);i=e=>c.bins*g(e.values[a[b.key]])/f,j=a=>0|e(a*f/c.bins)}else c.bins=c.axis.length,i=a=>{let b=0;for(;b+1<c.axis.length&&k(a)>c.axis[b+1];)b++;return b},j=a=>c.axis[a];d.dim=this.ndx.dimension(a=>h(c.bins-1,0|i(a))),d.formatXticks=a=>b.formatXticks(j(a)),d.xvalues=Array.from({length:c.bins},(a,b)=>b)}else d.dim=this.ndx.dimension(a=>k(a)),d.selected=c.A.create();return d.group=d.dim.group(),d})}),this.selectedIds=c.A.create(),this.listFetched=(0,c.computed)("selectedIds.@each",function(){return!1}),this.compareParam="",this.scrollEvent=()=>{const a=document.scrollingElement||document.body.parentElement;this.state.scroll=a.scrollTop},this.state=(0,c.computed)(function(){const a=JSON.parse(localStorage.state||"{}");return 1===a.version?a:{version:1}}),this.model=(0,c.computed)("params","filter","app.user",async function(){const a={url:"collection/".concat(this.params.id)};this.filter&&(a.data={filter:atob(this.filter)}),window.removeEventListener("scroll",this.scrollEvent),document.title="MARV > ".concat(this.params.id);const b=await this.app.api(a);return this.app.activeCollection=this.params.id,this.getOwner().addAfterRender(()=>{const a=document.scrollingElement||document.body.parentElement;if(a.scrollTop=this.state.scroll,window.addEventListener("scroll",this.scrollEvent),this.app.lastDetailHash){const b=document.querySelector("[href=\"/".concat(this.app.lastDetailHash,"\"]"));b&&b.focus(),this.app.lastDetailHash=null}}),b}),this.app=(0,c.computed)(function(){return this.getOwner().lookup("application-route")})}selectionChange(a){this.selectedIds=c.A.from(a,a=>a.id)}getFilelist(){this.app.getFilelist(this.selectedIds).then(a=>{this.copyFilelist={data:a.paths.join("\n"),title:"file paths"},this.copyUrllist={data:a.urls.map(a=>"".concat(this.app.apiEndpoint).concat(a)).join("\n"),title:"URLs"},this.listFetched=!0})}openCompare(){this.compareOpen=!0,this.getOwner().addAfterRender(()=>{const a=this.getElement().querySelector(".widget-compare input");a&&a.focus()})}compare(a){a.preventDefault(),this.compareOpen=!1,this.transitionTo({route:"compare",models:[{id:btoa(JSON.stringify({collection:this.params.id,ids:this.selectedIds,param:this.compareParam})),fake:!0}]})}toggleTag(a,b){if(b.preventDefault(),""===a)this.selectedTags.splice(0,this.selectedTags.length);else{const b=this.selectedTags.indexOf(a);~b?this.selectedTags.splice(b,1):this.selectedTags.push(a)}this.tagsDim.filterFunction(a=>!this.selectedTags.length||~this.selectedTags.indexOf(a))}setState(a,b){this.state[a]=b,localStorage.state=JSON.stringify(this.state)}openSignin(){this.app.openSignin()}setFilter(a){this.transitionTo({query:{filter:a}})}execTag(a){const b={};a.added.forEach(a=>b[a]=this.selectedIds);const c={};a.removed.forEach(a=>c[a]=this.selectedIds);const d={[this.params.id]:{add:b,remove:c}};this.app.tag(d).then(()=>this.reloadModel())}delete(){this.app.delete(this.selectedIds).then(()=>this.reloadModel())}modelHook(a){a.id!==this.params.id&&(this.params=a)}reloadModel(){this.params={id:this.params.id}}willRemoveElement(){window.removeEventListener("scroll",this.scrollEvent),window.removeEventListener("beforeunload",this.beforeunload)}didInsertElement(){this.beforeunload=()=>{const a=document.scrollingElement||document.body.parentElement;this.setState("scroll",a.scrollTop)},window.addEventListener("beforeunload",this.beforeunload)}toggleCnt(a,b){if(""===b)a.selected.splice(0,a.selected.length);else{const c=a.selected.indexOf(b);~c?a.selected.splice(c,1):a.selected.push(b)}a.dim.filterFunction(b=>!a.selected.length||~a.selected.indexOf(b))}}a.default=j}),define(51,["exports"],function(a){"use strict";var d=Math.abs;function b(a){return 4800*a/146097}function c(b){const c=new h(d(b)),e=Math.round,f=e(c.as("s")),j=e(c.as("m")),k=e(c.as("h")),l=e(c.as("d")),m=e(c.as("M")),n=e(c.as("y")),o=f<g.s&&["s",f]||1>=j&&["m"]||j<g.m&&["mm",j]||1>=k&&["h"]||k<g.h&&["hh",k]||1>=l&&["d"]||l<g.d&&["dd",l]||1>=m&&["M"]||m<g.M&&["MM",m]||1>=n&&["y"]||["yy",n];let a=i[o[0]].replace(/%d/i,o[1]);return i[0>b?"future":"past"].replace(/%s/i,a)}Object.defineProperty(a,"__esModule",{value:!0}),a.daysToMonths=b,a.relativeTime=c,a.Moment=a.Duration=a.zeropad=void 0;const e=/(?=^(?:[1-9]\d{3}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1\d|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[1-9]\d(?:0[48]|[2468][048]|[13579][26])|(?:[2468][048]|[13579][26])00)-02-29)T(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d(?:[,.]\d+)?(?:Z|[+-][01]\d:[0-5]\d)?$)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:[,.]\d+)?)(.*)/;var f=a=>{const b=a.toString();return 2>b.length?"0".concat(b):b};a.zeropad=f;const g={s:45,m:45,h:22,d:26,M:11};class h{constructor(a){this.diff=a}as(a){switch(a){case"y":return b(this.diff/864e5)/12;case"M":return b(this.diff/864e5);case"w":return this.diff/6048e5;case"d":return this.diff/864e5;case"h":return this.diff/36e5;case"m":return this.diff/6e4;case"s":return this.diff/1e3;case"ms":return this.diff;default:throw new Error("Unknown unit "+a);}}}a.Duration=h;const i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};class j{constructor(a){if("number"==typeof a){this.d=new Date(a);const b=this.d.getTimezoneOffset(),c="".concat(0>b?"+":"-").concat(d(b)/60>>0,":").concat(d(b)%60);this.o=e.exec("".concat(this.d.toISOString().slice(0,-1)).concat(c))}else if("string"==typeof a)this.d=new Date(a),this.o=e.exec(a);else if(a instanceof j)this.d=new Date(a.d);else if(!a){this.d=new Date;const a=this.d.getTimezoneOffset(),b="".concat(0>a?"+":"-").concat(d(a)/60>>0,":").concat(d(a)%60);this.o=e.exec("".concat(this.d.toISOString().slice(0,-1)).concat(b))}else throw new Error("Bad moment initialization: ".concat(a));this.dddd=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.ddd=this.dddd.map(a=>a.slice(0,3)),this.dd=this.dddd.map(a=>a.slice(0,2)),this.MMMM=["January","Februray","March","April","May","June","July","August","September","October","November","December"],this.MMM=this.MMMM.map(a=>a.slice(0,3))}clone(){return new j(this)}monthDays(a,b){return new Date(a,b,0).getDate()}get year(){return this.d.getFullYear()}set year(a){this.d.setFullYear(a)}get month(){return this.d.getMonth()+1}set month(a){const b=this.monthDays(this.year,a);this.date>b&&(this.date=b),this.d.setMonth(a-1)}get date(){return this.d.getDate()}set date(a){this.d.setDate(a)}get hour(){return this.d.getHours()}set hour(a){this.d.setHours(a)}get minute(){return this.d.getMinutes()}set minute(a){this.d.setMinutes(a)}get second(){return this.d.getSeconds()}set second(a){this.d.setSeconds(a)}get millisecond(){return this.d.getMilliseconds()}set millisecond(a){this.d.setMilliseconds(a)}get weekday(){return this.d.getDay()}set weekday(a){const b=a-this.weekday;this.date+=b}add(a,b){return"week"===b&&(a*=7,b="date"),this[b]+=a,this}startOf(a){switch(a){case"year":this.month=1;case"month":this.date=1;case"week":case"date":this.hour=0;case"hour":this.minute=0;case"minute":this.second=0;case"second":this.millisecond=0;}return"week"===a&&(this.weekday=0),this}endOf(a){return this.startOf(a).add(1,a).add(-1,"millisecond")}formatClassic(a){a=a||"YYYY-MM-DDTHH:mm:ssZ";const b={MMMM:()=>this.MMMM[this.month-1],MMM:()=>this.MMM[this.month-1],MM:()=>f(this.month),M:()=>this.month,DD:()=>f(this.date),D:()=>this.date,dddd:()=>this.dddd[this.weekday],ddd:()=>this.ddd[this.weekday],dd:()=>this.dd[this.weekday],d:()=>this.weekday,YYYY:()=>this.year,YY:()=>this.year%100,HH:()=>f(this.hour),H:()=>this.hour,hh:()=>f(this.hour%12),h:()=>this.hour%12,mm:()=>f(this.minute),m:()=>this.minute,ss:()=>f(this.second),s:()=>this.second,LL:()=>"".concat(this.MMMM[this.month-1]," ").concat(this.date," ").concat(this.year),LT:()=>"".concat(f(this.hour),":").concat(f(this.minute)),Z:()=>{const a=this.d.getTimezoneOffset();return"".concat(0>=a?"+":"-").concat(f(d(a)/60>>0),":").concat(f(d(a)%60))}},c=new RegExp("".concat(Object.keys(b).join("|"),"|."),"g");return a.replace(c,a=>b[a]?b[a]():a)}format(a,b){a=a||"YYYY-MM-DDTHH:mm:ssZZ";const c={timeZone:b,timeZoneName:"short",formatMatcher:"basic"},e=()=>{const a=(this.d-new Date(this.format("YYYY-MM-DDTHH:mm:ss",b)+"+0000"))/6e4;return"".concat(0>=a?"+":"-").concat(f(d(a)/60>>0),":").concat(f(d(a)%60))},g={},h={MMMM:a=>(a.month="long","{month}"),MMM:a=>(a.month="short","{month}"),MM:a=>(a.month="2-digit","{month}"),M:a=>(a.month="numeric","{month}"),DD:a=>(a.day="2-digit","{day}"),D:a=>(a.day="numeric","{day}"),dddd:a=>(a.weekday="long","{weekday}"),ddd:a=>(a.weekday="short","{weekday}"),dd:a=>(a.weekday="narrow","{weekday}"),YYYY:a=>(a.year="numeric","{year}"),YY:a=>(a.year="2-digit","{year}"),HH:a=>(a.hour="2-digit",g.hour=a=>f(+a),a.hour12=!1,"{hour}"),H:a=>(a.hour="numeric",g.hour=a=>"".concat(+a),a.hour12=!1,"{hour}"),hh:a=>(a.hour="2-digit",g.hour=a=>f(+a),a.hour12=!0,"{hour}"),h:a=>(a.hour="numeric",g.hour=a=>"".concat(+a),a.hour12=!0,"{hour}"),mm:a=>(a.minute="2-digit",g.minute=a=>f(+a),"{minute}"),m:a=>(a.minute="numeric",g.minute=a=>"".concat(+a),"{minute}"),ss:a=>(a.second="2-digit",g.second=a=>f(+a),"{second}"),s:a=>(a.second="numeric",g.second=a=>"".concat(+a),"{second}"),LL:a=>(a.month="long",a.day="numeric",a.year="numeric","{month} {day} {year}"),LT:a=>(a.hour="2-digit",a.minute="2-digit",a.day="2-digit","{hour}:{minute} {dayPeriod}"),z:()=>"{timeZoneName}",ZZ:()=>(g.timeZoneName=e,"{timeZoneName}")},i=new RegExp("".concat(Object.keys(h).join("|"),"|."),"g"),j=a.replace(i,a=>h[a]?h[a](c):a),k=Intl.DateTimeFormat([],c).formatToParts(this.d);k.push({type:"dayPeriod",value:""});const l=j.replace(/{([^}]+)}/g,function(a,b){const c=g[b]||(a=>a);return c(k.find(a=>a.type===b).value)});return l.trim()}valueOf(){return this.d.valueOf()}fromNow(){return c(Date.now()-this.d.valueOf())}toJSON(){return this.format()}toString(){return""+this.d.valueOf()}}a.Moment=j}),define(56,["exports"],function(a){"use strict";var b=String.fromCharCode;Object.defineProperty(a,"__esModule",{value:!0}),a.parse=function(a){return new o({input:a}).parse()},a.ASTBuilder=void 0;const d=a=>/[0-9A-Za-z]/.test(a),e=a=>/[A-Za-z]/.test(a),f=a=>/[A-Z]/.test(a),g=a=>/[0-9]/.test(a),h=a=>/[0-9A-Fa-f]/.test(a),i=a=>/[\t\n\f ]/.test(a),j={nbsp:"\xA0",times:"\xD7",laquo:"\xAB",raquo:"\xBB",lt:"<",gt:">"},k=["br","img","input"],l=b(0),m=-1,n={data(){const a=this.consume();if("&"===a)this.additionalAllowedCharacter=null,this.emit({type:"Literal",value:this.characterReference()});else if("<"===a)this.state="tagOpen";else if(a===l)throw new Error("NULL in data state");else a===m?this.emit({type:"EOF"}):"{"===a&&"{"===this.peek()?(this.pos++,this.returnState="data",this.state="mustache"):this.emit({type:"Literal",value:a})},tagOpen(){const a=this.consume();if("!"===a&&"-"===this.peek()&&"-"===this.peek(1))this.pos+=2,this.commentToken="",this.state="commentStart";else if("/"===a)this.state="endTagOpen";else if(f(a))this.token={type:"StartTag",name:a.toLowerCase(),attrs:[]},this.state="tagName";else if(e(a))this.token={type:"StartTag",name:a,attrs:[]},this.state="tagName";else if("?"===a)throw new Error("Parse error: tagname expected got: '".concat(a,"'"));else throw new Error("Parse error: tagname expected got: '".concat(a,"'"))},endTagOpen(){const a=this.consume();if(f(a))this.token={type:"EndTag",name:a.toLowerCase(),attrs:[]},this.state="tagName";else if(e(a))this.token={type:"EndTag",name:a,attrs:[]},this.state="tagName";else if(">"===a)throw new Error("Parse error: empty close tag");else if(a===m)throw new Error("Parse error: end tag not closed before EOF");else throw new Error("Parse error: tagname expected got: '".concat(a,"'"))},tagName(){const a=this.consume();if(i(a))this.state="beforeAttributeName";else if("/"===a)this.state="selfClosingStartTag";else if(">"===a)this.state="data",this.emit(this.token);else if(f(a))this.token.name+=a.toLowerCase();else if(a===l)throw new Error("Parse error: NULL in tagname");else if(a===m)throw new Error("Parse error: EOF in tagname");else this.token.name+=a},beforeAttributeName(){const a=this.consume();if(i(a));else if("/"===a)this.state="selfClosingStartTag";else if(">"===a)this.state="data",this.emit(this.token);else if(f(a))this.attr={name:a,value:[]},this.token.attrs.push(this.attr),this.state="attributeName";else if(a===l)throw new Error("Parse error: NULL at start of attribute name");else if(/["'<=]/.test(a))throw new Error("Parse error: Attribute name cannot start with ".concat(a));else if(a===m)throw new Error("Parse error: EOF in tag");else"{"===a&&"{"===this.peek()?(this.pos++,this.attr={name:"",value:[]},this.token.attrs.push(this.attr),this.returnState="beforeAttributeName",this.state="mustache"):(this.attr={name:a,value:[]},this.token.attrs.push(this.attr),this.state="attributeName")},attributeName(){const a=this.consume();if(i(a))this.state="afterAttributeName";else if("/"===a)this.state="selfClosingStartTag";else if("="===a)this.state="beforeAttributeValue";else if(">"===a)this.state="data",this.emit(this.token);else if(f(a))this.attr.name+=a;else if(a===l)throw new Error("Parse error: NULL in attribute name");else if(/["'<]/.test(a))throw new Error("Parse error: Attribute name cannot contain ".concat(a));else if(a===m)throw new Error("Parse error: EOF in attribute name");else this.attr.name+=a},afterAttributeName(){const a=this.consume();if(i(a));else if("/"===a)this.state="selfClosingStartTag";else if("="===a)this.state="beforeAttributeValue";else if(">"===a)this.state="data",this.emit(this.token);else if(f(a))this.attr={name:a,value:[]},this.token.attrs.push(this.attr),this.state="attributeName";else if(a===l)throw new Error("Parse error: NULL after attribute name");else if(/["'<]/.test(a))throw new Error("Parse error: Char after attribute name cannot be ".concat(a));else if(a===m)throw new Error("Parse error: EOF in attribute name");else"{"===a&&"{"===this.peek()?(this.pos++,this.attr={name:"",value:[]},this.token.attrs.push(this.attr),this.returnState="afterAttributeName",this.state="mustache"):(this.attr={name:a,value:[]},this.token.attrs.push(this.attr),this.state="attributeName")},beforeAttributeValue(){const a=this.consume();if(i(a));else if("\""===a||"'"===a)this.q=a,this.state="attributeValueQ";else if("&"===a)this.pos--,this.state="attributeValueU";else if(a===l)throw new Error("Parse error: NULL before attribute value");else if(">"===a)throw new Error("Parse error: Expected attribute value");else if(/[<=`]/.test(a))throw new Error("Parse error: Char before attribute value cannot be ".concat(a));else if(a===m)throw new Error("Parse error: EOF before attribute value");else"{"===a?(this.pos--,this.state="attributeValueU"):(this.attr.value.push({type:"Literal",value:a}),this.state="attributeValueU")},attributeValueQ(){const a=this.consume();if(a===this.q)this.state="afterAttributeValueQ";else if("&"===a){this.additionalAllowedCharacter=this.q;const a=this.attr.value.slice(-1)[0];a&&"Literal"===a.type?a.value+=this.characterReference():this.attr.value.push({type:"Literal",value:this.characterReference()})}else if(a===l)throw new Error("Parse error: NULL in attribute value");else if(a===m)throw new Error("Parse error: EOF in attribute value");else if("{"===a&&"{"===this.peek())this.pos++,this.returnState="attributeValueQ",this.state="mustache";else{const b=this.attr.value.slice(-1)[0];b&&"Literal"===b.type?b.value+=a:this.attr.value.push({type:"Literal",value:a})}},attributeValueU(){const a=this.consume();if(i(a))this.state="beforeAttributeName";else if("&"===a){this.additionalAllowedCharacter=">";const a=this.attr.value.slice(-1)[0];a&&"Literal"===a.type?a.value+=this.characterReference():this.attr.value.push({type:"Literal",value:this.characterReference()})}else if(">"===a)this.state="data",this.emit(this.token);else if(a===l)throw new Error("Parse error: NULL in attribute value");else if(/["'<=`]/.test(a))throw new Error("Parse error: Char in attribute value cannot be ".concat(a));else if(a===m)throw new Error("Parse error: EOF in attribute value");else if("{"===a&&"{"===this.peek())this.pos++,this.returnState="attributeValueU",this.state="mustache";else{const b=this.attr.value.slice(-1)[0];b&&"Literal"===b.type?b.value+=a:this.attr.value.push({type:"Literal",value:a})}},afterAttributeValueQ(){const a=this.consume();if(i(a))this.state="beforeAttributeName";else if("/"===a)this.state="selfClosingStartTag";else if(">"===a)this.state="data",this.emit(this.token);else if(a===m)throw new Error("Parse error: EOF after attribute value");else throw new Error("Parse error: Unexpected token ".concat(a," after attribute"))},selfClosingStartTag(){const a=this.consume();if(">"===a)this.token.selfClosing=!0,this.state="data",this.emit(this.token);else if(a===m)throw new Error("Parse error: EOF in self closing tag");else throw new Error("Parse error: Unexpected token / in self closing tag")},commentStart(){const a=this.consume();if("-"===a)this.state="commentStartDash";else if(a===l)throw new Error("Parse error: NULL at comment start");else if(">"===a)throw new Error("Parse error: > at comment start");else if(a===m)throw new Error("Parse error: EOF at comment start");else this.commentToken+=a,this.state="comment"},commentStartDash(){const a=this.consume();if("-"===a)this.state="commentEnd";else if(a===l)throw new Error("Parse error: NULL at comment start dash");else if(">"===a)throw new Error("Unexpected token");else if(a===m)throw new Error("Parse error: EOF at comment start dash");else this.commentToken+="-".concat(a),this.state="comment"},comment(){const a=this.consume();if("-"===a)this.state="commentEndDash";else if(a===l)throw new Error("Parse error: NULL in comment");else if(a===m)throw new Error("Parse error: EOF in comment");else this.commentToken+=a},commentEndDash(){const a=this.consume();if("-"===a)this.state="commentEnd";else if(a===l)throw new Error("Parse error: NULL in comment end dash");else if(a===m)throw new Error("Parse error: EOF in comment");else this.commentToken+="-".concat(a),this.state="comment"},commentEnd(){const a=this.consume();if(">"===a)this.state="data",this.emit({type:"comment",value:this.commentToken});else if(a===l)throw new Error("Parse error: NULL in comment end");else if("!"===a)throw new Error("Parse error: ! at comment end");else if("-"===a)throw new Error("Parse error: - at comment end");else if(a===m)throw new Error("Parse error: EOF at comment end");else throw new Error("Parse error: '".concat(a,"' after -- at comment end"))},mustache(){const a=this.consume();if("!"===a)this.mtoken={type:"MustacheComment",value:""},this.state="mustacheComment";else if("}"===a)throw new Error("Parse error: empty mustaches not allowed");else this.mtoken={type:"MustacheContent",value:[]},this.mstack=[this.mtoken],this.mvalue=this.mstack[0].value,"#"===a?(this.mvalue.push({type:"BlockOpen",value:""}),this.state="mustacheBlockOpen"):"/"===a?(this.mvalue.push({type:"BlockClose",value:""}),this.mstack.push(),this.state="mustacheBlockClose"):(this.pos--,this.state="mustacheContent")},mustacheComment(){const a=this.consume();if("}"===a&&"}"===this.peek()){if(this.pos++,"data"===this.returnState)this.emit(this.mtoken);else throw new Error("Cannot emit mustache comment inside tag");this.state=this.returnState}else this.mtoken.value+=a},mustacheBlockOpen(){const a=this.consume();if(i(a)||"}"===a)this.pos--,this.state="mustacheContent";else if(e(a))this.mvalue[0].value+=a;else throw new Error("Unexpected token '".concat(a,"'"))},mustacheBlockClose(){const a=this.consume();if("}"===a)this.pos--,this.state="mustacheContent";else if(e(a))this.mvalue[0].value+=a;else throw new Error("Unexpected token '".concat(a,"'"))},mustacheContent(){const a=this.consume();if("("===a){const a={type:"Expression",value:[]};this.mvalue.push(a),this.mvalue=a.value,this.mstack.unshift(a)}else if(")"===a){if(1===this.mstack.length)throw new Error("Stray \")\" in mustache found");this.mstack.shift(),this.mvalue=this.mstack[0].value}else if("\""===a){const a={type:"Literal",value:""};this.mvalue.push(a),this.mstack.unshift(a),this.state="mustacheLiteral"}else if(g(a)){const b={type:"Literal",value:+a};this.mvalue.push(b),this.mstack.unshift(b),this.state="mustacheLiteralNumber"}else if("-"===a){const a={type:"Literal",value:0};this.mvalue.push(a),this.mstack.unshift(a),this.state="mustacheLiteralNegativeNumber"}else if(e(a)){const b={type:"Identifier",value:a};this.mvalue.push(b),this.mstack.unshift(b),this.state="mustacheIdentifier"}else if("|"===a){const a={type:"BlockParams",value:""};this.mvalue.push(a),this.mstack.unshift(a),this.state="mustacheBlockParams"}else if(i(a));else if("}"===a&&"}"===this.peek()){if(this.pos++,1!==this.mstack.length)throw new Error("Not all expressions closed");"data"===this.returnState?this.emit(this.mtoken):this.attr.value.push(this.mtoken),this.state=this.returnState}else throw new Error("Mustache content broken \"".concat(a,"\""));this.mname&&(this.mstack[0].name=this.mname,this.mname=null)},mustacheBlockParams(){const a=this.consume();"|"===a?(this.mstack.shift(),this.state="mustacheContent"):this.mstack[0].value+=a},mustacheLiteral(){const a=this.consume();"\""===a?(this.mstack.shift(),this.state="mustacheContent"):this.mstack[0].value+=a},mustacheLiteralNumber(){const a=this.consume();if(g(a))this.mstack[0].value*=10,this.mstack[0].value+=+a;else if(i(a)||")"===a||"}"===a)this.pos--,this.mstack.shift(),this.state="mustacheContent";else throw new Error("Cannot parse digit ".concat(a))},mustacheLiteralNegativeNumber(){const a=this.consume();if(g(a))this.mstack[0].value*=10,this.mstack[0].value+=+a;else if(i(a)||")"===a||"}"===a)this.mstack[0].value*=-1,this.pos--,this.mstack.shift(),this.state="mustacheContent";else throw new Error("Cannot parse digit ".concat(a))},mustacheIdentifier(){const a=this.consume();if(i(a)||")"===a||"}"===a){this.pos--;const a=this.mstack[0];if(~["undefined","null","true","false"].indexOf(a.value)){a.type="Literal";const b=a.value[0];a.value="u"===b?void 0:"n"===b?null:!("t"!==b)}this.mstack.shift(),this.state="mustacheContent"}else if("="===a)this.mname=this.mstack[0].value,this.mstack.shift(),this.mstack[0].value.pop(),this.state="mustacheContent";else if(d(a)||"-"===a||"."===a||"_"===a)this.mstack[0].value+=a;else throw new Error("Unexpected token \"".concat(a,"\""))}};class o{constructor({input:a}){this.input=a,this.pos=0,this.state="data"}consume(){return this.pos<this.input.length?this.input[this.pos++]:m}peek(a){return a=a||0,this.pos+a<this.input.length?this.input[this.pos+a]:m}characterReference(){var a=this.peek();if(i(a)||"<"===a||"&"===a||a===m||a===this.additionalAllowedCharacter)return"&";if("#"===a){let c,d;if(this.pos++,/[xX]/.test(this.peek())?(this.pos++,c=h,d=16):(c=g,d=10),!c(this.peek()))throw new Error("Numerical character reference expected");let e=0;for(a=this.consume();a!==m&&c(a);)e=e*d+parseInt(a,d),a=this.consume();if(";"!==a)throw new Error("Numerical character reference not terminated with ;");return b(e)}var d=a;for(let b=Object.keys(j).filter(b=>b[0]===a);b.length;)d+=this.peek(d.length),b=b.filter(a=>a[d.length-1]===d.slice(-1));var e=d.slice(0,-1);return e in j?(this.pos+=d.length,j[e]):"&"}emit(a){if("EndTag"===a.type)if(a.selfClosing)throw new Error("EndTags cannot be self-closing");else if(a.attrs.length)throw new Error("EndTags cannot have attrs");this.tokens.push(a)}tokenize(){for(this.tokens=[];!this.tokens.length||"EOF"!==this.tokens.slice(-1)[0].type;)n[this.state].call(this);return this.tokens.pop(),this.tokens}build(a){const b=[{name:"root",content:[],params:[]}],c=a=>{const c=a.split(".")[0],d=[];for(let c=b.length-1;0<=c;c--)"loop"===b[c].type?d.push(b[c].params):"component"===b[c].type&&(d.push(b[c].params),d.push([]));for(let b=0,e=d.length;b<e;b++)if(~d[b].indexOf(c))return"".concat(Array.from({length:b+1}).join("parent.")).concat(a);return"ctx.".concat(a)},d=a=>("Identifier"===a.type?a.value=c(a.value):"Expression"===a.type||"Invocation"===a.type?a.value=a.value.map(d):"Attributes"===a.type&&(a.value=a.value.map(d)),a);for(let c of a)if("Literal"===c.type){const a=b.slice(-1)[0].content.slice(-1)[0];a&&"Literal"===a.type?a.value+=c.value:b.slice(-1)[0].content.push(c)}else if("StartTag"===c.type){let a=c.attrs.map(a=>"as"===a.name?a:(a.value=a.value.map(a=>("MustacheContent"===a.type&&(console.assert(0<a.value.length),1<a.value.length?a.type="Invocation":a=a.value[0]),a)),console.assert(0<a.value.length),a.value=1<a.value.length?d({type:"Expression",value:[{type:"Literal",value:"concat"}].concat(a.value)}):d(a.value[0]),a));const e=a.filter(b=>"as"===b.name),f={type:/-/.test(c.name)?"Component":"Tag",name:c.name,attributes:a.filter(b=>"as"!==b.name),params:e.length?e[0].value[0].value.split(" "):[],content:[]};b.slice(-1)[0].content.push(f),~k.indexOf(c.name)||c.selfClosing||b.push({type:c.name.includes("-")?"component":"tag",name:c.name,content:f.content,params:f.params})}else if("EndTag"===c.type){if(c.name!==b.slice(-1)[0].name)throw new Error("Unexpected end tag ".concat(c.name));else b.pop();}else if("MustacheComment"===c.type||"comment"===c.type);else if("MustacheContent"===c.type){const[a,...e]=c.value;if("Identifier"===a.type||"Expression"===a.type||"Literal"===a.type){if("else"===a.value){const a=b.slice(-1)[0];if("each"===a.name){if(e.length)throw new Error("Malformed else on each");const c=b.slice(-2)[0].content.slice(-1)[0];c.catchempty=[],a.content=c.catchempty}else if("if"===a.name){if(e.length)if("if"===e[0].value)e.shift();else throw new Error("else may only be followed by if");const c=b.slice(-2)[0].content.slice(-1)[0],f=e[0]?d(e[0]):null;c.branches.push([]),c.conditions.value[1].value.push(f),a.content=c.branches.slice(-1)[0]}else throw new Error("Mustache else out of scope ".concat(a.name))}else e.length?b.slice(-1)[0].content.push(d({type:"Invocation",value:c.value})):b.slice(-1)[0].content.push(d(a));}else if("BlockOpen"===a.type){let c;if("each"===a.value){const f=(e.filter(a=>"BlockParams"===a.type)[0]||{value:""}).value.split(" ").filter(a=>a);c={type:"Loop",list:{type:"Expression",value:[{type:"Literal",value:"muc-loop"},d(e[0])]},params:f,content:[]},b.slice(-1)[0].content.push(c),b.push({type:"loop",name:a.value,content:c.content,params:f})}else"if"===a.value?(c={type:"Condition",attributes:d({type:"Attributes",value:e.slice(1)}).value,branches:[[]],conditions:{type:"Expression",value:[{type:"Literal",value:"muc-if"},{type:"Expression",value:[{type:"Literal",value:"noexpand"},d(e[0])]}]}},b.slice(-1)[0].content.push(c),b.push({name:a.value,content:c.branches[0]})):(c={type:"Block",name:a.value,attributes:e.map(d),content:[]},b.slice(-1)[0].content.push(c),b.push({name:a.value,content:c.content}))}else if(!("BlockClose"===a.type))throw new Error("Do not know ".concat(a.type));else if(a.value!==b.slice(-1)[0].name)throw new Error("Unexpected end tag ".concat(a.value));else b.pop()}else throw new Error("Unknown type ".concat(c.type));if(1!==b.length)throw new Error("Unclosed element ".concat(b[1].name));return b[0].content}parse(){try{this.tokenize()}catch(a){const b=this.input.split("\n");let c=this.pos,d=0;for(;c>b[d].length;)c-=b[d].length+1,d++;const e="Parser error at line: ".concat(d+1," col: ").concat(c," abs: ").concat(this.pos);throw new Error("Line content: ".concat(b[d],"\n").concat(e,"\n").concat(a.message))}return this.build(this.tokens)}}a.ASTBuilder=o}),define(57,["exports",46],function(a,b){"use strict";var c=Math.pow;Object.defineProperty(a,"__esModule",{value:!0}),a.Router=void 0;class d extends b.O{init(){super.init(),this.stack=[],this.currentTransition=null,this.currentRoute=null}locationToPath(){if("object"!=typeof window)return{query:null,path:null};const a={},b=window.location.search.substr(1).split("&").filter(a=>a);for(let c=0,d=b.length;c<d;c++){const d=b[c],e=d.substr(0,d.indexOf("=")),f=d.slice(e.length+1);a[e]=f}let c=window.location.hash;return"#"===c[0]&&(c=c.slice(1)),{query:a,path:c}}pathToStack({path:a,query:b}){const d=a.split("/").filter(a=>!!a.length),e=(a,d)=>{const f=d.map(d=>{const f=a.slice(0),g=("string"==typeof d.path?d.path:d.name).split("/"),h={};let i=0;for(let e,j=0,k=g.length;j<k;j++)if(e=g[j],""!==e){if(i*=10,"*"===e[0])return i+=3,i*=c(10,a.length-1),h[e.slice(1)]=f.join("/"),{score:i,stack:[{route:d,dynamics:h,query:b}]};if(":"===e[0])i+=2,h[e.slice(1)]=f.shift();else if(e===f[0])i+=1,f.shift();else return{score:1/0}}const j=e(f,d.routes||[])||{score:1/0};if(j.score!==1/0)return i*=c(10,f.length),i+=j.score,{score:i,stack:[{route:d,dynamics:h,query:b}].concat(j.stack)};return f.length?j:{score:i,stack:[{route:d,dynamics:h,query:b}]}}).sort((c,a)=>c.score-a.score);return f[0]},f=e(d,this.routes);return f.stack}async performTransition(a){const b=(c,a)=>{if(c.route!=a.route)return!1;if(c.model&&c.model!=a.model)return!1;console.assert(Object.keys(c.dynamics).length===Object.keys(a.dynamics).length);for(let[b,d]of Object.entries(c.dynamics))if(d!==a.dynamics[b])return!1;for(let[b,d]of Object.entries(c.route.queryParams||{}))if(d.refreshModel&&c.query[b]!==a.query[b])return!1;return!0};let c=0;for(;a[c]&&this.stack[c]&&b(a[c],this.stack[c]);)c++;const d=a=>"".concat(this.stack.slice(0,a+1).map(a=>a.route.name).join("-"),"-route"),e=b=>"".concat(a.slice(0,b+1).map(a=>a.route.name).join("-"),"-route"),f={aborted:!1,abort(){this.aborted=!0},stack:a};for(let b=this.stack.length-1;b>=c;b--){const a=this.stack[b],c=this.getOwner().lookup("".concat(a.route.name,"-route"));if(c.willTransition(f),f.aborted)return}for(let b=0;b<c;b++){const c=this.getOwner().lookup(e(b));for(let d of Object.keys(a[b].route.queryParams||{}))c[d]=a[b].query[d]}for(let b=c;b<a.length;b++){const c=a[b],d=this.getOwner().lookup(e(b));for(let a of Object.keys(c.route.queryParams||{}))d[a]=c.query[a];(!c.model||c.model.fake)&&(c.model=await d.modelHook(c.dynamics))}for(let b=this.stack.length-1;b>=c;b--){const a=this.getOwner().lookup(d(b));this.stack.pop();let e;e=0===c?this.getOwner().lookup("application-route"):this.getOwner().lookup(d(b-1)),e.outlet=null,e.getOwner().update(),a.didLeave()}for(;c<a.length;c++){this.stack[c]=a[c];const b=this.getOwner().lookup(d(c));a[c].model&&(b.model=a[c].model);let e;e=0==c?this.getOwner().lookup("application-route"):this.getOwner().lookup(d(c-1)),e.outlet=b,e.getOwner().update(),b.didEnter()}this.currentQuery=Object.entries(this.stack[0].query).map(([a,b])=>"".concat(a,"=").concat(b.replace(/&/,"%26"))).join("&"),this.currentRoute=this.stack.map(a=>a.route.name).join(".")}updateFromLocation(){return this.performTransition(this.pathToStack(this.locationToPath()))}stackToLocation(a){const b=[];for(let c of Object.entries(a[0].query))b.push("".concat(c[0],"=").concat(c[1].replace(/&/,"%26")));let c="";return b.length&&(c+="?".concat(b.join("&"))),c+"#/"+a.map(a=>"undefined"==typeof a.route.path?a.route.name:a.route.path).map((b,c)=>b.split("/").map(b=>":"===b[0]?a[c].dynamics[b.slice(1)]:b)).reduce((a,b)=>a.concat(b),[]).filter(a=>a).join("/")}async transitionTo({route:a,models:b,query:c}){a=a||this.currentRoute,b=b||[],c=Object.assign(this.locationToPath().query,c);const d=a.split(".");for(;b.length<d.length;)b.unshift(void 0);const e=[];let f=this.routes;for(let g=0,h=d.length;g<h;g++){const a=f.filter(a=>a.name===d[g])[0];f=a.routes;const h=b[g],i={};Object.assign(i,this.stack[g].route===a&&this.stack[g].dynamics);const j="undefined"==typeof a.path?a.name:a.path;j.split("/").forEach(a=>{h&&":"===a[0]&&(i[a.slice(1)]=h[a.slice(1)])}),e.push({route:a,dynamics:i,query:c,model:h})}this.__ff45__=await this.performTransition(e),window.history.pushState(null,null,this.stackToLocation(e))}}a.Router=d}),define(58,["exports",46],function(a,b){"use strict";function c(a,b){if(!a)throw new Error(b)}Object.defineProperty(a,"__esModule",{value:!0}),a.Ot=void 0;class d extends b.O{constructor(){super(),this.ilen=0,this.olen=0,this.ops=b.A.create()}static fromJSON(a){const b=this.create();for(let d of a)switch(d.t){case"n":b.retain(d.n);break;case"i":b.insert(d.i);break;case"r":b.remove(d.r);break;default:c(!1,"Unknown operation: "+JSON.stringify(d));}return b}toJSON(){return this.ops}isNoop(){const a=this.ops.length;return 0===a||1===a&&"n"===this.ops[0].t}retain(a){if(c("number"==typeof a&&0<=a,"Retain expects a positive integer."),0<a){this.ilen+=a,this.olen+=a;const b=this.ops,c=b[-1];c&&"n"===c.t?c.n+=a:b.push({t:"n",n:a})}return this}insert(a){if(c(a[Symbol.iterator],"Insert expects an iterable"),a.length){this.olen+=a.length;const b=this.ops,c=b[-1];if(c&&"i"===c.t)c.i=c.i.concat(Array.from(a));else if(c&&"r"===c.t){const c=b[-2];c&&"i"===c.t?c.i=c.i.concat(Array.from(a)):b.splice(b.length-1,0,{t:"i",i:Array.from(a)})}else b.push({t:"i",i:Array.from(a)})}return this}remove(a){if(c(a[Symbol.iterator],"Remove expects an iterable"),a.length){this.ilen+=a.length;var b=this.ops[-1];b&&"r"===b.t?b.r=b.r.concat(Array.from(a)):this.ops.push({t:"r",r:Array.from(a)})}return this}invert(){const a=this.constructor.create();for(let b of this.ops)"n"===b.t?a.retain(b.n):"i"===b.t?a.remove(b.i):a.insert(b.r);return a}apply(a){c(a.length===this.ilen,"Apply length mismatch ".concat(a.length," !== ").concat(this.ilen));let b=Array.from(a),d=[],e=0;for(let f of this.ops)"n"===f.t?(c(e+f.n<=b.length,"Input is too short."),d=d.concat(b.slice(e,e+f.n)),e+=f.n):"i"===f.t?d=d.concat(f.i):(c(!0,"Removal does not match content."),e+=f.r.length);return c(e===a.length,"Apply operation did not consume complete input. ".concat(e," ").concat(a.length," ").concat(JSON.stringify(this.ops))),"string"==typeof a?d.join(""):a.constructor.from(d)}update(a){if(c(a.length===this.ilen,"Apply length mismatch ".concat(a.length," !== ").concat(this.ilen)),a instanceof Array){let b=0;for(let d of this.ops)if("n"===d.t)c(b+d.n<=a.length,"Input is too short."),b+=d.n;else if("i"===d.t){let c=b,e=d.i.length;for(const f=4096;e;)a.splice.apply(a,[c,0].concat(d.i.slice(c-b,c-b+f))),c+=f,e=0>e-f?0:e-f;b+=d.i.length}else c(!0,"Removal does not match content."),a.splice(b,d.r.length);return c(b===a.length,"Apply operation did not consume complete input."),a}return this.apply(a)}compose(a){c(this.olen===a.ilen,"Cannot compose due to length mismatch ".concat(this.olen," !== ").concat(a.ilen,"."));const b=this.ops,d=a.ops;let e=0,f=0,g=b[e++],h=d[f++];const i=this.constructor.create();for(;g||h;)g&&"r"===g.t?(i.remove(g.r),g=b[e++]):"i"===h.t?(i.insert(h.i),h=d[f++]):"n"===g.t?"n"===h.t?g.n>h.n?(i.retain(h.n),g={t:"n",n:g.n-h.n},h=d[f++]):g.n<h.n?(i.retain(g.n),h={t:"n",n:h.n-g.n},g=b[e++]):(i.retain(g.n),g=b[e++],h=d[f++]):g.n>h.r.length?(i.remove(h.r),g={t:"n",n:g.n-h.r.length},h=d[f++]):g.n<h.r.length?(i.remove(h.r.slice(0,g.n)),h={t:"r",r:h.r.slice(g.n)},g=b[e++]):(i.remove(h.r),g=b[e++],h=d[f++]):"n"===h.t?g.i.length>h.n?(i.insert(g.i.slice(0,h.n)),g={t:"i",i:g.i.slice(h.n)},h=d[f++]):g.i.length<h.n?(i.insert(g.i),h={t:"n",n:h.n-g.i.length},g=b[e++]):(i.insert(g.i),g=b[e++],h=d[f++]):g.i.length>h.r.length?(g={t:"i",i:g.i.slice(h.r.length)},h=d[f++]):g.i.length<h.r.length?(h={t:"r",r:h.r.slice(g.i.length)},g=b[e++]):(g=b[e++],h=d[f++]);return i}transform(a){c(this.ilen===a.ilen,"Both operations have to have the same base length");const b=this.ops,d=a.ops;let e=0,f=0,g=b[e++],h=d[f++];const i=this.constructor.create(),j=this.constructor.create();for(let c;g||h;)g&&"i"===g.t?(i.insert(g.i),j.retain(g.i.length),g=b[e++]):h&&"i"===h.t?(i.retain(h.i.length),j.insert(h.i),h=d[f++]):"n"===g.t?"n"===h.t?(g.n>h.n?(c=h.n,g={t:"n",n:g.n-h.n},h=d[f++]):g.n<h.n?(c=g.n,h={t:"n",n:h.n-g.n},g=b[e++]):(c=h.n,g=b[e++],h=d[f++]),i.retain(c),j.retain(c)):(g.n>h.r.length?(c=h.r,g={t:"n",n:g.n-h.r.length},h=d[f++]):g.n<h.r.length?(c=h.r.slice(0,g.n),h={t:"r",r:h.r.slice(g.n)},g=b[e++]):(c=h.r,g=b[e++],h=d[f++]),j.remove(c)):"r"===h.t?g.r.length>h.r.length?(g={t:"r",r:g.r.slice(h.r.length)},h=d[f++]):g.r.length<h.r.length?(h={t:"r",r:h.r.slice(g.r.length)},g=b[e++]):(g=b[e++],h=d[f++]):(g.r.length>h.n?(c=g.r.slice(0,h.n),g={t:"r",r:g.r.slice(h.n)},h=d[f++]):g.r.length<h.n?(c=g.r,h={t:"n",n:h.n-g.r.length},g=b[e++]):(c=g.r,g=b[e++],h=d[f++]),i.remove(c));return[i,j]}}a.Ot=d}),define(6,["exports",7],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,b=function(a){return a&&a.__esModule?a:{default:a}}(b);class c extends b.default{constructor(){super(),this.type="compare"}}a.default=c}),define(7,["exports",45,46],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class d extends b.RoutableComponent{constructor(){super(),this.template="PHdpZGdldC13YWl0aW5nIGljb249Imxpc3QtcmljaCIgYWNsPXt7YXBwLmFjbC5kZXRhaWx9fSB1c2VyPXt7YXBwLnVzZXJ9fSBlNDAxPSJTaWduIGluIHRvIGFjY2VzcyBkZXRhaWxzIiBlNDAzPSJVc2VyIHt7YXBwLnVzZXJ9fSBpcyBub3QgcGVybWl0dGVkIHRvIGFjY2VzcyBkZXRhaWxzIGZvciBkYXRhc2V0IHt7cGFyYW1zLmlkfX0iIGU0MDQ9IkRhdGFzZXQge3twYXJhbXMuaWR9fSBkb2VzIG5vdCBleGlzdCI+IDxkaXYgY2xhc3M9ImRldGFpbCI+IDxkaXYgY2xhc3M9ImJyZWFkY3J1bWJzIj4gPG9sIGNsYXNzPSJicmVhZGNydW1iIj4gPGxpIGNsYXNzPSJicmVhZGNydW1iLWl0ZW0iPjxsaW5rLXRvIGhyZWY9ImNvbGxlY3Rpb24ve3ttb2RlbC5jb2xsZWN0aW9ufX0iPk92ZXJ2aWV3PC9saW5rLXRvPjwvbGk+IDxsaSBjbGFzcz0iYnJlYWRjcnVtYi1pdGVtIGFjdGl2ZSI+e3ttb2RlbC50aXRsZX19PC9saT4gPC9vbD4ge3sjaWYgKCJpcy1lcXVhbCIgdHlwZSAiZGF0YXNldCIpfX0gPHNwYW4+IHt7I2lmIGFwcC5hY2wudGFnfX0gPHdpZGdldC10YWcgY2xhc3M9ImJ0biBidG4teHMgYnRuLW91dGxpbmUtc2Vjb25kYXJ5IiBkaXNhYmxlZD17eyJub3QiIGFwcC51c2VyfX0gdGFncz17e21vZGVsLnRhZ3N9fSBhbGx0YWdzPXt7bW9kZWwuYWxsX2tub3duX3RhZ3N9fSBhbHRBY3Rpb249e3siZm4iIG9wZW5TaWduaW59fSBjaGFuZ2VBY3Rpb249e3siZm4iIHJldGFnfX0gbWVudUNsYXNzPSJkcm9wZG93bi1tZW51LXJpZ2h0IiAvPiB7ey9pZn19IHt7I2lmIGFwcC5hY2wuY29tbWVudH19IDx3aWRnZXQtY29tbWVudCBjbGFzcz0iYnRuIGJ0bi14cyBidG4tb3V0bGluZS1zZWNvbmRhcnkiIGRpc2FibGVkPXt7Im5vdCIgYXBwLnVzZXJ9fSBjaGFuZ2VBY3Rpb249e3siZm4iIFhjb21tZW50fX0gbWVudUNsYXNzPSJkcm9wZG93bi1tZW51LXJpZ2h0IiAvPiB7ey9pZn19IHt7I2lmIGFwcC5hY2wuZmlsZV9saXN0fX0ge3sjaWYgbGlzdEZldGNoZWR9fSA8d2lkZ2V0LWNsaXBib2FyZCBjbGFzcz0iYnRuIGJ0bi14cyBidG4tb3V0bGluZS1zZWNvbmRhcnkiIG1vZGVsPXt7Y29weUZpbGVsaXN0fX0gLz4gPHdpZGdldC1jbGlwYm9hcmQgY2xhc3M9ImJ0biBidG4teHMgYnRuLW91dGxpbmUtc2Vjb25kYXJ5IiBtb2RlbD17e2NvcHlVcmxsaXN0fX0gLz4ge3tlbHNlfX0gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi14cyBidG4tb3V0bGluZS1zZWNvbmRhcnkiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImdldEZpbGVsaXN0Iil9fT4gZmV0Y2ggZmlsZSBsaXN0cyA8L2J1dHRvbj4ge3svaWZ9fSB7ey9pZn19IHt7I2lmIGFwcC5hY2wuZGVsZXRlfX0gPGJ1dHRvbi1jb25maXJtIGJ1dHRvbkNsYXNzPSJidG4gYnRuLXhzIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSIgYWN0aW9uQnV0dG9uQ2xhc3M9ImJ0biBidG4tb3V0bGluZS1kYW5nZXIiIHRpdGxlPSJEaXNjYXJkIGRhdGFzZXQiIHRleHQ9IkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBtYXJrIGRhdGFzZXQge3twYXJhbXMuaWR9fSBmb3IgZGVsZXRpb24/IElmIHRoZSBjb3JyZXNwb25kaW5nIGZpbGVzIHN0aWxsIGV4aXN0cyBvbiBkaXNrLCB0aGV5IHdvdWxkIGJlIHJlLWFkZGVkIGFzIG5ldyBkYXRhc2V0IGR1cmluZyB0aGUgbmV4dCBzY2FuLiBUaGUgZGlzY2FyZGVkIGRhdGFzZXQgd291bGQgYmUgZGVsZXRlZCBkdXJpbmcgdGhlIG5leHQgY2xlYW51cCBhbmQgaXRzIHRhZ3MgYW5kIGNvbW1lbnRzIHdvdWxkIGJlIElSUkVWT0NBQkxZIGdvbmUuIiBhY3Rpb249e3siZm4iIGRlbGV0ZX19IGNvbmZpcm1UZXh0PSJEaXNjYXJkIGRhdGFzZXQiPiBEaXNjYXJkIGRhdGFzZXQgPC9idXR0b24tY29uZmlybT4ge3svaWZ9fSA8L3NwYW4+IHt7L2lmfX0gPC9kaXY+IDxtLWhzY3JvbGw+IDx1bCBjbGFzcz0ibmF2IG5hdi10YWJzIj4ge3sjaWYgbW9kZWwuc3VtbWFyeX19IDxsaSBjbGFzcz0ibmF2LWl0ZW0iPjxhIGhyZWY9IiMiIGNsYXNzPSJuYXYtbGluayB7eyJpZiIgKCJpcy1lcXVhbCIgdGFiaW5kZXggInN1bW1hcnkiKSAiYWN0aXZlIn19IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJzZXR0YWIiICJzdW1tYXJ5Iil9fT5TdW1tYXJ5PC9hPjwvbGk+IHt7L2lmfX0ge3sjZWFjaCBtb2RlbC5zZWN0aW9ucyBhcyB8c2VjdGlvbiBpbmRleHx9fSA8bGkgY2xhc3M9Im5hdi1pdGVtIj48YSBocmVmPSIjIiBjbGFzcz0ibmF2LWxpbmsge3siaWYiICgiaXMtZXF1YWwiIHRhYmluZGV4IGluZGV4KSAiYWN0aXZlIn19IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJzZXR0YWIiIGluZGV4KX19Pnt7c2VjdGlvbi50aXRsZX19PC9hPjwvbGk+IHt7L2VhY2h9fSA8L3VsPiA8L20taHNjcm9sbD4gPGRpdiBjbGFzcz0iY2FyZCI+IDxkaXYgY2xhc3M9ImNhcmQtYm9keSB0YWItY29udGVudCI+IHt7I2lmIG1vZGVsLnN1bW1hcnl9fSA8ZGl2IHJvbGU9InRhYnBhbmVsIiBjbGFzcz0idGFiLXBhbmUge3siaWYiICgiaXMtZXF1YWwiIHRhYmluZGV4ICJzdW1tYXJ5IikgImFjdGl2ZSJ9fSI+IDxkaXYgY2xhc3M9InhjYXJkIj4gPGRpdiBjbGFzcz0ieGNhcmQtYm9keSI+IHt7I2VhY2ggbW9kZWwuc3VtbWFyeS53aWRnZXRzIGFzIHx3aWRnZXR8fX0gPGRpdiBjbGFzcz0iY2FyZCB3aWRnZXQtY29udGFpbmVyIj4gPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4gPGgzPnt7d2lkZ2V0LmNhcHRpb259fTwvaDM+IDx3aWRnZXQtbG9hZGVyIG1vZGVsPXt7d2lkZ2V0fX0gLz4gPC9kaXY+IDwvZGl2PiB7ey9lYWNofX0gPGhyIC8+IDxkaXY+IFRhZ2dlZCA8dWwgY2xhc3M9Imxpc3QtaW5saW5lIHRhZ2dlZCI+e3sjZWFjaCBtb2RlbC50YWdzIGFzIHx0YWd8fX08bGkgY2xhc3M9Imxpc3QtaW5saW5lLWl0ZW0iPjxzcGFuIGNsYXNzPSJiYWRnZSI+e3t0YWd9fTwvc3Bhbj48L2xpPnt7L2VhY2h9fTwvdWw+IHt7I2lmIGFwcC5hY2wudGFnfX0gPHdpZGdldC10YWcgY2xhc3M9ImJ0biBidG4teHMgYnRuLW91dGxpbmUtc2Vjb25kYXJ5IiBkaXNhYmxlZD17eyJub3QiIGFwcC51c2VyfX0gdGFncz17e21vZGVsLnRhZ3N9fSBhbGx0YWdzPXt7bW9kZWwuYWxsX2tub3duX3RhZ3N9fSBhbHRBY3Rpb249e3siZm4iIG9wZW5TaWduaW59fSBjaGFuZ2VBY3Rpb249e3siZm4iIHJldGFnfX0gLz4ge3svaWZ9fSA8L2Rpdj4gPGhyIC8+IHt7I2VhY2ggbW9kZWwuY29tbWVudHMgYXMgfGNvbW1lbnR8fX0gPGRpdiBjbGFzcz0iY29tbWVudCBjYXJkIj4gPGRpdiBjbGFzcz0iY2FyZC1oZWFkZXIiPiA8c3Ryb25nPnt7Y29tbWVudC5hdXRob3J9fTwvc3Ryb25nPiBjb21tZW50ZWQgPHRpbWUgZGF0ZXRpbWU9Int7Y29tbWVudC50aW1lQWRkZWR9fSIgaXM9InJlbGF0aXZlLXRpbWUiIHRpdGxlPSJ7e2NvbW1lbnQudGltZUFkZGVkfX0iID57eygicHJpbnQtcmVsYXRpbWUiIGNvbW1lbnQudGltZUFkZGVkKX19PC90aW1lPiA8L2Rpdj4gPGRpdiBjbGFzcz0iY29tbWVudC1jb250ZW50IGNhcmQtYm9keSI+IHt7Y29tbWVudC50ZXh0fX0gPC9kaXY+IDwvZGl2PiB7ey9lYWNofX0ge3sjaWYgYXBwLmFjbC5jb21tZW50fX0gPGRpdiBjbGFzcz0iY29tbWVudCBjYXJkIj4gPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4gPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+IHt7I2lmIGFwcC51c2VyfX0gPGlucHV0LXRleHRhcmVhIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJMZWF2ZSBhIGNvbW1lbnQiIHZhbHVlPXt7Y29tbWVudH19IHJvd3M9NSBjaGFuZ2VBY3Rpb249e3siY3VycnkiICgibm9leHBhbmQiICgic2V0IiAoIm5vZXhwYW5kIiBjb21tZW50KSkpfX0gLz4ge3tlbHNlfX0gPGlucHV0LXRleHRhcmVhIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJTaWduIGluIHRvIGNvbW1lbnQiIHZhbHVlPXt7Y29tbWVudH19IHJvd3M9NSBjaGFuZ2VBY3Rpb249e3siY3VycnkiICgibm9leHBhbmQiICgic2V0IiAoIm5vZXhwYW5kIiBjb21tZW50KSkpfX0gZGlzYWJsZWQ9ImRpc2FibGVkIiAvPiB7ey9pZn19IDwvZGl2PiB7eyNpZiBhcHAudXNlcn19IDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAic2F2ZUNvbW1lbnQiKX19PiBDb21tZW50IDwvYnV0dG9uPiB7ey9pZn19IDwvZGl2PiA8L2Rpdj4ge3svaWZ9fSA8L2Rpdj4gPC9kaXY+IDwvZGl2PiB7ey9pZn19IHt7I2VhY2ggbW9kZWwuc2VjdGlvbnMgYXMgfHNlY3Rpb24gaW5kZXh8fX0gPGRpdiByb2xlPSJ0YWJwYW5lbCIgY2xhc3M9InRhYi1wYW5lIHt7ImlmIiAoImlzLWVxdWFsIiB0YWJpbmRleCBpbmRleCkgImFjdGl2ZSJ9fSI+IHt7I2lmICgiaXMtZXF1YWwiIHRhYmluZGV4IGluZGV4KX19IHt7I2lmICgiaXMtZ3JlYXRlciIgc2VjdGlvbi53aWRnZXRzLmxlbmd0aCAxKX19IHt7I2VhY2ggc2VjdGlvbi53aWRnZXRzIGFzIHx3aWRnZXR8fX0gPGRpdiBjbGFzcz0ieGNhcmQgd2lkZ2V0LWNvbnRhaW5lciI+IDxkaXYgY2xhc3M9InhjYXJkLWJvZHkiPiB7eyNpZiB3aWRnZXQuY2FwdGlvbn19IDxoMz57e3dpZGdldC5jYXB0aW9ufX08L2gzPiB7ey9pZn19IDx3aWRnZXQtbG9hZGVyIG1vZGVsPXt7d2lkZ2V0fX0gLz4gPC9kaXY+IDwvZGl2PiB7ey9lYWNofX0ge3tlbHNlfX0ge3sjaWYgc2VjdGlvbi53aWRnZXRzLjAuY2FwdGlvbn19IDxoMz57e3NlY3Rpb24ud2lkZ2V0cy4wLmNhcHRpb259fTwvaDM+IHt7L2lmfX0gPHdpZGdldC1sb2FkZXIgbW9kZWw9e3tzZWN0aW9uLndpZGdldHMuMH19IC8+IHt7L2lmfX0ge3svaWZ9fSA8L2Rpdj4ge3svZWFjaH19IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvd2lkZ2V0LXdhaXRpbmc+",this.type="dataset",this.app=(0,c.computed)(function(){return this.getOwner().lookup("application-route")}),this.comment="",this.modelId=null,this.model=(0,c.computed)("params",async function(){const{id:a}=this.params,b=await this.app.api({url:"".concat(this.type,"/").concat(a)});return this.baseurl="marv/api/dataset"+("dataset"===this.type?"/".concat(a):""),document.title="MARV > ".concat("dataset"===this.type?a.slice(0,10):this.type),this.rebaseUrls(b),this.app.activeCollection=b.collection,this.modelId!==a&&(this.tabindex=b.summary?"summary":0,this.modelId=a),b.comments=c.A.create(b.comments),b.tags=c.A.create(b.tags),this.listFetched=!1,c.O.create(b)})}getFilelist(){this.app.getFilelist([this.model.id]).then(a=>{this.copyFilelist={data:a.paths.join("\n"),title:"file paths"},this.copyUrllist={data:a.urls.map(a=>"".concat(this.app.apiEndpoint).concat(a)).join("\n"),title:"URLs"},this.listFetched=!0})}toggleControls(){this.controlsOpen=!this.controlsOpen}saveComment(){this.comment&&(this.app.comment({[this.model.id]:{add:[this.comment]}}).then(()=>this.reloadModel()),this.comment="")}settab(a,b){this.tabindex=a,b.preventDefault()}openSignin(){this.app.openSignin()}retag(a){const b={},c={};a.added.forEach(a=>b[a]=[this.model.id]),a.removed.forEach(a=>c[a]=[this.model.id]),this.app.tag({[this.model.collection]:{add:b,remove:c}}).then(()=>this.reloadModel())}Xcomment(a){this.app.comment({[this.model.id]:{add:[a]}}).then(()=>this.reloadModel())}delete(){this.app.delete([this.model.id]).then(()=>{this.getOwner().lookup("collection-route").reloadModel(),this.transitionTo({route:"index"})})}rebaseUrls(a){const b=(a.summary?[a.summary]:[]).concat(a.sections),{sessionid:c}=this.app,d=c?"?access_token=".concat(c):"";b.forEach(a=>{a.widgets.forEach(a=>{a.data&&("image"===a.type?!/^data:/.test(a.data.src)&&(a.data.src="".concat(this.baseurl,"/").concat(a.data.src).concat(d)):"gallery"===a.type?a.data.images.forEach(a=>{/^data:/.test(a.src)||(a.src="".concat(this.baseurl,"/").concat(a.src).concat(d))}):"table"===a.type?a.data.columns.forEach((b,c)=>{"rellink"===b.formatter&&(b.formatter="link",a.data.rows.forEach(a=>{/^data:/.test(a.values[c].href)||(a.values[c].href="".concat(this.baseurl,"/").concat(a.values[c].href).concat(d))}))}):"video"===a.type&&!/^data:/.test(a.data.src)&&(a.data.src="".concat(this.baseurl,"/").concat(a.data.src).concat(d)))})})}modelHook(a){this.app.lastDetailHash=location.hash,this.params=a}reloadModel(){this.params={id:this.params.id},this.getOwner().lookup("collection-route").reloadModel()}}a.default=d}),define(8,["exports",45,46,51],function(a,b,c,d){"use strict";function e(a,b){do{if(a===b)return!0;b=b.parentElement}while(b.parentElement);return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;class f extends b.Component{constructor(){super(),this.template="PGRpdiBjbGFzcz0iZmllbGQtZGF0ZXRpbWUgZm9ybS1yb3ciPiA8ZGl2IGNsYXNzPSJjb2wiPiA8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cCBpbnB1dC1ncm91cC1zbSBkYXRlIiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJjYWxlbmRhckZvY3VzSW4iIG9uPSJmb2N1cyIgY2FwdHVyZT10cnVlKX19IHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImNhbGVuZGFyRm9jdXNPdXQiIG9uPSJibHVyIiBjYXB0dXJlPXRydWUpfX0+IDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwLXByZXBlbmQgZHJvcGRvd24iPiA8c3BhbiBjbGFzcz0iaW5wdXQtZ3JvdXAtdGV4dCI+IDx3aWRnZXQtaWNvbiBnbHlwaD0iY2FsZW5kYXIiIC8+IHt7ISNpZiBjYWxlbmRhck9wZW59fSA8ZGl2IGNsYXNzPSJkcm9wZG93bi1tZW51IHt7ImlmIiBjYWxlbmRhck9wZW4gInNob3cifX0iIHRhYmluZGV4PSItMSI+IDx0YWJsZSBjbGFzcz0ic21hbGwgdGV4dC1jZW50ZXIiPiA8dGhlYWQ+IDx0cj4gPHRoPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWxpbmsgYnRuLXhzIiB0eXBlPSJidXR0b24iIHRhYmluZGV4PSItMSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAicHJldiIpfX0+IDx3aWRnZXQtaWNvbiBnbHlwaD0iY2hldnJvbi1sZWZ0IiAvPiA8L2J1dHRvbj4gPC90aD4gPHRoIGNsYXNzPSJ0ZXh0LWNlbnRlciIgY29sc3Bhbj0iNSI+e3tkaXNwbGF5TW9udGh5ZWFyfX08L3RoPiA8dGggY2xhc3M9InRleHQtY2VudGVyIiBzdHlsZT0icGFkZGluZy1sZWZ0OjA7IFhwYWRkaW5nLXJpZ2h0OjAiPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWxpbmsgYnRuLXhzIiB0eXBlPSJidXR0b24iIHRhYmluZGV4PSItMSIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAibmV4dCIpfX0+IDx3aWRnZXQtaWNvbiBnbHlwaD0iY2hldnJvbi1yaWdodCIgLz4gPC9idXR0b24+IDwvdGg+IDwvdHI+IDx0cj4ge3shI2dyb3VwfX0ge3sjZWFjaCB3ZWVrZGF5cyBhcyB8d2Vla2RheXx9fSA8dGg+e3t3ZWVrZGF5fX08L3RoPiB7ey9lYWNofX0ge3shL2dyb3VwfX0gPC90cj4gPC90aGVhZD4gPHRib2R5PiB7eyNlYWNoIG1hdHJpeCBhcyB8bGluZXx9fSA8dHI+IHt7I2VhY2ggbGluZSBhcyB8Y29sdW1ufH19IDx0ZCBjbGFzcz17eyJpZiIgY29sdW1uLmlzQ3VycmVudCAiY3VycmVudERheSJ9fT4gPGEgY2xhc3M9ImJ0biBidG4teHMge3siaWYiIGNvbHVtbi5pc01vbnRoICJibGFjayIgImdyYXkifX0iIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgInNldERhdGUiIGNvbHVtbi55ZWFyIGNvbHVtbi5tb250aCBjb2x1bW4uZGF0ZSl9fT57e2NvbHVtbi5kYXRlfX08L2E+IDwvdGQ+IHt7L2VhY2h9fSA8L3RyPiB7ey9lYWNofX0gPC90Ym9keT4gPC90YWJsZT4gPC9kaXY+IHt7IS9pZn19IDwvc3Bhbj4gPC9kaXY+IDxpbnB1dC1jb250cm9sIGNsYXNzPSJmb3JtLWNvbnRyb2wge3tjbGFzc319IHt7ImlmIiBjYWxlbmRhck9wZW4gImZvY3VzIn19IiB2YWx1ZT17e2Rpc3BsYXlEYXRlfX0gY2hhbmdlQWN0aW9uPXt7ImZuIiBub29wfX0gLz4gPC9kaXY+IDwvZGl2PiB7eyNpZiBmYWxzZX19IDxkaXYgY2xhc3M9ImNvbCI+IDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIGlucHV0LWdyb3VwLXNtIHRpbWUiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImNsb2NrRm9jdXNJbiIgb249ImZvY3VzIiBjYXB0dXJlPXRydWUpfX0ge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiY2xvY2tGb2N1c091dCIgb249ImJsdXIiIGNhcHR1cmU9dHJ1ZSl9fT4gPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAtcHJlcGVuZCBkcm9wZG93biB7eyJpZiIgY2xvY2tPcGVuICJvcGVuIn19Ij4gPHNwYW4gY2xhc3M9ImlucHV0LWdyb3VwLXRleHQiPiA8d2lkZ2V0LWljb24gZ2x5cGg9ImNsb2NrIiAvPiB7eyNpZiBjbG9ja09wZW59fSA8ZGl2IGNsYXNzPSJkcm9wZG93bi1tZW51IiBzdHlsZT0ibWluLXdpZHRoOjAiIHRhYmluZGV4PSItMSI+IDx0YWJsZSBjbGFzcz0iWHRhYmxlIHRhYmxlLWNvbmRlbnNlZCBzbWFsbCB0ZXh0LWNlbnRlciI+IDx0Ym9keT4gPHRyPiA8dGQ+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGVmYXVsdCIge3siYWN0aW9uIiAoIm5vZXhwYW5kIiAiaG91clVwIil9fT4gPHdpZGdldC1pY29uIGdseXBoPSJjaGV2cm9uLXVwIiAvPiA8L2J1dHRvbj4gPC90ZD4gPHRkIGNsYXNzPSJzZXBhcmF0b3IiPiZuYnNwOzwvdGQ+IDx0ZD4gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IiB7eyJhY3Rpb24iICgibm9leHBhbmQiICJtaW51dGVVcCIpfX0+IDx3aWRnZXQtaWNvbiBnbHlwaD0iY2hldnJvbi11cCIgLz4gPC9idXR0b24+IDwvdGQ+IDwvdHI+IDx0cj4gPHRkPnt7aG91cn19PC90ZD4gPHRkIGNsYXNzPSJzZXBhcmF0b3IiPjo8L3RkPiA8dGQ+e3ttaW51dGV9fTwvdGQ+IDwvdHI+IDx0cj4gPHRkPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgImhvdXJEb3duIil9fT4gPHdpZGdldC1pY29uIGdseXBoPSJjaGV2cm9uLWRvd24iIC8+IDwvYnV0dG9uPiA8L3RkPiA8dGQgY2xhc3M9InNlcGFyYXRvciI+Jm5ic3A7PC90ZD4gPHRkPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQiIHt7ImFjdGlvbiIgKCJub2V4cGFuZCIgIm1pbnV0ZURvd24iKX19PiA8d2lkZ2V0LWljb24gZ2x5cGg9ImNoZXZyb24tZG93biIgLz4gPC9idXR0b24+IDwvdGQ+IDwvdHI+IDwvdGJvZHk+IDwvdGFibGU+IDwvZGl2PiB7ey9pZn19IDwvc3Bhbj4gPC9kaXY+IDxpbnB1dCBjbGFzcz0iZm9ybS1jb250cm9sIHt7Y2xhc3N9fSIgdmFsdWU9e3tkaXNwbGF5VGltZX19IGRpc2FibGVkPWRpc2FibGVkID4gPC9kaXY+IDwvZGl2PiB7ey9pZn19IDwvZGl2Pg==",this.weekdays=[0,1,2,3,4,5,6].map(a=>{const b=new d.Moment;return b.weekday=a,b.format("dd")}),this.val=(0,c.computed)("value",function(){return this.value?new d.Moment(this.value):new d.Moment().startOf("date")}),this.currentMonth=(0,c.computed)("value",function(){return this.val.clone().startOf("month")}),this.displayMonthyear=(0,c.computed)("currentMonth",function(){return this.currentMonth.format("MMM YYYY")}),this.displayDate=(0,c.computed)("val",function(){return this.value?this.val.format("LL"):""}),this.displayTime=(0,c.computed)("val",function(){return this.val.format("LT")}),this.hour=(0,c.computed)("val",function(){return this.val.hours}),this.minute=(0,c.computed)("val",function(){return this.val.minutes}),this.matrix=(0,c.computed)("currentMonth","val",function(){const a=this.val,b=this.currentMonth,d=a.year,e=a.month,f=a.date,g=b.month,h=b.clone().startOf("month").startOf("week"),i=b.clone().endOf("month").endOf("week");for(var j=c.A.create();h<i;){const a=c.A.create();for(let b=0;7>b;b++)a.push(c.O.create({isCurrent:h.date===f&&h.month===e&&h.year===d,isMonth:h.month===g,year:h.year,month:h.month,date:h.date})),h.add(1,"date");j.push(a)}return j}),this.app=(0,c.computed)(function(){return this.__owner__.lookup("application-route")})}calendarFocusIn(){this.calendarOpen=!0}calendarFocusOut(a){if(a.relatedTarget){const b=this.getElement();if(e(b,a.relatedTarget))return}this.calendarOpen=!1}clockFocusIn(){this.clockOpen=!0}clockFocusOut(a){if(a.relatedTarget){const b=this.getElement();if(e(b,a.relatedTarget))return}this.clockOpen=!1}prev(){this.currentMonth=this.currentMonth.clone().add(-1,"month")}next(){this.currentMonth=this.currentMonth.clone().add(1,"month")}setDate(a,b,c){const d=this.val.clone();d.year=a,d.month=b,d.date=c,this.changeAction(d.format("YYYY-MM-DDTHH:mm:ssZZ",this.app.displayTimezone)),this.val=d}hourUp(){this.val=this.val.clone().add(1,"hour")}hourDown(){this.val=this.val.clone().add(-1,"hour")}minuteUp(){this.val=this.val.clone().add(1,"minute")}minuteDown(){this.val=this.val.clone().add(-1,"minute")}mChangeAction(a){this.changeAction(a?a:a)}noop(){}}a.default=f}),define(9,["exports",45,46],function(a,b,c){"use strict";var e=Math.pow,f=Math.floor;function d(a){if(""===a)return"";else{const b=g.exec(a);return!b||isNaN(b[1])?NaN:(a=+b[1],b[2]&&(a*=e(2,10*h.indexOf(b[2][0].toLowerCase()))),f(a))}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const g=/^\s*([0-9.]+)\s*([kmgtpezy][b]?)?\s*$/i,h=["b","k","m","g","t","p","e","z","y"];class i extends b.Component{constructor(){super(),this.template="PGRpdiBjbGFzcz0icm93Ij4gPGRpdiBjbGFzcz0iY29sLTkiPiA8aW5wdXQtY29udHJvbCBjbGFzcz0iZm9ybS1jb250cm9sIHt7Y2xhc3N9fSIgdmFsdWU9e3t2YWx1ZX19IGNoYW5nZUFjdGlvbj17eyJmbiIgbUNoYW5nZUFjdGlvbn19IC8+IDwvZGl2PiA8ZGl2IGNsYXNzPSJjb2wtMyI+IDxpbnB1dCBjbGFzcz0iZm9ybS1jb250cm9sIHt7Y2xhc3N9fSIgdmFsdWU9e3tzaXplfX0gZGlzYWJsZWQ9dHJ1ZT4gPC9kaXY+IDwvZGl2Pg==",this.size=(0,c.computed)("value",function(){const a=d(this.value);return a?"".concat(a," bytes"):""})}mChangeAction(a){const b=d(a);isNaN(b)?this.changeErrorAction("Value must be a number and optional unit (e.g. MB)"):this.changeErrorAction(null),this.changeAction(a)}}a.default=i}),require([0]);