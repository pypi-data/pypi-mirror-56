/*! Copyright Novix S.A. 2019. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[71,24],{1337:function(n,e,a){"use strict";(function(t,l){var i,o,c=a(18);i=[a(726),a(710),a(725),a(1964)],void 0===(o=function(n,e,i,o){return t.View.extend({el:l("#main"),_uId:"",render:function(){l("#mainLoading").show(),l("div[data-rel='abm-company']").remove();var a=new n,t=this;if(this._uId=l.uuid(),this.options.companyId)a.getCompany(this.options.companyId,function(n){var a={id:t._uId,dataRel:"abm-company",tmpClass:"company-edit",title:(0,c.translate)("_editCompany")},d={company:n},s=e(a),u=i(),r=o(d);t.$el.append(s),l("div[data-id='"+t._uId+"']").find("div.abm-content").append(u),l("div[data-id='"+t._uId+"']").find("div.form-content").append(r),(0,c.postRender)(t.$el.find("div[data-id='"+t._uId+"']")),t.addHandlers(),l("#mainLoading").hide()});else{var d={id:t._uId,dataRel:"abm-company",tmpClass:"company-create",title:(0,c.translate)("_newCompany")},s=e(d),u=i(),r=o();t.$el.append(s),l("div[data-id='"+t._uId+"']").find("div.abm-content").append(u),l("div[data-id='"+t._uId+"']").find("div.form-content").append(r),l("div[data-id='"+t._uId+"']").find("div.company-code input").removeAttr("disabled"),(0,c.postRender)(t.$el.find("div[data-id='"+t._uId+"']")),t.addHandlers(),l("#mainLoading").hide()}},save:function(){var e=this._uId,t=l("div[data-id='"+e+"']").find("form");if(!l(t).validate().errorList.length>0){var i=l("div[data-id='"+e+"']").find("div.company-name input").val(),o=l("div[data-id='"+e+"']").find("div.company-code input").val(),c=l("div[data-id='"+e+"']").find("div.company-active input").is(":checked"),d=l("div[data-id='"+e+"']").find("div.company-licence textarea").val(),s=new n,u={};this.options.companyId?(u={code:o,name:i,active:c,system:!1},""!=d.trim()&&(u.licence=d),s.partialUpdate(this.options.companyId,u,function(){Promise.resolve().then(function(){var n=[a(748)];(function(n){(new n).show()}).apply(null,n)}).catch(a.oe)})):(u={code:o,name:i,licence:d,active:c},s.create(u,function(){Promise.resolve().then(function(){var n=[a(748)];(function(n){(new n).show()}).apply(null,n)}).catch(a.oe)}))}},cancel:function(){Promise.resolve().then(function(){var n=[a(748)];(function(n){(new n).show()}).apply(null,n)}).catch(a.oe)},addHandlers:function(){l("div[data-id='"+this._uId+"']").find("form").on("submit",l.proxy(function(){return this.save(),!1},this)),l("div[data-id='"+this._uId+"']").find("div.submit button.btn-cancel").on("click",l.proxy(function(){return this.cancel(),!1},this)),l("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.cancel)}})}.apply(e,i))||(n.exports=o)}).call(this,a(220),a(1))},1964:function(n,e,a){var t=a(690);function l(n){return n&&(n.__esModule?n.default:n)}n.exports=(t.default||t).template({1:function(n,e,a,t,l){return'        <input type="checkbox" class="icheck-me" value="1" data-skin="square" data-color="blue" checked />\n'},3:function(n,e,a,t,l){return'        <input type="checkbox" class="icheck-me" value="0" data-skin="square" data-color="blue" />\n'},compiler:[8,">= 4.3.0"],main:function(n,e,t,i,o){var c,d=null!=e?e:n.nullContext||{},s=n.escapeExpression,u=(n.propertyIsEnumerable,n.lambda);return'<div class="form-group">\n    <label for="textfield" class="col-sm-2 control-label">'+s(l(a(688)).call(d,"_name",{name:"L",hash:{},data:o,loc:{start:{line:2,column:58},end:{line:2,column:71}}}))+'</label>\n    <div class="col-sm-10">\n        <div class="col-sm-6 company-name">\n            <input type="text" value="'+s(u(null!=(c=null!=e?e.company:e)?c.name:c,e))+'" class="form-control" name="companyname" data-rule-required="true"\n                data-rule-minlength="3">\n        </div>\n    </div>\n</div>\n<div class="form-group">\n    <label for="textfield" class=" col-sm-2 control-label">'+s(l(a(688)).call(d,"_code",{name:"L",hash:{},data:o,loc:{start:{line:11,column:59},end:{line:11,column:72}}}))+'</label>\n    <div class="col-sm-10">\n        <div class="col-sm-6 company-code">\n            <input type="text" value="'+s(u(null!=(c=null!=e?e.company:e)?c.code:c,e))+'" class="form-control" disabled="disabled" data-rule-required="true">\n        </div>\n    </div>\n</div>\n<div class="form-group">\n    <label for="textfield" class="col-sm-2 control-label">'+s(l(a(688)).call(d,"active",{name:"L",hash:{},data:o,loc:{start:{line:19,column:58},end:{line:19,column:72}}}))+'</label>\n    <div class="col-sm-10 company-active">\n'+(null!=(c=l(a(689)).call(d,null!=(c=null!=e?e.company:e)?c.active:c,"==",!0,{name:"ifCond",hash:{},fn:n.program(1,o,0),inverse:n.program(3,o,0),data:o,loc:{start:{line:21,column:8},end:{line:25,column:19}}}))?c:"")+'    </div>\n</div>\n\n\n<div class="form-group">\n    <label for="textarea" class="col-sm-2 control-label">'+s(l(a(688)).call(d,"licence",{name:"L",hash:{},data:o,loc:{start:{line:31,column:57},end:{line:31,column:72}}}))+'</label>\n    <div class="company-licence col-sm-10">\n        <textarea rows="5" class="form-control">'+s(u(null!=(c=null!=e?e.company:e)?c.licence:c,e))+"</textarea>\n    </div>\n</div>"},useData:!0})},710:function(n,e,a){var t=a(690);n.exports=(t.default||t).template({compiler:[8,">= 4.3.0"],main:function(n,e,a,t,l){n.propertyIsEnumerable;var i,o=null!=e?e:n.nullContext||{},c=n.hooks.helperMissing,d=n.escapeExpression;return'<div class="abm-base-tmp '+d("function"==typeof(i=null!=(i=a.tmpClass||(null!=e?e.tmpClass:e))?i:c)?i.call(o,{name:"tmpClass",hash:{},data:l,loc:{start:{line:1,column:25},end:{line:1,column:37}}}):i)+' container-fluid mainTask" data-id="'+d("function"==typeof(i=null!=(i=a.id||(null!=e?e.id:e))?i:c)?i.call(o,{name:"id",hash:{},data:l,loc:{start:{line:1,column:73},end:{line:1,column:79}}}):i)+'" data-rel="'+d("function"==typeof(i=null!=(i=a.dataRel||(null!=e?e.dataRel:e))?i:c)?i.call(o,{name:"dataRel",hash:{},data:l,loc:{start:{line:1,column:91},end:{line:1,column:102}}}):i)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+d("function"==typeof(i=null!=(i=a.title||(null!=e?e.title:e))?i:c)?i.call(o,{name:"title",hash:{},data:l,loc:{start:{line:6,column:53},end:{line:6,column:62}}}):i)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},725:function(n,e,a){var t=a(690);function l(n){return n&&(n.__esModule?n.default:n)}n.exports=(t.default||t).template({compiler:[8,">= 4.3.0"],main:function(n,e,t,i,o){var c=null!=e?e:n.nullContext||{},d=n.escapeExpression;return'<form action="#" id="baseForm" method="POST" class=\'form-horizontal form-bordered form-validate\' novalidate="novalidate">\n    <div class="form-content">\n\n    </div>\n    <div class="submit form-actions col-sm-12">\n        <button type="submit" class="btn btn-primary btn-save">'+d(l(a(688)).call(c,"_save",{name:"L",hash:{},data:o,loc:{start:{line:6,column:63},end:{line:6,column:76}}}))+'</button>\n        <button type="button" class="btn btn-cancel">'+d(l(a(688)).call(c,"cancel",{name:"L",hash:{},data:o,loc:{start:{line:7,column:53},end:{line:7,column:67}}}))+"</button>\n    </div>\n</form>\n"},useData:!0})},726:function(n,e,a){"use strict";(function(t){var l,i=a(693);void 0===(l=function(){return t.Model.extend({list:function(n){(0,i.send)("companies/?limit=1000&offset=0",null,null,n)},fullList:function(n){(0,i.send)("companies/list_with_groups_and_depts/",null,null,n)},getCompany:function(n,e){(0,i.send)("companies/".concat(n,"/"),null,null,e)},update:function(n,e,a){(0,i.send)("companies/".concat(n,"/"),JSON.stringify(e),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},a)},partialUpdate:function(n,e,a){(0,i.send)("companies/".concat(n,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},a)},create:function(n,e){(0,i.send)("companies/",n,{type:"POST"},e)},delete:function(n,e){(0,i.send)("companies/".concat(n,"/"),null,{type:"DELETE"},e)},UpdateCompanyPreference:function(n,e,a){var t={companyId:__currentSession.companyId,preferenceCode:n,value:e};(0,i.send)("company/UpdateCompanyPreference",t,{type:"PUT"},a)},GetCompanyPreference:function(n,e){(0,i.send)("companies/preference_by_code/?code=".concat(n),null,{type:"GET"},e)},sendTestEmail:function(n,e){(0,i.send)("company/SendTestEmail",n,{type:"PUT"},e)},getLicenceKey:function(n,e){(0,i.send)("company/GetLK/"+n,null,null,e)},setLicenceKey:function(n,e){(0,i.send)("company/SetLK/",n,{type:"POST"},e)}})}.apply(e,[]))||(n.exports=l)}).call(this,a(220))}}]);