/*! Copyright Novix S.A. 2019. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{688:function(n,t,i){"use strict";var e=i(18);n.exports=function(n){return(0,e.translate)(n)}},693:function(n,t,i){"use strict";i.r(t),function(n){i.d(t,"ajaxSetup",function(){return a}),i.d(t,"send",function(){return o});var e=i(18);function a(t=null){n.ajaxSetup({...{dataType:"json",crossDomain:!0,headers:{Authorization:`Token ${__currentToken}`,"session-key":__currentSession?__currentSession.session_key:""}},...()=>t||{}})}function o(t,a,o,s,r,l,c){o||(o=new Object),l||n("#secondLoading").show(),o.hasOwnProperty("success")||(o.success=function(t,e,a){if("object"!=typeof t&&null!=t&&""!=t)try{t=n.parseJSON(t)}catch(n){}l||(n("#mainLoading").hide(),n("#secondLoading").hide());var o=function(n,t,e,a,o){n&&n.hasOwnProperty("hasError")?(e||Promise.all([i.e(2),i.e(18)]).then(function(){var t=[i(685)];(function(t){(new t).show({title:"WARNING!",text:n.error,notifyType:"error"})}).apply(null,t)}).catch(i.oe),void 0!=o&&o(n.error)):void 0!=a&&a(n,t)};t&&t.hasOwnProperty("isCompressed")&&t.hasOwnProperty("obj")?i.e(105).then(function(){var e=[i(858)];(function(i){t=n.parseJSON(i.inflate(atob(t.obj),{to:"string"})),o(t,a,c,s,r)}).apply(null,e)}).catch(i.oe):o(t,a,c,s,r)}),o.hasOwnProperty("type")||(o.type="GET"),a&&(o.data=a),o.error=function(a,s,u){if(l||(n("#mainLoading").hide(),n("#secondLoading").hide()),a){let n="";const s=`[${o.type}] ${t}`;if(a.responseJSON)for(const t in a.responseJSON)n+="non_field_errors"==t?`${a.responseJSON[t]}\n`:`[${t}]: ${a.responseJSON[t]}\n`;else n=`${a.responseText}\n`;let l="info",u=void 0,d=void 0,f="WARNING!";const p=[];switch(a.status){case 401:l="info",d=15e3,u=(()=>{location.reload()}),p.push({css:"warning",code:"401",title:Object(e.translate)("relog")});break;case 403:l="info",d=1e4,f=Object(e.translate)("access_denied")}void 0!=c&&0!=c||Promise.all([i.e(2),i.e(18)]).then(function(){var t=[i(685)];(function(t){(new t).show({title:f,text:n,endpoint:s,notifyType:l,timeOut:d,buttons:p,callback:u})}).apply(null,t)}).catch(i.oe),void 0!=r&&r(n,a)}},n.ajax({url:`${__apiURL}/${t}`,contentType:o.contentType,data:a,dataType:o.dataType?o.dataType:"json",method:o.type,success:o.success,error:o.error})}}.call(this,i(1))},719:function(n,t,i){"use strict";n.exports=function(){return __apiURL}},800:function(n,t,i){"use strict";var e=i(18);n.exports=function(n){return(0,e.timeAgo)(n)}},857:function(n,t,i){"use strict";(function(e,a){var o,s=i(693);void 0===(o=function(){var n;return e.Model.extend({start:function(){n=setTimeout(function t(){(0,s.send)("notification/KeepAlive",null,null,function(i){if(i){var e=i.unread;a("#navigation .unreadNotifications").length>0&&(a("#navigation .unreadNotifications").text(e).hide(),e>0&&a("#navigation .unreadNotifications").show())}n=setTimeout(t,4e4)},void 0,!0)},1e3)},stop:function(){clearTimeout(n)},getNotifications:function(n){(0,s.send)("notification/getNotifications",null,null,n)},markAsRead:function(n,t){(0,s.send)("notification/markAsRead?id="+n,null,null,t)}})}.apply(t,[]))||(n.exports=o)}).call(this,i(220),i(1))},883:function(n,t,i){"use strict";(function(e,a){var o,s,r=i(18);o=[i(857),i(985)],void 0===(s=function(n,t){return e.Controller.extend({name:"notificationManager",start:function(){var i=new n;i.start(),a("#navigation .btnNotification").on("click",function(){a("#navigation .notificationsList").empty(),a("#navigation .notificationsList").append("<li><a><div class='message'>"+(0,r.translate)("loading_notifications")+"</div></a></li>"),i.getNotifications(function(n){if(a("#navigation .notificationsList").empty(),n&&0!=n.length){var i=t(n);a("#navigation .notificationsList").append(i)}else a("#navigation .notificationsList").append("<li><a><div class='message'>"+(0,r.translate)("no_new_notifications")+"</div></a></li>")})}),a("#navigation .notificationsList").on("click","li a, li a .btnMarkAsRead",function(n){if(a(this).closest("li").hasClass("notificationItem")&&!a(this).closest("li.notificationItem").find("a").hasClass("read")){var t=a(this).closest("li").attr("data-id");i.markAsRead(t),a(this).closest("li").find("a").addClass("read");var e=parseInt(a("#navigation .unreadNotifications").text())-1;a("#navigation .unreadNotifications").text(e).show(),e<=0&&a("#navigation .unreadNotifications").hide()}if(a(this).hasClass("btnMarkAsRead"))return!1})},notify:function(n){(0,r.showMessage)(n.textMessage,(0,r.translate)("new_notification"),"info"),a("#navigation .unreadNotifications").text(parseInt(a("#navigation .unreadNotifications").text())+1).show()}})}.apply(t,o))||(n.exports=s)}).call(this,i(694),i(1))},985:function(n,t,i){var e=i(690);function a(n){return n&&(n.__esModule?n.default:n)}n.exports=(e.default||e).template({1:function(n,t,e,o,s){n.propertyIsEnumerable;var r,l=n.lambda,c=n.escapeExpression,u=null!=t?t:n.nullContext||{};return'<li class="notificationItem" data-id="'+c(l(null!=t?t.notificationId:t,t))+'" data-messageType="'+c(l(null!=t?t.messageType:t,t))+'">\n    <a href="#" '+(null!=(r=e.if.call(u,null!=t?t.read:t,{name:"if",hash:{},fn:n.program(2,s,0),inverse:n.noop,data:s,loc:{start:{line:3,column:16},end:{line:3,column:49}}}))?r:"")+'>\n        \x3c!--img src="'+c(a(i(719)).call(u,{name:"baseURL",hash:{},data:s,loc:{start:{line:4,column:21},end:{line:4,column:32}}}))+"thumbs/view.ashx?img=users-"+c(l(null!=t?t.fromUserImageUrl:t,t))+'&w=43&h=43&t=cropt" alt="'+c(l(null!=t?t.fromUser:t,t))+'" title="'+c(l(null!=t?t.fromUser:t,t))+'" /--\x3e\n        <div class="details">\n            <div class="message">\n                <p>'+(null!=(r=l(null!=t?t.textMessage:t,t))?r:"")+'</p>\n                <span class="time">'+c(a(i(800)).call(u,null!=t?t.createdDate:t,{name:"timeAgo",hash:{},data:s,loc:{start:{line:8,column:35},end:{line:8,column:58}}}))+'</span>\n            </div>\n        </div>\n        <i class="far fa-circle btnMarkAsRead" title="'+c(a(i(688)).call(u,"mark_as_read",{name:"L",hash:{},data:s,loc:{start:{line:11,column:54},end:{line:11,column:74}}}))+'"></i>\n    </a>\n</li>\n'},2:function(n,t,i,e,a){return' class="read" '},compiler:[8,">= 4.3.0"],main:function(n,t,i,e,a){var o;return null!=(o=i.each.call(null!=t?t:n.nullContext||{},t,{name:"each",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:0},end:{line:14,column:9}}}))?o:""},useData:!0})}}]);